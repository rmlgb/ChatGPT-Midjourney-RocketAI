import{d as h,O as R,r as i,y as A,c as n,o as v,L as G,i as o,f as y,h as s,l as k,P as _,E as m,s as g}from"./index-a2cde0ca.js";const q={class:"flex justify-between"},E=y("b",null,"GPTS配置",-1),j=h({__name:"gptsConfig",setup(B){const l=R({gptsKey:"",gptsRealyAddress:""}),b=i({gptsKey:[{required:!0,message:"请填写GptsKey",trigger:"blur"}],gptsRealyAddress:[{required:!0,validator:(t,e,r)=>{if(console.log("value",!e),!e)return r(new Error("请填写中转地址"));if(!/^http(s)?:\/\/(([\w-]+\.)+[\w-]+|((25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(25[0-5]|2[0-4]\d|[01]?\d\d?))(:\d+)?(\/[\w- ./?%&=]*)?$/.test(e))return r(new Error("请输入正确的中转地址"));r()}}]}),d=i();async function p(){const t=await _.queryConfig({keys:["gptsKey","gptsRealyAddress"]});Object.assign(l,t.data)}function w(){var t;(t=d.value)==null||t.validate(async e=>{if(e){try{await _.setConfig({settings:x(l)}),m.success("变更配置信息成功")}catch{}p()}else m.error("请填写完整信息")})}function x(t){return Object.keys(t).map(e=>({configKey:e,configVal:t[e]}))}return A(()=>{p()}),(t,e)=>{const r=n("el-button"),u=n("el-input"),c=n("el-form-item"),f=n("el-col"),K=n("el-row"),V=n("el-form"),C=n("el-card");return v(),G(C,{style:{margin:"20px"}},{header:o(()=>[y("div",q,[E,s(r,{class:"button",text:"",onClick:w},{default:o(()=>[k(" 保存设置 ")]),_:1})])]),default:o(()=>[s(V,{ref_key:"formRef",ref:d,rules:b.value,model:l,"label-width":"150px"},{default:o(()=>[s(K,null,{default:o(()=>[s(f,{xs:24,md:24,lg:24,xl:24},{default:o(()=>[s(c,{label:"Gpts中转地址",prop:"gptsRealyAddress"},{default:o(()=>[s(u,{modelValue:l.gptsRealyAddress,"onUpdate:modelValue":e[0]||(e[0]=a=>l.gptsRealyAddress=a),placeholder:"请输入Gpts中转地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),s(f,{xs:24,md:24,lg:24,xl:24},{default:o(()=>[s(c,{label:"GptsKey",prop:"gptsKey"},{default:o(()=>[s(u,{modelValue:l.gptsKey,"onUpdate:modelValue":e[1]||(e[1]=a=>l.gptsKey=a),placeholder:"请输入GptsKey",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})}}});typeof g=="function"&&g(j);export{j as default};
