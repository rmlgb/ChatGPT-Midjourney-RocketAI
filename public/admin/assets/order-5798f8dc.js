import{d as H,r as b,O as W,y as J,c as n,Q as K,o as p,e as y,h as t,i as a,J as N,K as D,L as S,g as _,l as f,w as M,f as Q,t as R,z as G,s as T}from"./index-a2cde0ca.js";import{A as U}from"./sales-35c723a2.js";import{O as X,p as Y}from"./index-f74fb548.js";const Z=["src"],E=H({__name:"order",setup(ee){const C=b(),z=b(0),m=b(!1),o=W({orderStatus:0,withdrawalChannels:null,page:1,size:10}),k=b([]);async function u(){try{m.value=!0;const s=await U.querySalesOrder(o);m.value=!1;const{rows:l,count:c}=s.data;z.value=c,k.value=l}catch{m.value=!1}}function B(s){s==null||s.resetFields(),u()}async function O(s,l){const{id:c}=s,w={id:c,status:l};await U.salesAuditOrder(w),u()}return J(()=>{u()}),(s,l)=>{const c=n("el-option"),w=n("el-select"),h=n("el-form-item"),g=n("el-button"),L=n("el-form"),v=G,P=n("el-alert"),i=n("el-table-column"),V=n("el-tag"),x=n("el-popconfirm"),$=n("el-table"),j=n("el-pagination"),q=n("el-row"),F=K("loading");return p(),y("div",null,[t(v,null,{default:a(()=>[t(L,{ref_key:"formRef",ref:C,inline:!0,model:o},{default:a(()=>[t(h,{label:"工单状态",prop:"orderStatus"},{default:a(()=>[t(w,{modelValue:o.orderStatus,"onUpdate:modelValue":l[0]||(l[0]=e=>o.orderStatus=e),placeholder:"请选择工单状态",clearable:""},{default:a(()=>[(p(!0),y(N,null,D(_(X),e=>(p(),S(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(h,{label:"提现渠道",prop:"withdrawalChannels"},{default:a(()=>[t(w,{modelValue:o.withdrawalChannels,"onUpdate:modelValue":l[1]||(l[1]=e=>o.withdrawalChannels=e),placeholder:"请选择提现渠道",clearable:""},{default:a(()=>[(p(!0),y(N,null,D(_(Y),e=>(p(),S(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(h,null,{default:a(()=>[t(g,{type:"primary",onClick:u},{default:a(()=>[f(" 查询 ")]),_:1}),t(g,{onClick:l[2]||(l[2]=e=>B(_(C)))},{default:a(()=>[f(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(v,null,{default:a(()=>[t(P,{"show-icon":"",title:"提现审核说明",description:"所有工单只可审核一次、请准确操作、打款请人工打款、确定打款后点击审核通过即可！",type:"success"})]),_:1}),t(v,{style:{width:"100%"}},{default:a(()=>[M((p(),S($,{border:"",data:_(k),style:{width:"100%"},size:"large"},{default:a(()=>[t(i,{prop:"userInfo.avatar",label:"头像",width:"120"},{default:a(e=>{var r,d;return[Q("img",{src:(d=(r=e.row)==null?void 0:r.userInfo)==null?void 0:d.avatar,style:{height:"50px"}},null,8,Z)]}),_:1}),t(i,{prop:"withdrawalChannels",align:"center",label:"提现渠道"},{default:a(e=>{var r;return[t(V,{type:((r=e.row)==null?void 0:r.withdrawalChannels)===1?"":"success"},{default:a(()=>{var d;return[f(R(((d=e.row)==null?void 0:d.withdrawalChannels)===1?"支付宝":"微信"),1)]}),_:2},1032,["type"])]}),_:1}),t(i,{prop:"userInfo.email",label:"邮箱",width:"200"}),t(i,{prop:"withdrawalAmount",align:"center",label:"提现金额"}),t(i,{prop:"contactInformation",align:"center",label:"提现备注",width:"340"}),t(i,{prop:"remark",align:"center",label:"提现留言",width:"340"}),t(i,{prop:"orderStatus",align:"center",label:"工单状态",width:"140"},{default:a(e=>{var r,d;return[t(V,{type:((r=e.row)==null?void 0:r.orderStatus)===0?"":((d=e.row)==null?void 0:d.orderStatus)===1?"success":"danger"},{default:a(()=>{var A,I;return[f(R(((A=e.row)==null?void 0:A.orderStatus)===0?"待审核":((I=e.row)==null?void 0:I.orderStatus)===1?"已通过":"已拒绝"),1)]}),_:2},1032,["type"])]}),_:1}),t(i,{fixed:"right",label:"审核",width:"200",align:"center"},{default:a(e=>[t(x,{title:"确认通过审核吗、请您先手动打款后通过！",width:"260","icon-color":"red",onConfirm:r=>O(e.row,1)},{reference:a(()=>[t(g,{link:"",type:"primary",size:"small",disabled:e.row.orderStatus!==0},{default:a(()=>[f(" 通过审核 ")]),_:2},1032,["disabled"])]),_:2},1032,["onConfirm"]),t(x,{title:"确认拒绝审核么、拒绝后此次提交将作废！",width:"260","icon-color":"red",onConfirm:r=>O(e.row,-1)},{reference:a(()=>[t(g,{link:"",type:"danger",size:"small",disabled:e.row.orderStatus!==0},{default:a(()=>[f(" 拒绝审核 ")]),_:2},1032,["disabled"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[F,_(m)]]),t(q,{class:"flex justify-end mt-5"},{default:a(()=>[t(j,{"current-page":o.page,"onUpdate:currentPage":l[3]||(l[3]=e=>o.page=e),"page-size":o.size,"onUpdate:pageSize":l[4]||(l[4]=e=>o.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:_(z),onSizeChange:u,onCurrentChange:u},null,8,["current-page","page-size","total"])]),_:1})]),_:1})])}}});typeof T=="function"&&T(E);export{E as default};
