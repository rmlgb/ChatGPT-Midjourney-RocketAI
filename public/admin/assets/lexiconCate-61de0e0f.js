import{d as W,r,O as g,y as F,c as s,Q as H,o as A,e as P,h as t,i as o,f as U,l as c,g as b,M as Q,w as j,L as G,E as y,z as J,s as D}from"./index-a2cde0ca.js";import{L as _}from"./lexicon-076c6536.js";import{W as K}from"./index-f74fb548.js";const X=W({__name:"lexiconCate",setup(Y){const S=r([]);K.forEach(a=>{S.value.push({label:a.label.replaceAll("绘制",""),value:a.value})}),r(),r(0);const m=r(!1);g({rec:null,status:null,page:1,size:10});const w=r([]);async function p(){try{m.value=!0;const a=await _.getCateList();m.value=!1,w.value=a.data}catch{m.value=!1}}const u=r(!1),V=r(),e=g({id:0,name:"",status:!1,sort:0}),h=g({name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]});async function L(){if(await V.value.validate(),e.id){await k({id:e.id,name:e.name,status:e.status?1:0,sort:e.sort});return}_.addCate({name:e.name,status:e.status?1:0,sort:e.sort}),y.success("添加成功"),p(),C()}function C(){u.value=!1,e.name="",e.status=!1,e.sort=0}async function k(a){await _.updateCate(a),y.success("更新成功"),p()}async function R(a){a.status=a.status?0:1,await k(a)}function T(a){e.name=a.name,e.status=a.status===1,e.sort=a.sort,e.id=a.id,u.value=!0}async function $(a){await _.delCate(a.id),y.success("删除成功"),p()}return F(()=>{p()}),(a,n)=>{const i=s("el-button"),q=s("el-input"),v=s("el-form-item"),x=s("el-switch"),B=s("el-input-number"),E=s("el-form"),I=s("el-dialog"),d=s("el-table-column"),N=s("el-popconfirm"),z=s("el-table"),M=J,O=H("loading");return A(),P("div",null,[t(M,{style:{width:"100%"},class:"flex flex-col gap-2"},{default:o(()=>[U("div",null,[t(i,{type:"primary",onClick:n[0]||(n[0]=l=>u.value=!0)},{default:o(()=>[c(" 新增 ")]),_:1}),t(I,{modelValue:b(u),"onUpdate:modelValue":n[5]||(n[5]=l=>Q(u)?u.value=l:null),title:e.id?"编辑":"新增",width:"30%","before-close":C},{footer:o(()=>[U("span",null,[t(i,{onClick:n[4]||(n[4]=l=>u.value=!1)},{default:o(()=>[c("取消")]),_:1}),t(i,{type:"primary",onClick:L},{default:o(()=>[c("确认")]),_:1})])]),default:o(()=>[t(E,{ref_key:"cateRef",ref:V,model:e,rules:h,"label-width":"auto",style:{"max-width":"600px"}},{default:o(()=>[t(v,{label:"分类名称",prop:"name"},{default:o(()=>[t(q,{modelValue:e.name,"onUpdate:modelValue":n[1]||(n[1]=l=>e.name=l)},null,8,["modelValue"])]),_:1}),t(v,{label:"状态",prop:"status"},{default:o(()=>[t(x,{modelValue:e.status,"onUpdate:modelValue":n[2]||(n[2]=l=>e.status=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),t(v,{label:"排序",prop:"sort"},{default:o(()=>[t(B,{modelValue:e.sort,"onUpdate:modelValue":n[3]||(n[3]=l=>e.sort=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])]),j((A(),G(z,{border:"",data:b(w),style:{width:"100%"},size:"large"},{default:o(()=>[t(d,{prop:"id",align:"center",label:"ID",width:"70"}),t(d,{prop:"name",align:"center",label:"分类名称"}),t(d,{prop:"status",align:"center",label:"状态"},{default:o(l=>[t(x,{modelValue:l.row.status,"onUpdate:modelValue":f=>l.row.status=f,"active-value":1,"inactive-value":0,onClick:f=>R(l.row)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:1}),t(d,{prop:"sort",align:"center",label:"排序"}),t(d,{prop:"userInfo",align:"center",label:"操作"},{default:o(l=>[t(i,{type:"primary",onClick:f=>T(l.row)},{default:o(()=>[c(" 编辑 ")]),_:2},1032,["onClick"]),t(N,{title:"确认删除吗?",onConfirm:f=>$(l.row)},{reference:o(()=>[t(i,{type:"danger"},{default:o(()=>[c(" 删除 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[O,b(m)]])]),_:1})])}}});typeof D=="function"&&D(X);export{X as default};
