import{d as le,r as s,O as C,y as ae,c as r,Q as oe,o as p,e as b,h as t,i as o,l as _,g,f as $,M as ne,J as re,K as se,L as K,F as ie,w as ue,E as y,z as de,s as N}from"./index-a2cde0ca.js";import{I as ce}from"./index-97360b7c.js";import{W as me}from"./index-f74fb548.js";import{L as v}from"./lexicon-076c6536.js";const pe={style:{float:"right"}},_e=["src"],fe={key:1},ge=le({__name:"lexicon",setup(ye){const T=s([]);me.forEach(l=>{T.value.push({label:l.label.replaceAll("绘制",""),value:l.value})});const z="/api/upload/file",U=s();s(0);const w=s(!1),B=C({status:null,page:1,size:10}),L=s([]);async function f(){try{w.value=!0;const l=await v.getLexiconList();w.value=!1,console.log("res",l.data),L.value=l.data}catch{w.value=!1}}function M(l){l==null||l.resetFields(),f()}const h=s([]),u=s(!1),e=C({}),V=s(),A=s(),O=C({category:[{required:!0,message:"请输入分类",trigger:"blur"}],cnKeyword:[{required:!0,message:"请输入中文关键词",trigger:"blur"}],enKeyword:[{required:!0,message:"请输入英文关键词",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]});ae(async()=>{f(),h.value=(await v.getCateList()).data});const k=()=>{e.category="",e.cnKeyword="",e.enKeyword="",e.status=0,e.sort=0,e.image="",e.id=0},W=async()=>{var l;if(await((l=A.value)==null?void 0:l.validate()),!e.image)return y.error("请上传图片");e.id&&V.value?await F({...V.value,...e}):await v.addLexicon({...e,status:e.status?1:0}),u.value=!1,y.success(`${e.id?"更新":"添加"}成功`),f(),k()},F=async l=>{if(!l.image)return y.error("请上传图片");await v.updateLexicon({...l,status:l.status?1:0}),k(),f()},E=async l=>{await F({...l,status:l.status?0:1}),y.success("修改成功")},H=l=>{V.value=l,e.id=l.id,e.category=l.category,e.cnKeyword=l.cnKeyword,e.enKeyword=l.enKeyword,e.status=l.status,e.sort=l.sort,e.image=l.image,u.value=!0},J=()=>{k(),u.value=!0},P=async l=>{await v.delLexicon(l.id),y.success("删除成功"),f()};return(l,n)=>{const x=r("el-input"),i=r("el-form-item"),d=r("el-button"),Q=r("el-option"),j=r("el-select"),I=r("el-switch"),G=r("el-input-number"),R=r("el-form"),X=r("el-dialog"),D=de,c=r("el-table-column"),Y=r("el-image"),Z=r("el-popconfirm"),ee=r("el-table"),te=oe("loading");return p(),b("div",null,[t(D,null,{default:o(()=>[t(R,{ref_key:"formRef",ref:U,inline:!0,model:B},{default:o(()=>[t(i,{label:"内容搜索",prop:"status"},{default:o(()=>[t(x,{placeholder:"请输入"})]),_:1}),t(i,null,{default:o(()=>[t(d,{type:"primary",onClick:f},{default:o(()=>[_(" 查询 ")]),_:1}),t(d,{onClick:n[0]||(n[0]=a=>M(g(U)))},{default:o(()=>[_(" 重置 ")]),_:1})]),_:1}),$("span",pe,[t(d,{type:"primary",onClick:J},{default:o(()=>[_(" 新增 ")]),_:1}),t(X,{modelValue:g(u),"onUpdate:modelValue":n[8]||(n[8]=a=>ne(u)?u.value=a:null),title:e.id?"编辑":"新增",width:"40%"},{footer:o(()=>[$("span",null,[t(d,{onClick:n[7]||(n[7]=a=>u.value=!1)},{default:o(()=>[_("取消")]),_:1}),t(d,{type:"primary",onClick:W},{default:o(()=>[_("确认")]),_:1})])]),default:o(()=>[t(R,{rules:O,model:e,"label-width":"auto",ref_key:"lexiconFormRef",ref:A},{default:o(()=>[t(i,{label:"分类",prop:"category"},{default:o(()=>[t(j,{modelValue:e.category,"onUpdate:modelValue":n[1]||(n[1]=a=>e.category=a),placeholder:"请选择分类",clearable:"",filterable:""},{default:o(()=>[(p(!0),b(re,null,se(g(h),a=>(p(),K(Q,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"中文关键词",prop:"cnKeyword"},{default:o(()=>[t(x,{modelValue:e.cnKeyword,"onUpdate:modelValue":n[2]||(n[2]=a=>e.cnKeyword=a)},null,8,["modelValue"])]),_:1}),t(i,{label:"英文关键词",prop:"enKeyword"},{default:o(()=>[t(x,{modelValue:e.enKeyword,"onUpdate:modelValue":n[3]||(n[3]=a=>e.enKeyword=a)},null,8,["modelValue"])]),_:1}),t(i,{label:"状态",prop:"status"},{default:o(()=>[t(I,{modelValue:e.status,"onUpdate:modelValue":n[4]||(n[4]=a=>e.status=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),t(i,{label:"排序",prop:"sort"},{default:o(()=>[t(G,{modelValue:e.sort,"onUpdate:modelValue":n[5]||(n[5]=a=>e.sort=a)},null,8,["modelValue"])]),_:1}),t(i,{label:"图片",prop:"image"},{default:o(()=>[t(ce,{url:e.image,"onUpdate:url":n[6]||(n[6]=a=>e.image=a),action:z},{default:o(()=>[e.image?(p(),b("img",{key:0,src:e.image,style:{width:"100px"},class:"avatar"},null,8,_e)):ie("",!0)]),_:1},8,["url"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])])]),_:1},8,["model"])]),_:1}),t(D,{style:{width:"100%"}},{default:o(()=>[ue((p(),K(ee,{border:"",data:g(L),style:{width:"100%"},size:"large"},{default:o(()=>[t(c,{prop:"id",align:"center",label:"ID",width:"70"}),t(c,{prop:"enKeyword",align:"center",label:"关键字英文"}),t(c,{prop:"cnKeyword",align:"center",label:"关键字中文"}),t(c,{prop:"category",align:"center",label:"所属类别"}),t(c,{prop:"status",align:"center",label:"状态"},{default:o(a=>[t(I,{modelValue:a.row.status,"onUpdate:modelValue":m=>a.row.status=m,onClick:m=>E(a.row),"active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:1}),t(c,{prop:"imageUrl",align:"center",label:"图片"},{default:o(a=>{var m,S,q;return[(m=a.row)!=null&&m.image?(p(),K(Y,{key:0,style:{height:"120px"},"preview-teleported":"",fit:"contain","preview-src-list":[(S=a.row)==null?void 0:S.image],src:(q=a.row)==null?void 0:q.image,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])):(p(),b("span",fe,"没有图片嗷~"))]}),_:1}),t(c,{prop:"userInfo",align:"center",label:"操作"},{default:o(a=>[t(d,{type:"primary",onClick:m=>H(a.row)},{default:o(()=>[_(" 编辑 ")]),_:2},1032,["onClick"]),t(Z,{title:"确认删除吗?",onConfirm:m=>P(a.row)},{reference:o(()=>[t(d,{type:"danger"},{default:o(()=>[_("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[te,g(w)]])]),_:1})])}}});typeof N=="function"&&N(ge);export{ge as default};
