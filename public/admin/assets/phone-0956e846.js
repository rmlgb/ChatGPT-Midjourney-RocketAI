import{d as U,O as B,r as g,y as C,c as u,o as I,e as k,h as e,i as l,f as y,l as q,P as h,E as b,z as N,s as V}from"./index-a2cde0ca.js";const R={class:"flex justify-between"},T=y("b",null,"阿里云手机验证码配置",-1),L=U({__name:"phone",setup(j){const o=B({phoneRegisterStatus:"",phoneLoginStatus:"",aliPhoneAccessKeyId:"",aliPhoneAccessKeySecret:"",aliPhoneSignName:"",aliPhoneTemplateCode:"",smsBaoPassword:"",smsBaoUser:"",smsBaoStatus:"",aliPhoneStatus:""}),S=g({phoneRegisterStatus:[{required:!1,trigger:"blur",message:"请选择是否开启手机号注册"}],phoneLoginStatus:[{required:!1,trigger:"blur",message:"请选择是否开启手机号登录"}],aliPhoneAccessKeyId:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务accessKeyId"}],aliPhoneAccessKeySecret:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务accessKeySecret"}],aliPhoneSignName:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务的模板签名"}],aliPhoneTemplateCode:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务的模板ID"}]}),c=g();async function p(){const d=await h.queryConfig({keys:Object.keys(o)});Object.assign(o,d.data)}function x(){var d;(d=c.value)==null||d.validate(async a=>{if(a){try{await h.setConfig({settings:P(o)}),b.success("变更配置信息成功")}catch{}p()}else b.error("请填写完整信息")})}function P(d){return Object.keys(d).map(a=>({configKey:a,configVal:d[a]}))}return C(()=>{p()}),(d,a)=>{const f=u("el-alert"),v=N,K=u("el-button"),m=u("el-switch"),_=u("el-tooltip"),s=u("el-form-item"),n=u("el-col"),r=u("el-row"),i=u("el-input"),w=u("el-form"),A=u("el-card");return I(),k("div",null,[e(v,null,{default:l(()=>[e(f,{closable:!1,"show-icon":"",title:"验证码说明",description:"此处采用阿里云短信服务、请先申请好个人的签名模板以及获取到您的秘钥信息、详细申请地址为：https://dysms.console.aliyun.com/overview 当您配置并开启后则表示开启用户端手机号注册的行为！",type:"warning"})]),_:1}),e(A,{style:{margin:"20px"}},{header:l(()=>[y("div",R,[T,e(K,{class:"button",text:"",onClick:x},{default:l(()=>[q(" 保存设置 ")]),_:1})])]),default:l(()=>[e(w,{ref_key:"formRef",ref:c,rules:S.value,model:o,"label-width":"170px"},{default:l(()=>[e(r,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"是否开启手机号登录",prop:"phoneLoginStatus"},{default:l(()=>[e(_,{class:"box-item",effect:"dark",content:"如您启用短信登录、则用户端则可以通过手机号的方式登录！",placement:"right"},{default:l(()=>[e(m,{modelValue:o.phoneLoginStatus,"onUpdate:modelValue":a[0]||(a[0]=t=>o.phoneLoginStatus=t),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"是否开启手机号注册",prop:"phoneRegisterStatus"},{default:l(()=>[e(_,{class:"box-item",effect:"dark",content:"如您启用短信验证、则用户端则可以通过手机验证码方式注册！",placement:"right"},{default:l(()=>[e(m,{modelValue:o.phoneRegisterStatus,"onUpdate:modelValue":a[1]||(a[1]=t=>o.phoneRegisterStatus=t),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"阿里云启用状态",prop:"aliPhoneStatus"},{default:l(()=>[e(m,{modelValue:o.aliPhoneStatus,"onUpdate:modelValue":a[2]||(a[2]=t=>o.aliPhoneStatus=t),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"AccessKeyId",prop:"aliPhoneAccessKeyId"},{default:l(()=>[e(i,{modelValue:o.aliPhoneAccessKeyId,"onUpdate:modelValue":a[3]||(a[3]=t=>o.aliPhoneAccessKeyId=t),placeholder:"请填写AccessKeyId",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"AccessKeySecret",prop:"aliPhoneAccessKeySecret"},{default:l(()=>[e(i,{modelValue:o.aliPhoneAccessKeySecret,"onUpdate:modelValue":a[4]||(a[4]=t=>o.aliPhoneAccessKeySecret=t),placeholder:"请填写AccessKeySecret",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"短信签名",prop:"aliPhoneSignName"},{default:l(()=>[e(i,{modelValue:o.aliPhoneSignName,"onUpdate:modelValue":a[5]||(a[5]=t=>o.aliPhoneSignName=t),placeholder:"请填写您申请的短信签名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"短信模板ID",prop:"aliPhoneTemplateCode"},{default:l(()=>[e(i,{modelValue:o.aliPhoneTemplateCode,"onUpdate:modelValue":a[6]||(a[6]=t=>o.aliPhoneTemplateCode=t),placeholder:"请填写短信模板ID",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"短信宝启用状态",prop:"aliPhoneStatus"},{default:l(()=>[e(m,{modelValue:o.smsBaoStatus,"onUpdate:modelValue":a[7]||(a[7]=t=>o.smsBaoStatus=t),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"短信宝登录账号",prop:"smsBaoUser"},{default:l(()=>[e(i,{modelValue:o.smsBaoUser,"onUpdate:modelValue":a[8]||(a[8]=t=>o.smsBaoUser=t),placeholder:"请填写短信宝登录账号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(s,{label:"短信宝登录密码",prop:"smsBaoPassword"},{default:l(()=>[e(i,{modelValue:o.smsBaoPassword,"onUpdate:modelValue":a[9]||(a[9]=t=>o.smsBaoPassword=t),placeholder:"短信宝登录密码",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof V=="function"&&V(L);export{L as default};
