import{d as _,r as m,y as N,A as R,o as w,e as f,B as y,C as T,g as t,q as k,D as z,f as b,t as x,l as E,F as A,u as M,a as D,b as F,c as u,h as e,i as n,G as I,E as L,z as G,s as V}from"./index-a2cde0ca.js";const j=_({name:"FixedActionBar"}),J=_({...j,setup(i){const a=m(!1);N(()=>{l(),window.addEventListener("scroll",l)}),R(()=>{window.removeEventListener("scroll",l)});function l(){const r=document.documentElement.scrollTop||document.body.scrollTop,d=document.documentElement.clientHeight||document.body.clientHeight,o=document.documentElement.scrollHeight||document.body.scrollHeight;a.value=Math.ceil(r+d)>=o}return(r,d)=>(w(),f("div",{class:T(["actionbar",{shadow:!t(a)}]),"data-fixed-calc-width":""},[y(r.$slots,"default",{},void 0,!0)],2))}});const K=k(J,[["__scopeId","data-v-eef8b492"]]),O={class:"header"},Q={class:"main"},W={class:"title"},X={class:"content"},Y={key:0,class:"sub"},Z=_({name:"PageHeader"}),ee=_({...Z,props:{title:{type:String,required:!0},content:{type:String,default:""}},setup(i){const a=z();return(l,r)=>(w(),f("div",O,[b("div",Q,[b("div",W,x(i.title),1),b("div",X,[y(l.$slots,"content",{},()=>[E(x(i.content),1)],!0)])]),t(a).default?(w(),f("div",Y,[y(l.$slots,"default",{},void 0,!0)])):A("",!0)]))}});const oe=k(ee,[["__scopeId","data-v-1d4ba765"]]),se=_({name:"PersonalEditPassword"}),te=_({...se,setup(i){const a=M(),l=D(),r=F(),d=m(),o=m({password:"",newpassword:"",checkpassword:""}),S=m({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(g,s,c)=>{s!==o.value.newpassword?c(new Error("两次密码不一致！")):c()}}]});function $(){d.value&&d.value.validate(g=>{if(g){const{password:s,newpassword:c}=o.value;I.updatePassword({oldPassword:s,password:c}).then(()=>{L({type:"success",message:"修改密码成功，请重新登录"}),r.logout().then(()=>{l.push({name:"login",query:{redirect:a.fullPath}})})})}})}return(g,s)=>{const c=oe,h=u("el-input"),v=u("el-form-item"),C=u("el-form"),H=u("el-col"),q=u("el-row"),B=G,P=u("el-button"),U=K;return w(),f("div",null,[e(c,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),e(B,null,{default:n(()=>[e(q,null,{default:n(()=>[e(H,{md:24,lg:12},{default:n(()=>[e(C,{ref_key:"formRef",ref:d,model:t(o),rules:t(S),"label-width":"120px"},{default:n(()=>[e(v,{label:"原密码",prop:"password"},{default:n(()=>[e(h,{modelValue:t(o).password,"onUpdate:modelValue":s[0]||(s[0]=p=>t(o).password=p),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(v,{label:"新密码",prop:"newpassword"},{default:n(()=>[e(h,{modelValue:t(o).newpassword,"onUpdate:modelValue":s[1]||(s[1]=p=>t(o).newpassword=p),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(v,{label:"确认新密码",prop:"checkpassword"},{default:n(()=>[e(h,{modelValue:t(o).checkpassword,"onUpdate:modelValue":s[2]||(s[2]=p=>t(o).checkpassword=p),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1}),e(U,null,{default:n(()=>[e(P,{type:"primary",size:"large",onClick:$},{default:n(()=>[E(" 提交 ")]),_:1})]),_:1})])}}});typeof V=="function"&&V(te);export{te as default};
