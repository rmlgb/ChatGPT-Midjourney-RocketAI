import{d as q,r as m,O as F,y as W,c as n,Q as $,o as s,e as d,h as a,i as t,J as y,K as w,L as _,g as U,l as b,w as G,f as h,t as D,F as j,E as K,G as Q,z as H,s as A}from"./index-a2cde0ca.js";import{A as M}from"./chat-ff09c793.js";import{R as X,a as Y}from"./index-f74fb548.js";const Z={class:"flex draw_container"},ee={class:"draw_head"},le={class:"draw_footer flex mt-3 justify-between items-center"},ae=q({__name:"midjourney",setup(te){const g=m(!1),x=m(),S=m(0),z=m([]),o=F({userId:"",rec:"",status:3,page:1,size:10}),C=m([]);async function c(){g.value=!0;try{const r=await M.queryMjDrawAll(o),{rows:l,count:p}=r.data;g.value=!1,S.value=p,l.forEach((f,i)=>{try{const u=f.fileInfo,v=u.startsWith('\\"')?JSON.parse(u):u,k=JSON.parse(v);l[i].fileInfo=k}catch(u){console.error("Error processing item:",u)}}),console.log(l),C.value=l}catch{g.value=!1}}async function N(r){const l=await M.recMjDrawImg({id:r});K.success(l.data),c()}async function T(r){const l=await Q.queryAllUser({size:30,username:r});z.value=l.data.rows}function O(r){r==null||r.resetFields(),c()}return W(()=>{c()}),(r,l)=>{const p=n("el-option"),f=n("el-select"),i=n("el-form-item"),u=n("el-button"),I=n("el-form"),v=H,k=n("el-image"),P=n("el-tag"),R=n("Plus"),V=n("el-icon"),E=n("Minus"),L=n("el-pagination"),B=n("el-row"),J=$("loading");return s(),d("div",null,[a(v,null,{default:t(()=>[a(I,{ref_key:"formRef",ref:x,inline:!0,model:o},{default:t(()=>[a(i,{label:"用户名称",prop:"userId"},{default:t(()=>[a(f,{modelValue:o.userId,"onUpdate:modelValue":l[0]||(l[0]=e=>o.userId=e),filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"用户姓名[模糊搜索]","remote-show-suffix":"","remote-method":T},{default:t(()=>[(s(!0),d(y,null,w(z.value,e=>(s(),_(p,{key:e.id,label:e.username,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"推荐状态",prop:"rec"},{default:t(()=>[a(f,{modelValue:o.rec,"onUpdate:modelValue":l[1]||(l[1]=e=>o.rec=e),placeholder:"请选择推荐状态",clearable:""},{default:t(()=>[(s(!0),d(y,null,w(U(X),e=>(s(),_(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"绘制状态",prop:"status"},{default:t(()=>[a(f,{modelValue:o.status,"onUpdate:modelValue":l[2]||(l[2]=e=>o.status=e),placeholder:"请选择图片绘制状态",clearable:""},{default:t(()=>[(s(!0),d(y,null,w(U(Y),e=>(s(),_(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,null,{default:t(()=>[a(u,{type:"primary",onClick:c},{default:t(()=>[b(" 查询 ")]),_:1}),a(u,{onClick:l[3]||(l[3]=e=>O(x.value))},{default:t(()=>[b(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),G((s(),_(v,{style:{width:"100%"}},{default:t(()=>[h("div",Z,[(s(!0),d(y,null,w(C.value,e=>(s(),d("div",{key:e.id,style:{height:"280px"},class:"draw_img_container flex border"},[h("div",ee,[a(k,{fit:"contain","preview-src-list":[e.fileInfo.cosUrl],src:e.fileInfo.cosUrl,lazy:"",class:"draw_img","hide-on-click-modal":""},null,8,["preview-src-list","src"])]),h("div",le,[a(P,{class:"ml-2",type:e.rec?"success":"info"},{default:t(()=>[b(D(e.rec?"已推荐":"未推荐"),1)]),_:2},1032,["type"]),a(u,{type:"warning",plain:"",size:"small",onClick:oe=>N(e.id)},{default:t(()=>[b(D(e.rec?"取消推荐":"加入推荐")+" ",1),e.rec?j("",!0):(s(),_(V,{key:0},{default:t(()=>[a(R)]),_:1})),e.rec?(s(),_(V,{key:1},{default:t(()=>[a(E)]),_:1})):j("",!0)]),_:2},1032,["onClick"])])]))),128))]),a(B,{class:"flex justify-end mt-5"},{default:t(()=>[a(L,{"current-page":o.page,"onUpdate:currentPage":l[4]||(l[4]=e=>o.page=e),"page-size":o.size,"onUpdate:pageSize":l[5]||(l[5]=e=>o.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:S.value,onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"])]),_:1})]),_:1})),[[J,g.value]])])}}});typeof A=="function"&&A(ae);export{ae as default};
