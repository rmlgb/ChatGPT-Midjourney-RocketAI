import{d as w,U as k,O as N,I as S,r as s,y as V,c as r,o as j,e as q,h as o,i as n,f as p,l as B,P as m,E as f,s as u}from"./index-a2cde0ca.js";/* empty css              */import{_ as E}from"./WishEditor.vue_vue_type_script_setup_true_lang-af37067f.js";const O={class:"flex justify-between"},U=p("b",null,"隐私协议设置",-1),I=w({__name:"privacyAgreement",setup(M){const _=k(),a=N({privacyAgreement:""});S(()=>_.settings.app.colorScheme);const d=s({privacyAgreement:[{required:!0,trigger:"blur",message:"请填写隐私协议具体信息"}]}),c=s();async function l(){const t=await m.queryNoticeConfig({keys:["privacyAgreement"]}),{privacyAgreement:e}=t.data;e&&Object.assign(a,{privacyAgreement:e})}function g(){var t;(t=c.value)==null||t.validate(async e=>{if(e){try{await m.setNoticeConfig({settings:y(a)}),f.success("变更配置信息成功")}catch{}l()}else f.error("请填写完整信息")})}s("/api/upload/file");function y(t){return Object.keys(t).map(e=>({configKey:e,configVal:t[e]}))}return V(()=>{l()}),(t,e)=>{const i=r("el-button"),v=r("el-form-item"),b=r("el-col"),h=r("el-row"),A=r("el-form"),x=r("el-card");return j(),q("div",null,[o(x,{style:{margin:"20px"}},{header:n(()=>[p("div",O,[U,o(i,{class:"button",text:"",onClick:g},{default:n(()=>[B(" 保存设置 ")]),_:1})])]),default:n(()=>[o(A,{ref_key:"formRef",ref:c,rules:d.value,model:a,"label-width":"120px"},{default:n(()=>[o(h,null,{default:n(()=>[o(b,{span:24},{default:n(()=>[o(v,{label:"隐私协议",prop:"privacyAgreement"},{default:n(()=>[o(E,{html:a.privacyAgreement,"onUpdate:html":e[0]||(e[0]=C=>a.privacyAgreement=C)},null,8,["html"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof u=="function"&&u(I);export{I as default};
