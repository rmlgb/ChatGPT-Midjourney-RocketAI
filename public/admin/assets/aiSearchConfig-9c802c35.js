import{d as T,H as j,r as p,I as M,c,o as g,e as h,J as S,K as A,L as B,i as r,l as U,t as K,g as v,h as t,F as N,w as R,v as $,M as E,k as O,m as q,N as W,q as D,O as F,y as L,f as _,P as I,E as C,s as P}from"./index-a2cde0ca.js";const z={class:"flex gap-[10px] items-center"},G={key:0},H=T({__name:"WishInputTags",props:{value:{type:String,default:""},valueModifiers:{}},emits:["update:value"],setup(V){const e=j(V,"value"),f=p(!1),l=p(""),d=p(),m=M(()=>e.value?e.value.split(","):void 0),y=()=>{var o;if(l.value){const s=m.value||[];e.value=s.length?[...s,l.value.replaceAll(",","")].join(","):[l.value.replaceAll(",","")].join(",")}else return;console.log("inputValue.value",l.value,e.value),l.value="",(o=d.value)==null||o.blur()},n=(o,s)=>{const i=m.value;i&&(i.splice(s,1),e.value=i.join(","))},a=()=>{var o;f.value=!0,(o=d.value)==null||o.focus()};return(o,s)=>{const i=c("el-tag"),x=c("Plus"),b=c("el-icon"),w=c("el-button");return g(),h("div",z,[(g(!0),h(S,null,A(v(m),(u,k)=>(g(),B(i,{key:k,type:"danger",effect:"dark",closable:"",onClose:se=>n(u,k)},{default:r(()=>[U(K(u),1)]),_:2},1032,["onClose"]))),128)),v(f)?N("",!0):(g(),h("div",G,[t(w,{size:"small",type:"primary",onClick:a},{default:r(()=>[t(b,null,{default:r(()=>[t(x)]),_:1})]),_:1})])),R(t(v(W),{ref_key:"tagInputRef",ref:d,modelValue:v(l),"onUpdate:modelValue":s[0]||(s[0]=u=>E(l)?l.value=u:null),onBlur:s[1]||(s[1]=u=>f.value=!1),onKeydown:O(q(y,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),[[$,v(f)]])])}}});const J=D(H,[["__scopeId","data-v-f895c0e1"]]),Q={class:"p-[20px]"},X={class:"flex justify-between"},Y=_("b",null,"搜索参数设置",-1),Z={class:"flex flex-col"},ee=_("span",{class:"text-gray-400"},"自定义搜索平台用于给GPT提供增强型Prompt.",-1),te={class:"flex flex-col"},le={class:""},ae=_("span",{class:"text-gray-400"},"用来给搜索页面提供快捷搜索使用;",-1),oe=T({__name:"aiSearchConfig",setup(V){const e=F({searchPlatformUrl:"",searchVals:""}),f=p({}),l=p();async function d(){const n=await I.queryConfig({keys:Object.keys(e)});Object.assign(e,n.data)}function m(){var n;(n=l.value)==null||n.validate(async a=>{if(a){try{await I.setConfig({settings:y(e)}),C.success("变更配置信息成功")}catch{}d()}else C.error("请填写完整信息")})}function y(n){return Object.keys(n).map(a=>({configKey:a,configVal:n[a]}))}return L(()=>{d()}),p(""),(n,a)=>{const o=c("el-button"),s=c("el-input"),i=c("el-form-item"),x=c("el-col"),b=c("el-form"),w=c("el-card");return g(),h("div",Q,[t(w,null,{header:r(()=>[_("div",X,[Y,t(o,{class:"button",text:"",onClick:m},{default:r(()=>[U(" 保存设置 ")]),_:1})])]),default:r(()=>[t(b,{ref_key:"formRef",ref:l,rules:f.value,model:e,"label-width":"150px","label-position":"top"},{default:r(()=>[t(x,{xs:24,md:20,lg:15,xl:12},{default:r(()=>[t(i,{label:"自定义API平台",prop:"searchPlatformUrl","label-width":"150"},{default:r(()=>[_("div",Z,[t(s,{modelValue:e.searchPlatformUrl,"onUpdate:modelValue":a[0]||(a[0]=u=>e.searchPlatformUrl=u),placeholder:"请输入自定义搜索平台API",clearable:""},null,8,["modelValue"]),ee])]),_:1}),t(i,{label:"搜索选项",prop:"searchPlatformUrl","label-width":"150"},{default:r(()=>[_("div",te,[_("div",le,[t(J,{value:e.searchVals,"onUpdate:value":a[1]||(a[1]=u=>e.searchVals=u)},null,8,["value"])]),ae])]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof P=="function"&&P(oe);export{oe as default};
