import{d as w,U as k,O as N,I as S,r as a,y as V,c as s,o as j,e as q,h as o,i as n,f as _,l as B,P as u,E as m,s as f}from"./index-a2cde0ca.js";/* empty css              */import{_ as E}from"./WishEditor.vue_vue_type_script_setup_true_lang-af37067f.js";const O={class:"flex justify-between"},U=_("b",null,"用户协议设置",-1),I=w({__name:"userAgreement",setup(M){const d=k(),r=N({userAgreement:""});S(()=>d.settings.app.colorScheme);const p=a({userAgreement:[{required:!0,trigger:"blur",message:"请填写用户协议具体信息"}]}),l=a();async function c(){const t=await u.queryNoticeConfig({keys:["userAgreement"]}),{userAgreement:e}=t.data;e&&Object.assign(r,{userAgreement:e})}function g(){var t;(t=l.value)==null||t.validate(async e=>{if(e){try{await u.setNoticeConfig({settings:y(r)}),m.success("变更配置信息成功")}catch{}c()}else m.error("请填写完整信息")})}a("/api/upload/file");function y(t){return Object.keys(t).map(e=>({configKey:e,configVal:t[e]}))}return V(()=>{c()}),(t,e)=>{const i=s("el-button"),b=s("el-form-item"),h=s("el-col"),A=s("el-row"),x=s("el-form"),C=s("el-card");return j(),q("div",null,[o(C,{style:{margin:"20px"}},{header:n(()=>[_("div",O,[U,o(i,{class:"button",text:"",onClick:g},{default:n(()=>[B(" 保存设置 ")]),_:1})])]),default:n(()=>[o(x,{ref_key:"formRef",ref:l,rules:p.value,model:r,"label-width":"120px"},{default:n(()=>[o(A,null,{default:n(()=>[o(h,{span:24},{default:n(()=>[o(b,{label:"用户协议",prop:"userAgreement"},{default:n(()=>[o(E,{html:r.userAgreement,"onUpdate:html":e[0]||(e[0]=v=>r.userAgreement=v)},null,8,["html"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof f=="function"&&f(I);export{I as default};
