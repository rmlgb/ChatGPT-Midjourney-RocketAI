import{b6 as e,bb as i,ba as t,d as l,cM as n,bd as s,de as r,r as o,v as a,df as c,a0 as p,aA as d,B as u}from"./index-62750275.js";const g=e("ellipsis",{overflow:"hidden"},[i("line-clamp","\n white-space: nowrap;\n display: inline-block;\n vertical-align: bottom;\n max-width: 100%;\n "),t("line-clamp","\n display: -webkit-inline-box;\n -webkit-box-orient: vertical;\n "),t("cursor-pointer","\n cursor: pointer;\n ")]);function v(e){return`${e}-ellipsis--line-clamp`}function f(e,i){return`${e}-ellipsis--cursor-${i}`}const m=Object.assign(Object.assign({},s.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),b=l({name:"Ellipsis",inheritAttrs:!1,props:m,setup(e,{slots:i,attrs:t}){const l=n(),d=s("Ellipsis","-ellipsis",g,r,e,l),m=o(null),b=o(null),h=o(null),w=o(!1),T=a((()=>{const{lineClamp:i}=e,{value:t}=w;return void 0!==i?{textOverflow:"","-webkit-line-clamp":t?"":i}:{textOverflow:t?"":"ellipsis","-webkit-line-clamp":""}}));function x(){let i=!1;const{value:t}=w;if(t)return!0;const{value:n}=m;if(n){const{lineClamp:t}=e;if(function(i){if(!i)return;const t=T.value,n=v(l.value);void 0!==e.lineClamp?C(i,n,"add"):C(i,n,"remove");for(const e in t)i.style[e]!==t[e]&&(i.style[e]=t[e])}(n),void 0!==t)i=n.scrollHeight<=n.offsetHeight;else{const{value:e}=b;e&&(i=e.getBoundingClientRect().width<=n.getBoundingClientRect().width)}!function(i,t){const n=f(l.value,"pointer");"click"!==e.expandTrigger||t?C(i,n,"remove"):C(i,n,"add")}(n,i)}return i}const k=a((()=>"click"===e.expandTrigger?()=>{var e;const{value:i}=w;i&&(null===(e=h.value)||void 0===e||e.setShow(!1)),w.value=!i}:void 0));c((()=>{var i;e.tooltip&&(null===(i=h.value)||void 0===i||i.setShow(!1))}));function C(e,i,t){"add"===t?e.classList.contains(i)||e.classList.add(i):e.classList.contains(i)&&e.classList.remove(i)}return{mergedTheme:d,triggerRef:m,triggerInnerRef:b,tooltipRef:h,handleClick:k,renderTrigger:()=>p("span",Object.assign({},u(t,{class:[`${l.value}-ellipsis`,void 0!==e.lineClamp?v(l.value):void 0,"click"===e.expandTrigger?f(l.value,"pointer"):void 0],style:T.value}),{ref:"triggerRef",onClick:k.value,onMouseenter:"click"===e.expandTrigger?x:void 0}),e.lineClamp?i:p("span",{ref:"triggerInnerRef"},i)),getTooltipDisabled:x}},render(){var e;const{tooltip:i,renderTrigger:t,$slots:l}=this;if(i){const{mergedTheme:n}=this;return p(d,Object.assign({ref:"tooltipRef",placement:"top"},i,{getDisabled:this.getTooltipDisabled,theme:n.peers.Tooltip,themeOverrides:n.peerOverrides.Tooltip}),{trigger:t,default:null!==(e=l.tooltip)&&void 0!==e?e:l.default})}return t()}});export{b as _,f as a,v as c,m as e,g as s};
