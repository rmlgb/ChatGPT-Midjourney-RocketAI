import{d as e,a as t,K as n,b as a,v as l,r,Q as o,bq as s,A as i,c as u,g as c,w as d,f,br as p,o as v,e as y,n as m,N as g,l as b,y as x,h as w,t as h,bs as k,F as C,j as _,m as F,bt as S,z as j,bu as E,Z as M,a0 as T,ab as A,bv as z,bw as P,L as R,u as L,J as D,O as I,bx as O,i as U,af as q,by as B,H as N,av as $,C as G,bz as H,b1 as K,b0 as W,G as J,bA as Q,p as Y,q as V,_ as X,an as Z,bB as ee,bC as te}from"./index-62750275.js";import{N as ne}from"./DataTable-869161d3.js";import{_ as ae,a as le}from"./DrawerContent-404be8e8.js";import{a as re,_ as oe}from"./Grid-f8a825d9.js";import{N as se}from"./InputGroup-4d6d12d1.js";import{W as ie}from"./WishUpload-c9e7446d.js";import{_ as ue}from"./WishLayoutSilder.vue_vue_type_script_setup_true_lang-983a17ef.js";import"./Dropdown-0073002d.js";import"./Ellipsis-e9b4b389.js";import"./Select-e3a2205c.js";import"./Upload-3cc5e7bf.js";const ce={1:"注册赠送",2:"受邀请赠送",3:"邀请他人赠送",4:"购买卡密充值",5:"管理员赠送",6:"扫码购买充值",7:"MJ绘画失败退款",8:"签到奖励"},de={class:"pb-[10px]"},fe=y("div",null,"我的钱包",-1),pe={class:"flex flex-col gap-[20px]"},ve={class:"flex w-full justify-between"},ye=y("span",{class:"text-[#04BE00]"},"兑换",-1),me={class:"flex items-center gap-1"},ge=y("span",null," 购买卡密 ",-1),be=y("span",null,"基础模型余额",-1),xe={class:"text-[#52D24C]"},we=y("span",null,"高级模型余额",-1),he={class:"text-[#FFB647]"},ke=y("span",null,"艺术余额",-1),Ce={class:"text-[#F23E3E]"},_e={class:"text-[18px]"},Fe={class:"font-bold"},Se={class:"text-[#7C7D80] text-[12px]"},je={class:"font-bold"},Ee={class:"text-[#7C7D80] text-[12px]"},Me={class:"font-bold"},Te=y("span",{class:"text-[#7C7D80] text-[12px]"},"基础模型使用",-1),Ae={class:"font-bold"},ze=y("span",{class:"text-[#7C7D80] text-[12px]"},"高级模型使用",-1),Pe={class:"font-bold"},Re={class:"text-[#7C7D80] text-[12px]"},Le=y("div",null,"充值记录",-1),De={class:"relative"},Ie=["src"],Oe={class:"flex justify-between items-end min-h-28"},Ue=y("span",{class:"text-sm font-bold mr-1"},"基础模型额度",-1),qe={class:"font-bold"},Be={class:"flex justify-between items-end min-h-28"},Ne=y("span",{class:"text-sm font-bold mr-1"},"高级模型额度",-1),$e={class:"font-bold"},Ge={class:"flex justify-between items-end min-h-28"},He=y("span",{class:"text-sm font-bold mr-1"},"艺术额度",-1),Ke={class:"font-bold"},We={class:"flex justify-between items-end mt-5"},Je={class:"text-xl text-[red] font-bold"},Qe=e({__name:"wallet",setup(e){const{isSmallMd:E,isMobile:M,isSmallLg:T}=t(),A=n(),z=a(),P=l((()=>A.globalConfig)),R=l((()=>{var e;return null==(e=P.value)?void 0:e.clientIntegralName})),L=l((()=>A.userBalance)),D=r(!1),I=r(""),O=r(!1),U=r([]),q=r(!1),B=o({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,20,50],onChange:e=>{B.page=e,G()},onUpdatePageSize:e=>{B.pageSize=e,B.page=1,G()}}),N=l((()=>[{title:"订单编号",key:"uid"},{title:"充值类型",key:"rechargeType",render:e=>ce[e.rechargeType]},{title:"基础模型额度",key:"model3Count"},{title:"高级模型额度",key:"model4Count"},{title:"艺术额度",key:"drawMjCount"},{title:"有效期",key:"expireDateCn"},{title:"充值时间",key:"createdAt",render:e=>e.createdAt}])),$=r([]);async function G(){const e=await s({page:B.page,size:B.pageSize}),{rows:t}=e.data;$.value=t}async function H(){if(!I.value)return z.warning("请先填写卡密！");try{D.value=!0,await S({code:I.value}),z.success("卡密兑换成功、祝您使用愉快！"),G(),A.getUserInfo(),D.value=!1}catch(e){D.value=!1}}function K(){O.value=!0}async function W(){const e=await p({status:1,size:30});U.value=e.data.rows}const J=l((()=>{var e;return null==(e=A.globalConfig)?void 0:e.buyCramiAddress}));function Q(){window.open(J.value)}return i((()=>{G()})),(e,t)=>{const n=se,a=j;return v(),u("div",de,[c(f(k),null,{header:d((()=>[fe])),default:d((()=>[y("div",pe,[y("div",ve,[y("div",{class:m(["flex",""+(f(M)?"!w-[100%]":"w-[40%]")])},[c(n,null,{default:d((()=>[c(f(g),{value:I.value,"onUpdate:value":t[0]||(t[0]=e=>I.value=e),placeholder:"请粘贴或填写您的卡密信息！",maxlength:"128","show-count":"",clearable:"",class:m(""+(f(M)?"!w-[100%]":"!min-w-[300px]"))},null,8,["value","class"]),c(f(b),{type:"primary",loading:D.value,onClick:H,class:"!bg-[#F6FFED]",secondary:""},{default:d((()=>[ye])),_:1},8,["loading"])])),_:1})],2),J.value?(v(),x(f(b),{key:0,type:"primary",onClick:K},{default:d((()=>[y("div",me,[c(a,{icon:"icon-park-solid:buy",class:"text-[18px]"}),ge])])),_:1})):w("",!0)]),y("div",{class:m(["flex w-full justify-between font-bold",""+(f(M)?"flex-col gap-2":"")])},[y("div",{class:m(["flex bg-[#F6FFED] dark:bg-[#353944] primaryRadius p-4 justify-between px-[25px]",""+(f(M)?"w-[100%]":"w-[30%]")])},[be,y("span",xe,h(L.value.sumModel3Count??0),1)],2),y("div",{class:m(["flex bg-[#FFFAEE] dark:bg-[#353944] primaryRadius p-4 justify-between px-[25px]",""+(f(M)?"w-[100%]":"w-[30%]")])},[we,y("span",he,h(L.value.sumModel4Count??0),1)],2),y("div",{class:m(["flex bg-[#FFF4F4] dark:bg-[#353944] primaryRadius p-4 justify-between px-[25px]",""+(f(M)?"w-[100%]":"w-[30%]")])},[ke,y("span",Ce,h(L.value.sumDrawMjCount??0),1)],2)],2),y("div",{class:m(["flex w-full primaryRadius flex-col gap-[15px]",""+(f(M)?"bg-[#fff] dark:bg-[#18181C]":"bg-[#F7F7FA] p-[20px] dark:bg-[#353944]")])},[y("span",_e,h(R.value)+"使用记录 ",1),y("div",{class:m(["flex text-[13px]",""+(f(M)?"flex-wrap gap-1":"justify-between")])},[y("div",{class:m(["flex gap-[5px] text-[18px] items-end",`${f(M)?"bg-[#F7F7FA] dark:bg-[#353944] flex-col items-center justify-center p-[5px] primaryRadius w-[49%]":""} ${f(T)?"flex-col":""}`])},[y("span",Fe,h(L.value.useModel3Count||"0")+h(R.value),1),y("span",Se,"基础模型"+h(R.value),1)],2),y("div",{class:m(["flex gap-[5px] text-[18px] items-end",`${f(M)?"bg-[#F7F7FA] dark:bg-[#353944] flex-col items-center justify-center p-[5px] primaryRadius w-[49%]":""}  ${f(T)?"flex-col":""}`])},[y("span",je,h(L.value.useModel4Count||"0")+h(R.value),1),y("span",Ee,"高级模型"+h(R.value),1)],2),y("div",{class:m(["flex gap-[5px] text-[18px] items-end",`${f(M)?"bg-[#F7F7FA] dark:bg-[#353944] flex-col items-center justify-center p-[5px] primaryRadius w-[49%]":""}  ${f(T)?"flex-col":""}`])},[y("span",Me,h(L.value.useModel3Token||"0")+" Token",1),Te],2),y("div",{class:m(["flex gap-[5px] text-[18px] items-end",`${f(M)?"bg-[#F7F7FA] dark:bg-[#353944] flex-col items-center justify-center p-[5px] primaryRadius w-[49%]":""}  ${f(T)?"flex-col":""}`])},[y("span",Ae,h(L.value.useModel4Token||"0")+" Token",1),ze],2),y("div",{class:m(["flex gap-[5px] text-[18px] items-end",`${f(M)?"bg-[#F7F7FA] dark:bg-[#353944] flex-col items-center justify-center p-[5px] primaryRadius w-[49%]":""}  ${f(T)?"flex-col":""}`])},[y("span",Pe,h(L.value.useDrawMjToken||"0")+h(R.value),1),y("span",Re,"艺术使用"+h(R.value),1)],2)],2)],2)])])),_:1}),c(f(k),{class:"mt-5 flex-1"},{header:d((()=>[Le])),default:d((()=>[c(f(ne),{columns:N.value,loading:q.value,"scroll-x":800,data:$.value,"max-height":"280",pagination:B},null,8,["columns","loading","data","pagination"])])),_:1}),c(f(le),{show:O.value,"onUpdate:show":t[1]||(t[1]=e=>O.value=e),width:f(E)?"100%":502,"on-after-enter":W},{default:d((()=>[c(f(ae),{title:"套餐购买",closable:""},{default:d((()=>[c(f(re),{"x-gap":15,"y-gap":15,cols:f(E)?1:2,class:"mt-3"},{default:d((()=>[(v(!0),u(C,null,_(U.value,((e,t)=>(v(),x(f(oe),{key:t},{default:d((()=>[c(f(k),{size:"small",embedded:""},{header:d((()=>[y("div",De,[y("b",null,h(e.name),1)])])),cover:d((()=>[y("img",{src:e.coverImg},null,8,Ie)])),default:d((()=>[y("div",null,[y("p",null,h(e.des),1),y("div",Oe,[Ue,y("span",qe,h(e.model3Count),1)]),y("div",Be,[Ne,y("span",$e,h(e.model4Count),1)]),y("div",Ge,[He,y("span",Ke,h(e.drawMjCount),1)]),y("div",We,[y("i",Je,h(`￥${e.price}`),1),c(f(b),{type:"primary",dashed:"",size:"small",onClick:Q},{default:d((()=>[F(" 购买套餐 ")])),_:1})])])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["cols"])])),_:1})])),_:1},8,["show","width"])])}}});var Ye={exports:{}};
/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */const Ve=M(Ye.exports=function(){return function(){var e={686:function(e,t,n){n.d(t,{default:function(){return k}});var a=n(279),l=n.n(a),r=n(370),o=n.n(r),s=n(817),i=n.n(s);function u(e){try{return document.execCommand(e)}catch(t){return!1}}var c=function(e){var t=i()(e);return u("cut"),t},d=function(e,t){var n=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";var a=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(a,"px"),n.setAttribute("readonly",""),n.value=e,n}(e);t.container.appendChild(n);var a=i()(n);return u("copy"),n.remove(),a},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof e?n=d(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?n=d(e.value,t):(n=i()(e),u("copy")),n};function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,n=void 0===t?"copy":t,a=e.container,l=e.target,r=e.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==l){if(!l||"object"!==p(l)||1!==l.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&l.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(l.hasAttribute("readonly")||l.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return r?f(r,{container:a}):l?"cut"===n?c(l):f(l,{container:a}):void 0};function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,l,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a=this,!(l=n)||"object"!==y(l)&&"function"!=typeof l?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a):l}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){var n="data-clipboard-".concat(e);if(t.hasAttribute(n))return t.getAttribute(n)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t,n,a,l=b(r);function r(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=l.call(this)).resolveOptions(t),n.listenClick(e),n}return t=r,n=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===y(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=o()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,n=this.action(t)||"copy",a=v({action:n,container:this.container,target:this.target(t),text:this.text(t)});this.emit(a?"success":"error",{action:n,text:a,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return w("action",e)}},{key:"defaultTarget",value:function(e){var t=w("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return w("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],a=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return f(e,t)}},{key:"cut",value:function(e){return c(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}],n&&m(t.prototype,n),a&&m(t,a),r}(l()),k=h},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,n){var a=n(828);function l(e,t,n,a,l){var o=r.apply(this,arguments);return e.addEventListener(n,o,l),{destroy:function(){e.removeEventListener(n,o,l)}}}function r(e,t,n,l){return function(n){n.delegateTarget=a(n.target,t),n.delegateTarget&&l.call(e,n)}}e.exports=function(e,t,n,a,r){return"function"==typeof e.addEventListener?l.apply(null,arguments):"function"==typeof n?l.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return l(e,t,n,a,r)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,n){var a=n(879),l=n(438);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!a.string(t))throw new TypeError("Second argument must be a String");if(!a.fn(n))throw new TypeError("Third argument must be a Function");if(a.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(a.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,n)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,n)}))}}}(e,t,n);if(a.string(e))return function(e,t,n){return l(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var a=window.getSelection(),l=document.createRange();l.selectNodeContents(e),a.removeAllRanges(),a.addRange(l),t=a.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,n){var a=this.e||(this.e={});return(a[e]||(a[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var a=this;function l(){a.off(e,l),t.apply(n,arguments)}return l._=t,this.on(e,l,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),a=0,l=n.length;a<l;a++)n[a].fn.apply(n[a].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),a=n[e],l=[];if(a&&t)for(var r=0,o=a.length;r<o;r++)a[r].fn!==t&&a[r].fn._!==t&&l.push(a[r]);return l.length?n[e]=l:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function n(a){if(t[a])return t[a].exports;var l=t[a]={exports:{}};return e[a](l,l.exports,n),l.exports}return n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n(686)}().default}()),Xe={class:"flex w-full h-full flex-col primaryRadius bg-[#fff] dark:bg-[#1C1E24] p-6 gap-4"},Ze=y("div",{class:"font-bold"},"邀请好友",-1),et={class:"flex tracking-[1px]"},tt=y("div",{class:"font-bold"},"邀请列表",-1),nt=e({__name:"invite",setup(e){const{toClipboard:s}=(e=>{const t=void 0===(null==e?void 0:e.appendToBody)||e.appendToBody;return{toClipboard:(e,n)=>new Promise(((a,l)=>{const r=document.createElement("button"),o=new Ve(r,{text:()=>e,action:()=>"copy",container:void 0!==n?n:document.body});o.on("success",(e=>{o.destroy(),a(e)})),o.on("error",(e=>{o.destroy(),l(e)})),t&&document.body.appendChild(r),r.click(),t&&document.body.removeChild(r)}))}})(),p=n(),x=l((()=>p.userInfo.inviteCode)),w=l((()=>p.globalConfig)),{isMobile:k}=t(),C=a(),_=r(!1),S=o({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,20,50],onChange:e=>{S.page=e,M()},onUpdatePageSize:e=>{S.pageSize=e,S.page=1,M()}}),j=l((()=>[{title:"头像",key:"avatar",render:e=>T(A,{src:e.avatar,size:"small",round:!0})},{title:"用户名称",key:"username"},{title:"用户邮箱",key:"email"},{title:"受邀人状态",key:"status",render:e=>T(b,{type:1===e.status?"primary":"error",size:"small",round:!0,quaternary:!0},{default:()=>1===e.status?"已认证":"未激活"})},{title:"邀请时间",key:"createdAt",render:e=>T("div",{style:{fontSize:"12px",color:"#999"}},(()=>e.createdAt))},{title:"获得奖励状态",key:"status",render:e=>T(b,{type:1===e.status?"success":"warning",size:"small",round:!0,quaternary:!0},{default:()=>1===e.status?"已领取邀请奖励":"等待受邀人确认"})}])),E=r([]);async function M(){try{_.value=!0;const e=await z({page:S.page,size:S.pageSize});E.value=e.data.rows,_.value=!1}catch(e){_.value=!1}}return i((()=>{M()})),(e,t)=>{const n=g,a=se;return v(),u("div",Xe,[Ze,y("div",{class:m(["flex",""+(f(k)?"!w-[100%]":"w-[40%]")])},[c(a,{class:"!w-full"},{default:d((()=>[c(f(b),null,{default:d((()=>[F(" 邀请码 ")])),_:1}),c(n,{placeholder:"推广链接",readonly:"",value:x.value,"onUpdate:value":t[0]||(t[0]=e=>x.value=e),class:m(""+(f(k)?"!w-[100%]":"!min-w-[300px]"))},null,8,["value","class"]),c(f(b),{type:"primary",onClick:t[1]||(t[1]=()=>{x.value?async function(){if(!x.value)return C.error("请先生成您的专属邀请链接！");const e=`${window.location.href}?inVitecode=${x.value}`;try{await s(e),C.success("复制专属邀请链接成功！")}catch(t){C.error("当前设置不支持自动复制、手动复制吧！")}}():async function(){const e=await P();if(!e.data)return C.error(e.message);C.success("生成邀请链接成功"),p.getUserInfo()}()})},{default:d((()=>[F(h(x.value?"复制专属邀请链接":"申请邀请码"),1)])),_:1})])),_:1})],2),y("div",et,[y("span",null,"邀请一位用户赠送"+h(w.value.inviteGiveSendModel3Count)+"积分基础模型额度+"+h(w.value.inviteGiveSendModel4Count)+"积分高级模型额度+"+h(w.value.inviteGiveSendDrawMjCount)+"MJ绘画积分额度",1),y("span",null,"收到邀请用户获得"+h(w.value.invitedGuestSendModel3Count)+"积分基础模型额度+"+h(w.value.invitedGuestSendModel4Count)+"积分高级模型额度+"+h(w.value.invitedGuestSendDrawMjCount)+"MJ绘画积分额度",1)]),tt,c(f(ne),{loading:_.value,remote:!0,"pagination-behavior-on-filter":"first",class:"min-h-[350px]",columns:j.value,data:E.value,pagination:S,"scroll-x":500},null,8,["loading","columns","data","pagination"])])}}}),at={class:"flex gap-2"},lt={class:"flex flex-col justify-between"},rt={class:"flex"},ot={class:"flex text-[12px] cursor-pointer px-2 gap-1"},st=y("span",{class:"font-bold"},"绑定微信: ",-1),it={class:"text-[#F45E5E]"},ut={class:"flex gap-4"},ct=y("span",{class:"text-[#43CF3E]"},"更换头像",-1),dt=y("span",{class:"text-[#F45E5E]"},"注销登录",-1),ft=e({__name:"userInfoCard",setup(e){const t=a();R();const o=L(),s=D(),i=n(),p=l((()=>i.userInfo.isBindWx)),g=r(i.userInfo.username??"未登录"),x=()=>{p.value||s.updateBindwxDialog(!0)},w=r(""),k=r(!1);function C(){i.logOut(),i.setLoginDialog(!0)}return I((()=>w.value),(e=>{console.log(e,"val"),async function(e){try{k.value=!0;const n=await B(e);if(k.value=!1,!n.success)return t.error(n.message);t.success("更新成功"),i.getUserInfo()}catch(n){k.value=!1}}({avatar:e})})),(e,t)=>{const n=q,a=b;return v(),u("div",at,[c(O,{round:!1,size:90}),y("div",lt,[y("span",null,"欢迎您: "+h(f(g)),1),y("div",rt,[c(n,{size:"small",bordered:!1,class:"!h-[30px]",onClick:x},{default:d((()=>[y("div",ot,[st,y("span",it,h(f(p)?"已绑定":"点击绑定")+"微信",1)])])),_:1})]),y("div",ut,[c(ie,{listType:"text",url:f(w),"onUpdate:url":t[0]||(t[0]=e=>U(w)?w.value=e:null),max:999},{default:d((()=>[c(a,{size:"small",secondary:"",class:m(["",""+(f(o)?"!dark:bg-[#353944]":"!bg-[#F6FFED]")])},{default:d((()=>[ct])),_:1},8,["class"])])),_:1},8,["url"]),c(a,{size:"small",secondary:"",onClick:C,class:m(["",""+(f(o)?"!dark:bg-[#353944]":"!bg-[#FFF4F4]")])},{default:d((()=>[dt])),_:1},8,["class"])])])])}}}),pt={class:"w-full h-full bg-[#fff] dark:bg-[#1C1E24] primaryRadius p-6 relative z-0"},vt={class:"flex flex-col gap-4"},yt=y("div",{class:"flex font-bold"},"账户概览",-1),mt=e({__name:"user",setup(e){const t=a(),l=n(),s=r(l.userInfo.username??"未登录"),i=r(l.userInfo.sign??"我是一台基于深度学习和自然语言处理技术的 AI 机器人，旨在为用户提供高效、精准、个性化的智能服务。");I([i,s],(()=>{h.username=s.value,h.sign=i.value}),{deep:!0});const p=r(!1);async function m(e){try{p.value=!0;const n=await B(e);if(p.value=!1,!n.success)return t.error(n.message);t.success("更新成功"),l.getUserInfo()}catch(n){p.value=!1}}const x=r("");I((()=>x.value),(e=>{console.log(e,"val"),m({avatar:e})}));const w=r(),h=o({username:s.value,sign:i.value}),k={username:[{required:!0,message:"请输入用户名",trigger:"blur"}]},C=async()=>{w.value&&await w.value.validate(),m({username:h.username,sign:h.sign})},_=r(),S=o({oldPassword:"",password:"",reenteredPassword:""});const j={oldPassword:[{required:!0,min:6,message:"密码最短长度为6位数",trigger:["blur"]},{required:!0,max:30,message:"密码最长长度为30位数",trigger:["blur"]}],password:[{required:!0,message:"请输入密码"}],reenteredPassword:[{required:!0,message:"请再次输入密码",trigger:["input","blur"]},{validator:function(e,t){return!!S.password&&S.password.startsWith(t)&&S.password.length>=t.length},message:"两次密码输入不一致",trigger:"input"},{validator:function(e,t){return t===S.password},message:"两次密码输入不一致",trigger:["blur","password-input"]}]},E=async()=>{_.value&&await _.value.validate();(await H({oldPassword:S.oldPassword,password:S.password})).success&&t.success("密码更新成功、请重新登录系统！"),l.updatePasswordSuccess()};return(e,t)=>{const n=g,a=K,l=b,r=W,o=J,s=N;return v(),u("div",pt,[y("div",vt,[yt,c(ft),c(s,{type:"line",animated:""},{default:d((()=>[c(o,{name:"a",tab:"基本信息"},{default:d((()=>[c(r,{ref:"formRef",model:f(h),rules:k},{default:d((()=>[c(a,{path:"username",label:"昵称"},{default:d((()=>[c(n,{value:f(h).username,"onUpdate:value":t[0]||(t[0]=e=>f(h).username=e),onKeydown:t[1]||(t[1]=$(G((()=>{}),["prevent"]),["enter"]))},null,8,["value"])])),_:1}),c(a,null,{default:d((()=>[c(l,{type:"primary",disabled:p.value,onClick:C},{default:d((()=>[F("保存")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["model"])])),_:1}),c(o,{name:"b",tab:"账户安全"},{default:d((()=>[c(r,{ref_key:"safeFormRef",ref:_,model:f(S),rules:j},{default:d((()=>[c(a,{path:"oldPassword",label:"原密码"},{default:d((()=>[c(n,{value:f(S).oldPassword,"onUpdate:value":t[2]||(t[2]=e=>f(S).oldPassword=e),onKeydown:t[3]||(t[3]=$(G((()=>{}),["prevent"]),["enter"]))},null,8,["value"])])),_:1}),c(a,{path:"password",label:"新密码"},{default:d((()=>[c(n,{value:f(S).password,"onUpdate:value":t[4]||(t[4]=e=>f(S).password=e),onKeydown:t[5]||(t[5]=$(G((()=>{}),["prevent"]),["enter"]))},null,8,["value"])])),_:1}),c(a,{path:"reenteredPassword",label:"确认密码"},{default:d((()=>[c(n,{value:f(S).reenteredPassword,"onUpdate:value":t[6]||(t[6]=e=>f(S).reenteredPassword=e),onKeydown:t[7]||(t[7]=$(G((()=>{}),["prevent"]),["enter"]))},null,8,["value"])])),_:1}),c(a,null,{default:d((()=>[c(l,{type:"primary",disabled:p.value,onClick:E},{default:d((()=>[F("保存")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])])}}}),gt={class:"flex flex-col font-bold gap-4 justify-center items-center text-[12px]"},bt=["onClick"],xt=e({__name:"userCenterMenu",props:{showBg:{type:Boolean},activeMenu:{},menuList:{}},emits:["changeMenu"],setup(e,{emit:t}){const n=t;return(e,t)=>{const a=j;return v(),u("div",gt,[(v(!0),u(C,null,_(e.menuList,(t=>(v(),u("div",{class:m(["flex primaryRadius gap-[5px] items-center cursor-pointer transition-all ease-linear duration-500 hover:bg-[--buttonTeritaryColor] dark:hover:bg-[--lightColor] px-[15px] py-[8px] w-[100%]",e.activeMenu===t.key?e.showBg?"bg-[--buttonTeritaryColor] dark:bg-[--lightColor] text-[--primaryColor] dark:text-[#fff]":"":e.showBg?"bg-white dark:bg-[transparent]":""]),onClick:e=>(e=>{n("changeMenu",e)})(t.key),key:t.key},[c(a,{icon:t.icon},null,8,["icon"]),y("span",null,h(t.title),1)],10,bt)))),128))])}}}),wt={class:"flex justify-between items-center pb-2"},ht={class:"font-bold text-[18px]"},kt=y("div",null," ",-1),Ct=e({__name:"userCenterNav",props:{title:{}},emits:["update:activeMenu"],setup(e,{emit:t}){const n=t,a=()=>{n("update:activeMenu")};return(e,t)=>{const n=j;return v(),u("div",wt,[y("div",{onClick:a,class:"cursor-pointer"},[c(n,{class:"text-[25px]",icon:"tabler:chevron-left"})]),y("div",ht,h(e.title),1),kt])}}}),_t={class:"h-full w-full justify-between flex"},Ft={class:"primaryRadius bg-[#fff] dark:bg-[#1C1E24] w-[calc(100%-0px)] h-full py-[15px]"},St=(e=>(Y("data-v-8753cf30"),e=e(),V(),e))((()=>y("span",{class:"font-bold p-[20px]"},"每日福利",-1))),jt=X(e({__name:"SignIng",setup(e){const t=n();return l((()=>t.globalConfig)),(e,t)=>(v(),u("div",_t,[y("div",Ft,[St,c(Q,{closable:!1})]),w("",!0)]))}}),[["__scopeId","data-v-8753cf30"]]),Et={class:"div p-[20px]"},Mt={class:"flex flex-col font-bold gap-4 justify-center items-center text-[12px]"},Tt=["onClick"],At={class:"flex w-full h-full bg-[#F7F7FA] dark:bg-[#353944] p-4"},zt={key:1,class:"w-full h-full flex justify-center items-center"},Pt={key:2,class:"flex w-full h-full"},Rt={key:0,class:"w-full h-full flex justify-center items-center"},Lt={key:1,class:"flex w-full p-4 bg-[#F7F7FA] dark:bg-[#353944]"},Dt={class:"flex bg-[#fff] dark:bg-[#1C1E24] primaryRadius p-4 w-full flex-col"},It={class:"flex flex-col py-3"},Ot={key:2,class:"w-full bg-[#F8F8FF] dark:bg-[#353944] overflow-y-auto"},Ut={class:"flex flex-col bg-[#fff] dark:bg-[#353944] w-full h-full p-4"},qt=e({__name:"index",setup(e){const o=n(),s=Z(),p=r(0),g=r(!0),k=l((()=>o.isLogin));a();const{isMobile:S}=t();i((()=>{k.value||o.setLoginDialog(!0),async function(){const e=await te();p.value=e.data||0}(),E.value=s.query.tab||"user",M.value=s.query.tab||"user"})),setTimeout((()=>{g.value=!1}),500);const E=r("user"),M=r();I((()=>M.value),(e=>{E.value=e??"user"}));const T=l((()=>{const e=z.find((e=>e.key===M.value));return null==e?void 0:e.title})),A=e=>{E.value=e,S&&(M.value=e)},z=[{key:"user",title:"账户配置",icon:"ion:people",component:mt},{key:"wallet",title:"我的钱包",icon:"material-symbols:wallet",component:Qe},{key:"signing",title:"每日福利",icon:"mingcute:calendar-line",component:jt},{key:"invite",title:"邀请好友",icon:"fluent:people-team-48-filled",component:nt}],P=l((()=>{const e=z.find((e=>e.key===E.value));return null==e?void 0:e.component}));return(e,t)=>{const n=j,a=b;return v(),u(C,null,[!f(S)&&k.value?(v(),x(ue,{key:0,width:230},{slider:d((()=>[y("div",Et,[y("div",Mt,[(v(),u(C,null,_(z,(e=>y("div",{class:m(["flex primaryRadius gap-[5px] items-center cursor-pointer transition-all ease-linear duration-500 hover:bg-[--buttonTeritaryColor] dark:hover:bg-[--darkPrimaryColor] px-[15px] py-[8px] w-[100%]",E.value===e.key?"bg-[--buttonTeritaryColor] dark:bg-[--darkPrimaryColor] text-[--primaryColor] dark:text-[#fff]":""]),onClick:t=>A(e.key),key:e.key},[c(n,{icon:e.icon},null,8,["icon"]),y("span",null,h(e.title),1)],10,Tt))),64))])])])),content:d((()=>[y("div",At,[(v(),x(ee(P.value)))])])),_:1})):w("",!0),k.value||f(S)?w("",!0):(v(),u("div",zt,[c(a,{onClick:t[0]||(t[0]=e=>f(o).setLoginDialog(!0)),type:"primary"},{default:d((()=>[F(" 去登录 ")])),_:1})])),f(S)?(v(),u("div",Pt,[f(S)&&!k.value?(v(),u("div",Rt,[c(a,{onClick:t[1]||(t[1]=e=>f(o).setLoginDialog(!0)),type:"primary"},{default:d((()=>[F(" 去登录 ")])),_:1})])):w("",!0),f(S)&&!M.value&&k.value?(v(),u("div",Lt,[y("div",Dt,[c(ft),y("div",It,[c(xt,{menuList:z,activeMenu:E.value,onChangeMenu:A},null,8,["activeMenu"])])])])):w("",!0),f(S)&&M.value&&k.value?(v(),u("div",Ot,[y("div",Ut,[c(Ct,{"active-menu":M.value,"onUpdate:activeMenu":t[2]||(t[2]=e=>M.value=e),title:T.value},null,8,["active-menu","title"]),(v(),x(ee(P.value)))])])):w("",!0)])):w("",!0)],64)}}});export{qt as default};
