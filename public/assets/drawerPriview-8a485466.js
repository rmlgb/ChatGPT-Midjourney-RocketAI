import{_ as e}from"./WishDrivider.vue_vue_type_script_setup_true_lang-40c45d59.js";import{r as l,aS as t,aT as s,K as a,v as o,d as i,ac as r,a as n,ad as c,y as u,w as p,o as d,g as f,e as v,n as x,f as m,aQ as h,m as y,h as w,aP as g,W as b,z as k,p as j,q as _,_ as C,b as P,L as M,au as A,c as B,t as I,F as O,j as S,l as U}from"./index-62750275.js";import{W as V}from"./WishIconButton-72cdadb0.js";import{a as D,_ as E}from"./DrawerContent-404be8e8.js";import{_ as R}from"./Popconfirm-b5167f80.js";import{c as T}from"./index-d02c8616.js";const W=l({"变换":{title:"变换",key:["Upscale","Vary"],btns:[]},"扩展":{title:"扩展",key:["Zoom Out 1.5x","Zoom Out 2x"],btns:[]},"平移":{title:"平移",key:["⬅️","➡️","⬆️","⬇️","Make Square"],btns:[]},"放大":{title:"放大",key:["U1","U2","U3","U4"],btns:[]},"微调":{title:"微调",key:["V1","V2","V3","V4"],btns:[]},"未知":{title:"未知",key:[],btns:[]},"重绘":{title:"重绘",key:["🔄"],btns:[]}}),$=Object.values(W.value).map((e=>e.title)),q=e=>{if(!e.messageInfo)return void console.log("item",e);let l=e.messageInfo;if("object"==typeof l)return l;try{l=JSON.parse(l)}catch(t){}if("object"!=typeof l)throw new Error("解析失败");return l},F=(e,l=!1)=>{const t=[],s=[];Object.keys(W.value).forEach((e=>{t.push(W.value[e])}));const i=t.map((e=>e.key)).flat();e.forEach((e=>{const l=e.label,t=e.emoji;i.includes(l)||i.includes(t)||s.push(e)})),t.map((l=>{const{key:t}=l;Array.isArray(t)?t.map((t=>{e.map((e=>{(e.label.includes(t)||e.emoji.includes(t))&&l.btns.push(e)}))})):e.map((e=>{(e.label.includes(t)||e.emoji.includes(t))&&l.btns.push(e)}))}));const r={...W.value};t.map((e=>{r[e.title]=e}));const n=[],c=(e=>{const l=a(),t=o((()=>l.globalConfig));return[{cate:"变换",icon:"mingcute:magic-2-line",price:e?t.value.fastVariantsMjPrice:t.value.relaxVariantsMjPrice},{cate:"扩展",icon:"mingcute:artboard-line",price:e?t.value.fastVariantsMjPrice:t.value.relaxVariantsMjPrice},{cate:"平移",icon:"mingcute:direction-arrow-line",price:e?t.value.fastArrowMjPrice:t.value.relaxArrowMjPrice},{cate:"放大",icon:"mingcute:fullscreen-line",price:e?t.value.fastZoomInMjPrice:t.value.relaxZoomInMjPrice},{cate:"微调",icon:"mingcute:magic-1-line",price:e?t.value.fastVariantsMjPrice:t.value.relaxVariantsMjPrice},{cate:"重绘",icon:"mingcute:repeat-line",price:e?t.value.fastReMjPrice:t.value.relaxReMjPrice}]})(l);return $.map((e=>{const l=r[e].btns,t=c.find((l=>l.cate==e));t&&l.length&&(t.btns=l,n.push(t))})),{unknowArr:s,menu:n}},Z={class:"flex justify-between px-2 h-[35px] items-center"},N=(e=>(j("data-v-42141530"),e=e(),_(),e))((()=>v("div",null,null,-1))),J={class:"flex space-x-[15px] items-center"},L={class:"flex items-center h-[calc(100%-35px)] justify-between"},z={class:"cursor-pointer"},K={class:"cursor-pointer"},Q=C(i({__name:"WishDrawCardLayout",props:r({item:{},downloadUrl:{},title:{},showDel:{type:Boolean}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:r(["delTask","nextAc","prevAc"],["update:show"]),setup(e,{emit:l}){const{isMobile:t}=n(),s=c(e,"show"),a=l;return(e,l)=>{const o=R,i=k,r=E,n=D;return d(),u(n,{show:s.value,"onUpdate:show":l[4]||(l[4]=e=>s.value=e),placement:"bottom",height:"100%",closable:""},{default:p((()=>[f(r,{title:e.title,closable:""},{default:p((()=>[v("div",{class:x(["flex justify-between w-full",[m(t)?"flex-col":"h-full"]])},[v("div",{class:x(["flex flex-col",[m(t)?"w-full h-[70vh]":"w-[calc(100%-380px)] h-full"]])},[v("div",Z,[N,v("div",J,[e.downloadUrl?(d(),u(V,{key:0,onClick:l[0]||(l[0]=l=>m(h)(e.downloadUrl)),icon:"mingcute:download-line",secondary:""},{default:p((()=>[y(" 下载 ")])),_:1})):w("",!0),e.showDel?(d(),u(o,{key:1,onPositiveClick:l[1]||(l[1]=l=>a("delTask",e.item))},{trigger:p((()=>[f(V,{icon:"mingcute:delete-2-line",secondary:""},{default:p((()=>[y(" 删除 ")])),_:1})])),default:p((()=>[y(" 确认删除吗? ")])),_:1})):w("",!0),g(e.$slots,"topRight",{},void 0,!0)])]),v("div",L,[v("div",z,[f(i,{onClick:l[2]||(l[2]=e=>a("prevAc")),class:x(["dark:text-[--darkPrimaryColor] hover:text-[--tertiaryColor] dark:hover:text-[--tertiaryColor] transition-all duration-200 ease-linear",[m(t)?"text-[30px]":"text-[50px]"]]),icon:"mingcute:arrow-left-circle-fill"},null,8,["class"])]),v("div",{class:x(["h-full primaryRadius flex flex-col overflow-hidden",[m(t)?"w-[80%]":"w-[50%]"]])},[g(e.$slots,"content",{},void 0,!0)],2),v("div",K,[f(i,{onClick:l[3]||(l[3]=e=>a("nextAc")),class:x(["dark:text-[--darkPrimaryColor] hover:text-[--tertiaryColor] dark:hover:text-[--tertiaryColor] transition-all duration-200 ease-linear",[m(t)?"text-[30px]":"text-[50px]"]]),icon:"mingcute:arrow-right-circle-fill"},null,8,["class"])])])],2),v("div",{class:x(["h-full bg-[#F5F6F8] dark:bg-[#1C1E24] primaryRadius relative",[m(t)?"w-full":"w-[350px]"]])},[f(b,null,{default:p((()=>[g(e.$slots,"rightSlider",{},void 0,!0)])),_:3})],2)],2)])),_:3},8,["title"])])),_:3},8,["show"])}}}),[["__scopeId","data-v-42141530"]]),G=e=>(j("data-v-f4a423b9"),e=e(),_(),e),H={class:"flex h-full"},X=["src"],Y={key:0,class:"flex flex-col space-y-[15px] p-[10px] w-full"},ee={key:0,class:"w-full overflow-hidden flex-col flex space-y-[25px] px-[10px] py-[10px]"},le={class:"flex flex-col"},te=G((()=>v("span",{class:"font-bold"},"图片信息",-1))),se={class:"flex flex-col space-y-[10px]"},ae=G((()=>v("span",{class:"text-[#757B86] font-bold"},"翻译描述",-1))),oe={key:0,class:"flex flex-col space-y-[10px]"},ie=G((()=>v("span",{class:"text-[#757B86] font-bold"},"创意描述",-1))),re={class:"flex flex-col"},ne={class:"w-full flex justify-between"},ce=G((()=>v("span",{class:"text-[#757B86] font-bold"},"创意参数",-1))),ue={class:"w-[150px] text-right"},pe={key:1,class:"flex flex-col"},de={class:"w-full flex justify-between"},fe=G((()=>v("span",{class:"text-[#757B86] font-bold"},"seed",-1))),ve={class:"flex flex-col pt-[20px]"},xe={key:1,class:"flex flex-col space-y-[10px]"},me=C(i({__name:"drawerPriview",props:r({list:{},showSeed:{type:Boolean},item:{},showDel:{type:Boolean},emitOptions:{type:Boolean}},{show:{type:Boolean},showModifiers:{}}),emits:r(["delTask","parseOptions","getImgSeed"],["update:show"]),setup(a,{emit:i}){const r=P(),n=M(),x=c(a,"show"),h=i,b=a,k=l(b.item);A((()=>{k.value=b.item}));const j=o((()=>k.value&&b.list.findIndex((e=>k.value&&e.id===k.value.id))||0)),_=o((()=>b.list.length)),C=o((()=>_.value&&k.value&&q(b.list[j.value])||void 0)),V=o((()=>_.value&&(e=>{if(!e.fileInfo)return void console.log("item",e);let l=e.fileInfo;if("object"==typeof l)return l;try{l=JSON.parse(l)}catch(t){}if("object"!=typeof l)throw new Error("解析失败");return l})(b.list[j.value]))),D=o((()=>V.value&&V.value.cosUrl||"")),E=o((()=>C.value&&(e=>{const{promptEn:l}=e;return l.includes("\n\n")?l.split("\n\n"):l})(C.value))),R=o((()=>(e=>{const l={desc:"",options:""};if(e){const{promptEn:a}=e,o=a.indexOf("--");-1!=o?(l.desc=t(s(a.slice(0,o))),l.options=t(s(a.slice(o)))):l.desc=a}return l})(C.value))),W=e=>{T({text:e}),r.success("已复制到剪贴板")},$=()=>{let e=j.value+1;e>=b.list.length&&(e=0),k.value=b.list[e]},F=()=>{let e=j.value-1;e<0&&(e=b.list.length-1),k.value=b.list[e]},Z=()=>{k.value&&h("delTask",k.value)},N=()=>{if(C.value)if(b.emitOptions){const{promptEn:e}=C.value;h("parseOptions",e),x.value=!1}else n.push({path:"/midjourney",query:{promptEn:C.value.promptEn}})};return(l,t)=>{const s=e,a=U;return d(),u(Q,{show:x.value,"onUpdate:show":t[1]||(t[1]=e=>x.value=e),item:m(k),"download-url":m(D),showDel:l.showDel,onNextAc:$,onPrevAc:F,onDelTask:Z},{topRight:p((()=>[g(l.$slots,"topRight",{},void 0,!0)])),content:p((()=>[v("div",H,[m(D)?(d(),B("img",{key:0,class:"object-contain",src:m(D),alt:""},null,8,X)):w("",!0)])])),rightSlider:p((()=>{var e,o,i;return[m(E)?(d(),B("div",Y,[Array.isArray(m(E))?(d(),B("span",xe,[(d(!0),B(O,null,S(m(E),((e,l)=>(d(),B("span",{class:"flex flex-col",key:l},[v("span",null,I(e),1),f(a,{onClick:l=>W(e),secondary:""},{default:p((()=>[y("复制描述")])),_:2},1032,["onClick"])])))),128))])):(d(),B("blockquote",ee,[v("div",le,[te,f(s)]),v("div",se,[ae,v("span",null,I(m(R).desc),1),f(s)]),(null==(e=m(k))?void 0:e.chinese_prompt)?(d(),B("div",oe,[ie,v("span",null,I(null==(o=m(k))?void 0:o.chinese_prompt),1),f(s)])):w("",!0),v("div",re,[v("div",ne,[ce,v("span",ue,I(m(R).options),1)]),f(s)]),g(l.$slots,"rightSlider",{},void 0,!0),l.showSeed?(d(),B("div",pe,[v("div",de,[fe,v("span",{class:"text-right text-[--primaryColor] cursor-pointer",onClick:t[0]||(t[0]=e=>(()=>{if(!k.value)return;const{seed_id:e,message_id:l}=k.value;e?W(e):h("getImgSeed",l)})())},I((null==(i=m(k))?void 0:i.seed_id)||"获取种子"),1)])])):w("",!0),v("div",ve,[f(a,{type:"primary",onClick:N},{default:p((()=>[y("复用参数")])),_:1})])]))])):w("",!0)]})),_:3},8,["show","item","download-url","showDel"])}}}),[["__scopeId","data-v-f4a423b9"]]);export{F as a,me as d,q as g};
