import{d as e,a,b as l,L as s,r as t,K as r,v as i,O as o,A as n,P as u,Q as c,c as d,g as p,f as v,e as m,F as f,j as x,h as g,R as h,o as y,p as w,q as b,S as k,_ as C,T as _,D as I,E as j,w as A,y as E,W as L,U as F,N as P,z as S,l as N,V as O,X as z,n as B,t as U,m as J}from"./index-62750275.js";import{d as R}from"./drawerPriview-8a485466.js";import"./WishDrivider.vue_vue_type_script_setup_true_lang-40c45d59.js";import"./WishIconButton-72cdadb0.js";import"./DrawerContent-404be8e8.js";import"./Popconfirm-b5167f80.js";import"./index-d02c8616.js";const $=e=>(w("data-v-9726044a"),e=e(),b(),e),W={key:0,style:{"overflow-x":"hidden",height:"auto"}},D={class:"playground-main"},T={class:"fatherboximg"},M={class:"playground-cover"},V=$((()=>m("div",{class:"h-[10px]"},null,-1))),H=$((()=>m("div",{id:"footer"},null,-1))),q=C(e({__name:"WaterflowImage",props:{num:{},imgInfoArr:{},isDrawLike:{type:Boolean},usePropmpt:{type:Boolean},copyPropmpt:{type:Boolean}},emits:["touchEnd"],setup(e,{emit:w}){a();const b=e,C=w;l(),s();const _=t(4),I=t([]),j=r();i((()=>j.isLogin)),o((()=>b.num),(e=>{e&&e>=1&&e<=10&&(_.value=e,I.value=P(b.imgInfoArr,_.value))})),o((()=>b.imgInfoArr),(e=>{I.value=P(e,_.value)}));const A=e=>{const a=e.messageInfo;if("object"==typeof e.messageInfo)return a;try{return JSON.parse(e.messageInfo)}catch(l){console.error("getSeed error",l)}return a},E=e=>{let{fileInfo:a}=e;if(a&&"string"==typeof a)try{a=JSON.parse(a)}catch(l){}if(a&&"object"==typeof a){const{cosUrl:l,width:s,height:t}=a,r=s/2>240?s/2:s,i=s/2>240?s/2:t;return s<820?l||A(e).imageUrl:l?`${l}?imageView2/2/w/${r}/h/${i}`:`${A(e).imageUrl}?imageView2/2/w/${r}/h/${i}`}return""},L=h((()=>{C("touchEnd")}),.5);n((()=>{F(),window.addEventListener("resize",F);const e=document.getElementById("footer"),a=new IntersectionObserver((e=>{e[0].isIntersecting&&(console.log("footer 可见"),L())}));e&&a.observe(e)})),u((()=>{window.removeEventListener("resize",F)}));const F=()=>{const e=[{max:1/0,min:1650,columns:6},{max:1650,min:1400,columns:5},{max:1400,min:1100,columns:4},{max:1100,min:767,columns:3},{max:767,min:0,columns:2}],a=document.documentElement.clientWidth,l=e.find((({max:e,min:l})=>a<e&&a>=l));l&&_.value!==l.columns&&(_.value=l.columns,I.value=P(b.imgInfoArr,_.value))},P=(e,a=5)=>{const l=[];for(let s=0;s<a;s++)l[s]=[];return e.forEach(((e,s)=>{s<a?l[s].push(e):l[(s-a)%a].push(e)})),l},S=c({show:!1,info:void 0});return(e,a)=>{const l=k;return I.value?(y(),d("div",W,[p(R,{show:v(S).show,"onUpdate:show":a[0]||(a[0]=e=>v(S).show=e),item:v(S).info,list:e.imgInfoArr},null,8,["show","item","list"]),m("div",D,[m("div",T,[(y(!0),d(f,null,x(I.value,((e,a)=>(y(),d("div",{id:"wapper",key:a,class:"wapper",style:{flex:"1 1"}},[(y(!0),d(f,null,x(e,((e,a)=>(y(),d("div",{key:a,class:"playground-block wapper-item"},[m("div",M,[p(l,{onClick:a=>{return l=e,S.info=l,void(S.show=!0);var l},"preview-disabled":!0,width:"100%",src:E(e),style:{"border-radius":"8px"},class:"playground-cover__image",loading:"lazy"},null,8,["onClick","src"])]),g("",!0)])))),128))])))),128))])]),V,H])):g("",!0)}}}),[["__scopeId","data-v-9726044a"]]);class K{static cateList(){return _({url:"/galleryCategories"})}}const Q={class:"gallery"},X={class:"relative w-[1200px] mx-[auto] mt-[20px] overflow-hidden galleryBanner"},G=["innerHTML"],Y={class:"my-[30px] mx-[auto] flex justify-center items-center"},Z=["onClick"],ee={class:"w-[1200px] mx-[auto] painting"},ae={class:"search flex items-center mx-[auto] mt-[32px] dark:bg-[#ffffff1a] px-[10px] primaryRadius",style:{"line-height":"54px",height:"54px","box-shadow":"0 0 10px 0 rgba(0, 0, 0, 0.1)"}},le={class:"flex justify-start items-center p-8 pb-2 px-2 w-[1800px]",style:{"max-width":"2000px"}},se=["onClick"],te={class:"flex relative"},re={class:"flex justify-start items-center p-8 pb-2 px-2 w-[2000px]",style:{"max-width":"2000px"}},ie=["onClick"],oe={class:"flex pt-[10px] px-[20px] justify-between"},ne={class:"flex items-center gap-4 py-2"},ue={class:"flex items-center gap-[10px] text-[20px]"},ce=(e=>(w("data-v-4134bd16"),e=e(),b(),e))((()=>m("div",{class:"flex justify-center items-center w-[13px] h-[13px] rounded-[50%] bg-[--primaryColor]"},[m("div",{class:"w-[7px] h-[7px] bg-[white] rounded-[50%]"})],-1))),de={class:"flex pt-[20px]"},pe={key:0},ve=C(e({__name:"index",setup(e){const{isMobile:l,isSmallLg:s}=a(),u=r(),c=i((()=>u.globalConfig)),h=t("painting"),w=t(""),b=t([]),k=i((()=>w.value?b.value.filter((e=>{const{promptEn:a}=e,l=a.includes(w.value);return l&&0==M.value?e:l&&0!=M.value?l&&e.category_id==M.value:void 0})):0==M.value?b.value:b.value.filter((e=>e.category_id==M.value)))),C=t(!1),_=t(1),R=t(20),$=t(!0),W=t([{label:"绘画广场",val:"painting"}]);async function D(){C.value=!0;const e=await F({page:_.value,size:R.value,rec:1});C.value=!1,$.value=R.value===e.data.rows.length,b.value=[...b.value],e.data.rows.forEach((e=>{const{extend:a,fileInfo:l}=e;try{b.value.push({...e,...JSON.parse(a),...JSON.parse(l),fileInfo:JSON.parse(l),extend:JSON.parse(a)})}catch(s){}})),console.log("imageList",b.value)}const T=t([]),M=t(0);function V(){_.value=_.value+1,D()}n((async()=>{await D();const e=await K.cateList();T.value=[{id:0,name:"全部分类",createdAt:"",updatedAt:"",deletedAt:null,sort:0,status:0},...e.data]}));const H=t(6),ve=t(9);return o((()=>l.value),(e=>{e?(ve.value=2,H.value=H.value>2?2:H.value):(ve.value=9,H.value=H.value<2?9:H.value)})),(e,a)=>{const s=P,t=S,r=N,i=O,o=z("music");return y(),d("div",Q,[m("div",X,[m("div",{innerHTML:v(c).galleryNoticeInfo},null,8,G)]),m("div",Y,[(y(!0),d(f,null,x(W.value,((e,a)=>(y(),d("div",{key:a,class:B([[h.value==e.val?"dark:text-[#fff] dark:bg-[--darkPrimaryColor] text-[#fff] bg-[--primaryColor]":"dark:text-[#fff] dark:bg-[#1C1E24] bg-[#F7F7FA]"],"text-[#1C1E24] text-[18px] rounded-[--borderRadius] hover:bg-[--primaryColor] dark:hover:bg-[--darkPrimaryColor] hover:text-[#fff] h-[45px] w-[119px] text-center mr-[20px] sort cursor-pointer select-none transition-all ease-linear duration-300"]),style:{"line-height":"47px","font-weight":"500"},onClick:a=>h.value=e.val},U(e.label),11,Z)))),128))]),I(m("div",ee,[m("div",ae,[p(s,{value:w.value,"onUpdate:value":a[0]||(a[0]=e=>w.value=e),size:"small",round:"",placeholder:"请输入关键词"},null,8,["value"]),p(r,{class:"primaryRadius",type:"primary"},{default:A((()=>[p(t,{icon:"ion:search-outline",class:"text-[18px] mr-[5px]"}),J(" 搜索 ")])),_:1})]),v(l)?(y(),E(L,{key:0,"x-scroll":"","hide-bg":""},{default:A((()=>[m("div",le,[(y(!0),d(f,null,x(T.value,((e,a)=>(y(),d("div",{key:a,class:B([[M.value===e.id?"active":""],"primaryRadius h-[38px] px-[18px] mr-[15px] cursor-pointer dark:bg-[#353944] hover:bg-[--primaryColor] hover:text-[#fff] bg-[#F7F7FA]"]),style:{"line-height":"38px"},onClick:a=>M.value=e.id},U(e.name),11,se)))),128))])])),_:1})):g("",!0),m("div",te,[v(l)?g("",!0):(y(),E(L,{key:0,"x-scroll":"","hide-bg":""},{default:A((()=>[m("div",re,[(y(!0),d(f,null,x(T.value,((e,a)=>(y(),d("div",{key:a,class:B([[M.value===e.id?"bg-[--primaryColor]  dark:bg-[--darkPrimaryColor] text-[#fff]":""],"primaryRadius h-[38px] px-[18px] mr-[15px] cursor-pointer hover:bg-[--primaryColor] dark:hover:bg-[--darkPrimaryColor] dark:bg-[#353944] hover:text-[#fff] bg-[#F7F7FA] transition-all duration-300 ease-linear"]),style:{"line-height":"38px"},onClick:a=>M.value=e.id},U(e.name),11,ie)))),128))])])),_:1})),m("div",oe,[m("div",ne,[p(t,{icon:"tabler:layout-filled"}),m("div",ue,[p(t,{class:"cursor-pointer",icon:"iconamoon:sign-minus-bold",onClick:a[1]||(a[1]=e=>--H.value)}),p(i,{value:H.value,"onUpdate:value":a[2]||(a[2]=e=>H.value=e),class:"!w-[100px]",min:1,max:ve.value},{thumb:A((()=>[ce])),_:1},8,["value","max"]),p(t,{class:"cursor-pointer",icon:"iconamoon:sign-plus-bold",onClick:a[3]||(a[3]=e=>++H.value)})])])])]),m("div",de,[p(q,{num:H.value,"img-info-arr":v(k),"copy-propmpt":"","is-draw-like":"",onTouchEnd:V},null,8,["num","img-info-arr"])])],512),[[j,"painting"===h.value]]),"music"==h.value?(y(),d("div",pe,[p(o)])):g("",!0)])}}}),[["__scopeId","data-v-4134bd16"]]);export{ve as default};
