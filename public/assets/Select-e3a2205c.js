import{d as e,r as n,dF as t,dG as o,A as l,a2 as r,a0 as a,aP as i,dH as s,b9 as d,b6 as u,b7 as c,bb as h,ba as v,bd as p,bc as b,c5 as f,bg as g,dI as m,v as w,d7 as x,O as y,au as C,dJ as F,bi as O,dk as T,bl as S,dK as P,dL as A,af as B,aN as M,F as $,dM as R,cZ as z,dN as I,bh as k,cY as D,dO as E,cG as _,dP as W,dQ as j,dR as L,bf as U,cf as K,cL as V,d4 as N,d5 as H,d6 as G,aM as Y,D as q,E as J,c6 as Q,dS as Z,dT as X,cT as ee,dU as ne,dV as te,bp as oe}from"./index-62750275.js";const le="v-hidden",re=s("[v-hidden]",{display:"none!important"}),ae=e({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(e,{slots:r}){const a=n(null),i=n(null);function s(n){const{value:t}=a,{getCounter:o,getTail:l}=e;let s;if(s=void 0!==o?o():i.value,!t||!s)return;s.hasAttribute(le)&&s.removeAttribute(le);const{children:d}=t;if(n.showAllItemsBeforeCalculate)for(const e of d)e.hasAttribute(le)&&e.removeAttribute(le);const u=t.offsetWidth,c=[],h=r.tail?null==l?void 0:l():null;let v=h?h.offsetWidth:0,p=!1;const b=t.children.length-(r.tail?1:0);for(let r=0;r<b-1;++r){if(r<0)continue;const n=d[r];if(p){n.hasAttribute(le)||n.setAttribute(le,"");continue}n.hasAttribute(le)&&n.removeAttribute(le);const t=n.offsetWidth;if(v+=t,c[r]=t,v>u){const{updateCounter:n}=e;for(let t=r;t>=0;--t){const o=b-1-t;void 0!==n?n(o):s.textContent=`${o}`;const l=s.offsetWidth;if(v-=c[t],v+l<=u||0===t){p=!0,r=t-1,h&&(-1===r?(h.style.maxWidth=u-l+"px",h.style.boxSizing="border-box"):h.style.maxWidth="");const{onUpdateCount:n}=e;n&&n(o);break}}}}const{onUpdateOverflow:f}=e;p?void 0!==f&&f(!0):(void 0!==f&&f(!1),s.setAttribute(le,""))}const d=t();return re.mount({id:"vueuc/overflow",head:!0,anchorMetaName:o,ssr:d}),l((()=>s({showAllItemsBeforeCalculate:!1}))),{selfRef:a,counterRef:i,sync:s}},render(){const{$slots:e}=this;return r((()=>this.sync({showAllItemsBeforeCalculate:!1}))),a("div",{class:"v-overflow",ref:"selfRef"},[i(e,"default"),e.counter?e.counter():a("span",{style:{display:"inline-block"},ref:"counterRef"}),e.tail?e.tail():null])}}),ie=d([u("base-selection","\n --n-padding-single: var(--n-padding-single-top) var(--n-padding-single-right) var(--n-padding-single-bottom) var(--n-padding-single-left);\n --n-padding-multiple: var(--n-padding-multiple-top) var(--n-padding-multiple-right) var(--n-padding-multiple-bottom) var(--n-padding-multiple-left);\n position: relative;\n z-index: auto;\n box-shadow: none;\n width: 100%;\n max-width: 100%;\n display: inline-block;\n vertical-align: bottom;\n border-radius: var(--n-border-radius);\n min-height: var(--n-height);\n line-height: 1.5;\n font-size: var(--n-font-size);\n ",[u("base-loading","\n color: var(--n-loading-color);\n "),u("base-selection-tags","min-height: var(--n-height);"),c("border, state-border","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border: var(--n-border);\n border-radius: inherit;\n transition:\n box-shadow .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n "),c("state-border","\n z-index: 1;\n border-color: #0000;\n "),u("base-suffix","\n cursor: pointer;\n position: absolute;\n top: 50%;\n transform: translateY(-50%);\n right: 10px;\n ",[c("arrow","\n font-size: var(--n-arrow-size);\n color: var(--n-arrow-color);\n transition: color .3s var(--n-bezier);\n ")]),u("base-selection-overlay","\n display: flex;\n align-items: center;\n white-space: nowrap;\n pointer-events: none;\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n padding: var(--n-padding-single);\n transition: color .3s var(--n-bezier);\n ",[c("wrapper","\n flex-basis: 0;\n flex-grow: 1;\n overflow: hidden;\n text-overflow: ellipsis;\n ")]),u("base-selection-placeholder","\n color: var(--n-placeholder-color);\n ",[c("inner","\n max-width: 100%;\n overflow: hidden;\n ")]),u("base-selection-tags","\n cursor: pointer;\n outline: none;\n box-sizing: border-box;\n position: relative;\n z-index: auto;\n display: flex;\n padding: var(--n-padding-multiple);\n flex-wrap: wrap;\n align-items: center;\n width: 100%;\n vertical-align: bottom;\n background-color: var(--n-color);\n border-radius: inherit;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n "),u("base-selection-label","\n height: var(--n-height);\n display: inline-flex;\n width: 100%;\n vertical-align: bottom;\n cursor: pointer;\n outline: none;\n z-index: auto;\n box-sizing: border-box;\n position: relative;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n border-radius: inherit;\n background-color: var(--n-color);\n align-items: center;\n ",[u("base-selection-input","\n font-size: inherit;\n line-height: inherit;\n outline: none;\n cursor: pointer;\n box-sizing: border-box;\n border:none;\n width: 100%;\n padding: var(--n-padding-single);\n background-color: #0000;\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n caret-color: var(--n-caret-color);\n ",[c("content","\n text-overflow: ellipsis;\n overflow: hidden;\n white-space: nowrap; \n ")]),c("render-label","\n color: var(--n-text-color);\n ")]),h("disabled",[d("&:hover",[c("state-border","\n box-shadow: var(--n-box-shadow-hover);\n border: var(--n-border-hover);\n ")]),v("focus",[c("state-border","\n box-shadow: var(--n-box-shadow-focus);\n border: var(--n-border-focus);\n ")]),v("active",[c("state-border","\n box-shadow: var(--n-box-shadow-active);\n border: var(--n-border-active);\n "),u("base-selection-label","background-color: var(--n-color-active);"),u("base-selection-tags","background-color: var(--n-color-active);")])]),v("disabled","cursor: not-allowed;",[c("arrow","\n color: var(--n-arrow-color-disabled);\n "),u("base-selection-label","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n ",[u("base-selection-input","\n cursor: not-allowed;\n color: var(--n-text-color-disabled);\n "),c("render-label","\n color: var(--n-text-color-disabled);\n ")]),u("base-selection-tags","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n "),u("base-selection-placeholder","\n cursor: not-allowed;\n color: var(--n-placeholder-color-disabled);\n ")]),u("base-selection-input-tag","\n height: calc(var(--n-height) - 6px);\n line-height: calc(var(--n-height) - 6px);\n outline: none;\n display: none;\n position: relative;\n margin-bottom: 3px;\n max-width: 100%;\n vertical-align: bottom;\n ",[c("input","\n font-size: inherit;\n font-family: inherit;\n min-width: 1px;\n padding: 0;\n background-color: #0000;\n outline: none;\n border: none;\n max-width: 100%;\n overflow: hidden;\n width: 1em;\n line-height: inherit;\n cursor: pointer;\n color: var(--n-text-color);\n caret-color: var(--n-caret-color);\n "),c("mirror","\n position: absolute;\n left: 0;\n top: 0;\n white-space: pre;\n visibility: hidden;\n user-select: none;\n -webkit-user-select: none;\n opacity: 0;\n ")]),["warning","error"].map((e=>v(`${e}-status`,[c("state-border",`border: var(--n-border-${e});`),h("disabled",[d("&:hover",[c("state-border",`\n box-shadow: var(--n-box-shadow-hover-${e});\n border: var(--n-border-hover-${e});\n `)]),v("active",[c("state-border",`\n box-shadow: var(--n-box-shadow-active-${e});\n border: var(--n-border-active-${e});\n `),u("base-selection-label",`background-color: var(--n-color-active-${e});`),u("base-selection-tags",`background-color: var(--n-color-active-${e});`)]),v("focus",[c("state-border",`\n box-shadow: var(--n-box-shadow-focus-${e});\n border: var(--n-border-focus-${e});\n `)])])])))]),u("base-selection-popover","\n margin-bottom: -3px;\n display: flex;\n flex-wrap: wrap;\n margin-right: -8px;\n "),u("base-selection-tag-wrapper","\n max-width: 100%;\n display: inline-flex;\n padding: 0 7px 3px 0;\n ",[d("&:last-child","padding-right: 0;"),u("tag","\n font-size: 14px;\n max-width: 100%;\n ",[c("content","\n line-height: 1.25;\n text-overflow: ellipsis;\n overflow: hidden;\n ")])])]),se=e({name:"InternalSelection",props:Object.assign(Object.assign({},p.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:o}=b(e),a=f("InternalSelection",o,t),i=n(null),s=n(null),d=n(null),u=n(null),c=n(null),h=n(null),v=n(null),P=n(null),A=n(null),B=n(null),M=n(!1),$=n(!1),R=n(!1),z=p("InternalSelection","-internal-selection",ie,m,e,g(e,"clsPrefix")),I=w((()=>e.clearable&&!e.disabled&&(R.value||e.active))),k=w((()=>e.selectedOption?e.renderTag?e.renderTag({option:e.selectedOption,handleClose:()=>{}}):e.renderLabel?e.renderLabel(e.selectedOption,!0):x(e.selectedOption[e.labelField],e.selectedOption,!0):e.placeholder)),D=w((()=>{const n=e.selectedOption;if(n)return n[e.labelField]})),E=w((()=>e.multiple?!(!Array.isArray(e.selectedOptions)||!e.selectedOptions.length):null!==e.selectedOption));function _(){var n;const{value:t}=i;if(t){const{value:o}=s;o&&(o.style.width=`${t.offsetWidth}px`,"responsive"!==e.maxTagCount&&(null===(n=A.value)||void 0===n||n.sync({showAllItemsBeforeCalculate:!1})))}}function W(n){const{onPatternInput:t}=e;t&&t(n)}function j(n){!function(n){const{onDeleteOption:t}=e;t&&t(n)}(n)}y(g(e,"active"),(e=>{e||function(){const{value:e}=B;e&&(e.style.display="none")}()})),y(g(e,"pattern"),(()=>{e.multiple&&r(_)}));const L=n(!1);let U=null;let K=null;function V(){null!==K&&window.clearTimeout(K)}y(E,(e=>{e||(M.value=!1)})),l((()=>{C((()=>{const n=h.value;n&&(e.disabled?n.removeAttribute("tabindex"):n.tabIndex=$.value?-1:0)}))})),F(d,e.onResize);const{inlineThemeDisabled:N}=e,H=w((()=>{const{size:n}=e,{common:{cubicBezierEaseInOut:t},self:{borderRadius:o,color:l,placeholderColor:r,textColor:a,paddingSingle:i,paddingMultiple:s,caretColor:d,colorDisabled:u,textColorDisabled:c,placeholderColorDisabled:h,colorActive:v,boxShadowFocus:p,boxShadowActive:b,boxShadowHover:f,border:g,borderFocus:m,borderHover:w,borderActive:x,arrowColor:y,arrowColorDisabled:C,loadingColor:F,colorActiveWarning:S,boxShadowFocusWarning:P,boxShadowActiveWarning:A,boxShadowHoverWarning:B,borderWarning:M,borderFocusWarning:$,borderHoverWarning:R,borderActiveWarning:I,colorActiveError:k,boxShadowFocusError:D,boxShadowActiveError:E,boxShadowHoverError:_,borderError:W,borderFocusError:j,borderHoverError:L,borderActiveError:U,clearColor:K,clearColorHover:V,clearColorPressed:N,clearSize:H,arrowSize:G,[O("height",n)]:Y,[O("fontSize",n)]:q}}=z.value,J=T(i),Q=T(s);return{"--n-bezier":t,"--n-border":g,"--n-border-active":x,"--n-border-focus":m,"--n-border-hover":w,"--n-border-radius":o,"--n-box-shadow-active":b,"--n-box-shadow-focus":p,"--n-box-shadow-hover":f,"--n-caret-color":d,"--n-color":l,"--n-color-active":v,"--n-color-disabled":u,"--n-font-size":q,"--n-height":Y,"--n-padding-single-top":J.top,"--n-padding-multiple-top":Q.top,"--n-padding-single-right":J.right,"--n-padding-multiple-right":Q.right,"--n-padding-single-left":J.left,"--n-padding-multiple-left":Q.left,"--n-padding-single-bottom":J.bottom,"--n-padding-multiple-bottom":Q.bottom,"--n-placeholder-color":r,"--n-placeholder-color-disabled":h,"--n-text-color":a,"--n-text-color-disabled":c,"--n-arrow-color":y,"--n-arrow-color-disabled":C,"--n-loading-color":F,"--n-color-active-warning":S,"--n-box-shadow-focus-warning":P,"--n-box-shadow-active-warning":A,"--n-box-shadow-hover-warning":B,"--n-border-warning":M,"--n-border-focus-warning":$,"--n-border-hover-warning":R,"--n-border-active-warning":I,"--n-color-active-error":k,"--n-box-shadow-focus-error":D,"--n-box-shadow-active-error":E,"--n-box-shadow-hover-error":_,"--n-border-error":W,"--n-border-focus-error":j,"--n-border-hover-error":L,"--n-border-active-error":U,"--n-clear-size":H,"--n-clear-color":K,"--n-clear-color-hover":V,"--n-clear-color-pressed":N,"--n-arrow-size":G}})),G=N?S("internal-selection",w((()=>e.size[0])),H,e):void 0;return{mergedTheme:z,mergedClearable:I,mergedClsPrefix:t,rtlEnabled:a,patternInputFocused:$,filterablePlaceholder:k,label:D,selected:E,showTagsPanel:M,isComposing:L,counterRef:v,counterWrapperRef:P,patternInputMirrorRef:i,patternInputRef:s,selfRef:d,multipleElRef:u,singleElRef:c,patternInputWrapperRef:h,overflowRef:A,inputTagElRef:B,handleMouseDown:function(n){e.active&&e.filterable&&n.target!==s.value&&n.preventDefault()},handleFocusin:function(n){var t;n.relatedTarget&&(null===(t=d.value)||void 0===t?void 0:t.contains(n.relatedTarget))||function(n){const{onFocus:t}=e;t&&t(n)}(n)},handleClear:function(n){!function(n){const{onClear:t}=e;t&&t(n)}(n)},handleMouseEnter:function(){R.value=!0},handleMouseLeave:function(){R.value=!1},handleDeleteOption:j,handlePatternKeyDown:function(n){if("Backspace"===n.key&&!L.value&&!e.pattern.length){const{selectedOptions:n}=e;(null==n?void 0:n.length)&&j(n[n.length-1])}},handlePatternInputInput:function(n){const{value:t}=i;if(t){const e=n.target.value;t.textContent=e,_()}e.ignoreComposition&&L.value?U=n:W(n)},handlePatternInputBlur:function(n){var t;$.value=!1,null===(t=e.onPatternBlur)||void 0===t||t.call(e,n)},handlePatternInputFocus:function(n){var t;$.value=!0,null===(t=e.onPatternFocus)||void 0===t||t.call(e,n)},handleMouseEnterCounter:function(){e.active||(V(),K=window.setTimeout((()=>{E.value&&(M.value=!0)}),100))},handleMouseLeaveCounter:function(){V()},handleFocusout:function(n){var t;(null===(t=d.value)||void 0===t?void 0:t.contains(n.relatedTarget))||function(n){const{onBlur:t}=e;t&&t(n)}(n)},handleCompositionEnd:function(){L.value=!1,e.ignoreComposition&&W(U),U=null},handleCompositionStart:function(){L.value=!0},onPopoverUpdateShow:function(e){e||(V(),M.value=!1)},focus:function(){var n,t,o;e.filterable?($.value=!1,null===(n=h.value)||void 0===n||n.focus()):e.multiple?null===(t=u.value)||void 0===t||t.focus():null===(o=c.value)||void 0===o||o.focus()},focusInput:function(){const{value:e}=s;e&&(!function(){const{value:e}=B;e&&(e.style.display="inline-block")}(),e.focus())},blur:function(){var n,t;if(e.filterable)$.value=!1,null===(n=h.value)||void 0===n||n.blur(),null===(t=s.value)||void 0===t||t.blur();else if(e.multiple){const{value:e}=u;null==e||e.blur()}else{const{value:e}=c;null==e||e.blur()}},blurInput:function(){const{value:e}=s;e&&e.blur()},updateCounter:function(e){const{value:n}=v;n&&n.setTextContent(`+${e}`)},getCounter:function(){const{value:e}=P;return e},getTail:function(){return s.value},renderLabel:e.renderLabel,cssVars:N?void 0:H,themeClass:null==G?void 0:G.themeClass,onRender:null==G?void 0:G.onRender}},render(){const{status:e,multiple:n,size:t,disabled:o,filterable:l,maxTagCount:r,bordered:i,clsPrefix:s,ellipsisTagPopoverProps:d,onRender:u,renderTag:c,renderLabel:h}=this;null==u||u();const v="responsive"===r,p="number"==typeof r,b=v||p,f=a(A,null,{default:()=>a(P,{clsPrefix:s,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var e,n;return null===(n=(e=this.$slots).arrow)||void 0===n?void 0:n.call(e)}})});let g;if(n){const{labelField:e}=this,n=n=>a("div",{class:`${s}-base-selection-tag-wrapper`,key:n.value},c?c({option:n,handleClose:()=>{this.handleDeleteOption(n)}}):a(B,{size:t,closable:!n.disabled,disabled:o,onClose:()=>{this.handleDeleteOption(n)},internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>h?h(n,!0):x(n[e],n,!0)})),i=()=>(p?this.selectedOptions.slice(0,r):this.selectedOptions).map(n),u=l?a("div",{class:`${s}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},a("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:o,value:this.pattern,autofocus:this.autofocus,class:`${s}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),a("span",{ref:"patternInputMirrorRef",class:`${s}-base-selection-input-tag__mirror`},this.pattern)):null,m=v?()=>a("div",{class:`${s}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},a(B,{size:t,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:o})):void 0;let w;if(p){const e=this.selectedOptions.length-r;e>0&&(w=a("div",{class:`${s}-base-selection-tag-wrapper`,key:"__counter__"},a(B,{size:t,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:o},{default:()=>`+${e}`})))}const y=v?l?a(ae,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:i,counter:m,tail:()=>u}):a(ae,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:i,counter:m}):p&&w?i().concat(w):i(),C=b?()=>a("div",{class:`${s}-base-selection-popover`},v?i():this.selectedOptions.map(n)):void 0,F=b?Object.assign({show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover},d):null,O=!this.selected&&(!this.active||!this.pattern&&!this.isComposing)?a("div",{class:`${s}-base-selection-placeholder ${s}-base-selection-overlay`},a("div",{class:`${s}-base-selection-placeholder__inner`},this.placeholder)):null,T=l?a("div",{ref:"patternInputWrapperRef",class:`${s}-base-selection-tags`},y,v?null:u,f):a("div",{ref:"multipleElRef",class:`${s}-base-selection-tags`,tabindex:o?void 0:0},y,f);g=a($,null,b?a(M,Object.assign({},F,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>T,default:C}):T,O)}else if(l){const e=this.pattern||this.isComposing,n=this.active?!e:!this.selected,t=!this.active&&this.selected;g=a("div",{ref:"patternInputWrapperRef",class:`${s}-base-selection-label`,title:this.patternInputFocused?void 0:R(this.label)},a("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${s}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:o,disabled:o,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),t?a("div",{class:`${s}-base-selection-label__render-label ${s}-base-selection-overlay`,key:"input"},a("div",{class:`${s}-base-selection-overlay__wrapper`},c?c({option:this.selectedOption,handleClose:()=>{}}):h?h(this.selectedOption,!0):x(this.label,this.selectedOption,!0))):null,n?a("div",{class:`${s}-base-selection-placeholder ${s}-base-selection-overlay`,key:"placeholder"},a("div",{class:`${s}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,f)}else g=a("div",{ref:"singleElRef",class:`${s}-base-selection-label`,tabindex:this.disabled?void 0:0},void 0!==this.label?a("div",{class:`${s}-base-selection-input`,title:R(this.label),key:"input"},a("div",{class:`${s}-base-selection-input__content`},c?c({option:this.selectedOption,handleClose:()=>{}}):h?h(this.selectedOption,!0):x(this.label,this.selectedOption,!0))):a("div",{class:`${s}-base-selection-placeholder ${s}-base-selection-overlay`,key:"placeholder"},a("div",{class:`${s}-base-selection-placeholder__inner`},this.placeholder)),f);return a("div",{ref:"selfRef",class:[`${s}-base-selection`,this.rtlEnabled&&`${s}-base-selection--rtl`,this.themeClass,e&&`${s}-base-selection--${e}-status`,{[`${s}-base-selection--active`]:this.active,[`${s}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${s}-base-selection--disabled`]:this.disabled,[`${s}-base-selection--multiple`]:this.multiple,[`${s}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},g,i?a("div",{class:`${s}-base-selection__border`}):null,i?a("div",{class:`${s}-base-selection__state-border`}):null)}}),de=d([u("select","\n z-index: auto;\n outline: none;\n width: 100%;\n position: relative;\n "),u("select-menu","\n margin: 4px 0;\n box-shadow: var(--n-menu-box-shadow);\n ",[z({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),ue=e({name:"Select",props:Object.assign(Object.assign({},p.props),{to:V.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},keyboard:{type:Boolean,default:!0},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],ellipsisTagPopoverProps:Object,consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),setup(e){const{mergedClsPrefixRef:t,mergedBorderedRef:o,namespaceRef:l,inlineThemeDisabled:r}=b(e),a=p("Select","-select",de,I,e,t),i=n(e.defaultValue),s=g(e,"value"),d=k(s,i),u=n(!1),c=n(""),h=w((()=>{const{valueField:n,childrenField:t}=e,o=te(n,t);return D(H.value,o)})),v=w((()=>E(z.value,e.valueField,e.childrenField))),f=n(!1),m=k(g(e,"show"),f),x=n(null),C=n(null),F=n(null),{localeRef:O}=_("Select"),T=w((()=>{var n;return null!==(n=e.placeholder)&&void 0!==n?n:O.value.placeholder})),P=W(e,["items","options"]),A=[],B=n([]),M=n([]),$=n(new Map),R=w((()=>{const{fallbackOption:n}=e;if(void 0===n){const{labelField:n,valueField:t}=e;return e=>({[n]:String(e),[t]:e})}return!1!==n&&(e=>Object.assign(n(e),{value:e}))})),z=w((()=>M.value.concat(B.value).concat(P.value))),N=w((()=>{const{filter:n}=e;if(n)return n;const{labelField:t,valueField:o}=e;return(e,n)=>{if(!n)return!1;const l=n[t];if("string"==typeof l)return j(e,l);const r=n[o];return"string"==typeof r?j(e,r):"number"==typeof r&&j(e,String(r))}})),H=w((()=>{if(e.remote)return P.value;{const{value:n}=z,{value:t}=c;return t.length&&e.filterable?L(n,N.value,t,e.childrenField):n}}));function G(n){const t=e.remote,{value:o}=$,{value:l}=v,{value:r}=R,a=[];return n.forEach((e=>{if(l.has(e))a.push(l.get(e));else if(t&&o.has(e))a.push(o.get(e));else if(r){const n=r(e);n&&a.push(n)}})),a}const Y=w((()=>{if(e.multiple){const{value:e}=d;return Array.isArray(e)?G(e):[]}return null})),q=w((()=>{const{value:n}=d;return e.multiple||Array.isArray(n)||null===n?null:G([n])[0]||null})),J=U(e),{mergedSizeRef:Q,mergedDisabledRef:Z,mergedStatusRef:le}=J;function re(n,t){const{onChange:o,"onUpdate:value":l,onUpdateValue:r}=e,{nTriggerFormChange:a,nTriggerFormInput:s}=J;o&&oe(o,n,t),r&&oe(r,n,t),l&&oe(l,n,t),i.value=n,a(),s()}function ae(n){const{onBlur:t}=e,{nTriggerFormBlur:o}=J;t&&oe(t,n),o()}function ie(){var n;const{remote:t,multiple:o}=e;if(t){const{value:t}=$;if(o){const{valueField:o}=e;null===(n=Y.value)||void 0===n||n.forEach((e=>{t.set(e[o],e)}))}else{const n=q.value;n&&t.set(n[e.valueField],n)}}}function se(n){const{onUpdateShow:t,"onUpdate:show":o}=e;t&&oe(t,n),o&&oe(o,n),f.value=n}function ue(){Z.value||(se(!0),f.value=!0,e.filterable&&we())}function ce(){se(!1)}function he(){c.value="",M.value=A}const ve=n(!1);function pe(e){be(e.rawNode)}function be(n){if(Z.value)return;const{tag:t,remote:o,clearFilterAfterSelect:l,valueField:r}=e;if(t&&!o){const{value:e}=M,n=e[0]||null;if(n){const e=B.value;e.length?e.push(n):B.value=[n],M.value=A}}if(o&&$.value.set(n[r],n),e.multiple){const a=function(n){if(!Array.isArray(n))return[];if(R.value)return Array.from(n);{const{remote:t}=e,{value:o}=v;if(t){const{value:e}=$;return n.filter((n=>o.has(n)||e.has(n)))}return n.filter((e=>o.has(e)))}}(d.value),i=a.findIndex((e=>e===n[r]));if(~i){if(a.splice(i,1),t&&!o){const e=fe(n[r]);~e&&(B.value.splice(e,1),l&&(c.value=""))}}else a.push(n[r]),l&&(c.value="");re(a,G(a))}else{if(t&&!o){const e=fe(n[r]);B.value=~e?[B.value[e]]:A}me(),ce(),re(n[r],n)}}function fe(n){return B.value.findIndex((t=>t[e.valueField]===n))}function ge(n){var t,o,l,r,a;if(e.keyboard)switch(n.key){case" ":if(e.filterable)break;n.preventDefault();case"Enter":if(!(null===(t=x.value)||void 0===t?void 0:t.isComposing))if(m.value){const n=null===(o=F.value)||void 0===o?void 0:o.getPendingTmNode();n?pe(n):e.filterable||(ce(),me())}else if(ue(),e.tag&&ve.value){const n=M.value[0];if(n){const t=n[e.valueField],{value:o}=d;e.multiple&&Array.isArray(o)&&o.some((e=>e===t))||be(n)}}n.preventDefault();break;case"ArrowUp":if(n.preventDefault(),e.loading)return;m.value&&(null===(l=F.value)||void 0===l||l.prev());break;case"ArrowDown":if(n.preventDefault(),e.loading)return;m.value?null===(r=F.value)||void 0===r||r.next():ue();break;case"Escape":m.value&&(ne(n),ce()),null===(a=x.value)||void 0===a||a.focus()}else n.preventDefault()}function me(){var e;null===(e=x.value)||void 0===e||e.focus()}function we(){var e;null===(e=x.value)||void 0===e||e.focusInput()}ie(),y(g(e,"options"),ie);const xe={focus:()=>{var e;null===(e=x.value)||void 0===e||e.focus()},focusInput:()=>{var e;null===(e=x.value)||void 0===e||e.focusInput()},blur:()=>{var e;null===(e=x.value)||void 0===e||e.blur()},blurInput:()=>{var e;null===(e=x.value)||void 0===e||e.blurInput()}},ye=w((()=>{const{self:{menuBoxShadow:e}}=a.value;return{"--n-menu-box-shadow":e}})),Ce=r?S("select",void 0,ye,e):void 0;return Object.assign(Object.assign({},xe),{mergedStatus:le,mergedClsPrefix:t,mergedBordered:o,namespace:l,treeMate:h,isMounted:K(),triggerRef:x,menuRef:F,pattern:c,uncontrolledShow:f,mergedShow:m,adjustedTo:V(e),uncontrolledValue:i,mergedValue:d,followerRef:C,localizedPlaceholder:T,selectedOption:q,selectedOptions:Y,mergedSize:Q,mergedDisabled:Z,focused:u,activeWithoutMenuOpen:ve,inlineThemeDisabled:r,onTriggerInputFocus:function(){e.filterable&&(ve.value=!0)},onTriggerInputBlur:function(){e.filterable&&(ve.value=!1,m.value||he())},handleTriggerOrMenuResize:function(){var e;m.value&&(null===(e=C.value)||void 0===e||e.syncPosition())},handleMenuFocus:function(e){u.value=!0},handleMenuBlur:function(e){var n;(null===(n=x.value)||void 0===n?void 0:n.$el.contains(e.relatedTarget))||(u.value=!1,ae(e),ce())},handleMenuTabOut:function(){var e;null===(e=x.value)||void 0===e||e.focus(),ce()},handleTriggerClick:function(){Z.value||(m.value?e.filterable?we():ce():ue())},handleToggle:pe,handleDeleteOption:be,handlePatternInput:function(n){m.value||ue();const{value:t}=n.target;c.value=t;const{tag:o,remote:l}=e;if(function(n){const{onSearch:t}=e;t&&oe(t,n)}(t),o&&!l){if(!t)return void(M.value=A);const{onCreate:n}=e,o=n?n(t):{[e.labelField]:t,[e.valueField]:t},{valueField:l,labelField:r}=e;P.value.some((e=>e[l]===o[l]||e[r]===o[r]))||B.value.some((e=>e[l]===o[l]||e[r]===o[r]))?M.value=A:M.value=[o]}},handleClear:function(n){n.stopPropagation();const{multiple:t}=e;!t&&e.filterable&&ce(),function(){const{onClear:n}=e;n&&oe(n)}(),t?re([],[]):re(null,null)},handleTriggerBlur:function(e){var n,t;(null===(t=null===(n=F.value)||void 0===n?void 0:n.selfRef)||void 0===t?void 0:t.contains(e.relatedTarget))||(u.value=!1,ae(e),ce())},handleTriggerFocus:function(n){!function(n){const{onFocus:t,showOnFocus:o}=e,{nTriggerFormFocus:l}=J;t&&oe(t,n),l(),o&&ue()}(n),u.value=!0},handleKeydown:ge,handleMenuAfterLeave:he,handleMenuClickOutside:function(e){var n;m.value&&((null===(n=x.value)||void 0===n?void 0:n.$el.contains(X(e)))||ce())},handleMenuScroll:function(n){!function(n){const{onScroll:t}=e;t&&oe(t,n)}(n)},handleMenuKeydown:ge,handleMenuMousedown:function(e){ee(e,"action")||ee(e,"empty")||e.preventDefault()},mergedTheme:a,cssVars:r?void 0:ye,themeClass:null==Ce?void 0:Ce.themeClass,onRender:null==Ce?void 0:Ce.onRender})},render(){return a("div",{class:`${this.mergedClsPrefix}-select`},a(N,null,{default:()=>[a(H,null,{default:()=>a(se,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,n;return[null===(n=(e=this.$slots).arrow)||void 0===n?void 0:n.call(e)]}})}),a(G,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===V.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>a(Y,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,n,t;return this.mergedShow||"show"===this.displayDirective?(null===(e=this.onRender)||void 0===e||e.call(this),q(a(Z,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,null===(n=this.menuProps)||void 0===n?void 0:n.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[null===(t=this.menuProps)||void 0===t?void 0:t.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var e,n;return[null===(n=(e=this.$slots).empty)||void 0===n?void 0:n.call(e)]},header:()=>{var e,n;return[null===(n=(e=this.$slots).header)||void 0===n?void 0:n.call(e)]},action:()=>{var e,n;return[null===(n=(e=this.$slots).action)||void 0===n?void 0:n.call(e)]}}),"show"===this.displayDirective?[[J,this.mergedShow],[Q,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[Q,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}});export{ue as N};
