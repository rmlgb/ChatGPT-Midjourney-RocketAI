import{d as a,L as e,J as t,r as s,v as n,a6 as d,O as l,A as o,dg as i,P as r,c,n as u,e as p,h as m,dh as g,o as v,aE as f}from"./index-62750275.js";const h={class:"w-full h-full relative"},w={class:"loading"},x=[f('<span class="loading-text-words">内</span><span class="loading-text-words">容</span><span class="loading-text-words">正</span><span class="loading-text-words">在</span><span class="loading-text-words">加</span><span class="loading-text-words">载</span><span class="loading-text-words">中</span>',7)],y=["src"],E=a({__name:"index",setup(a){const f=e(),E=t(),b=s(!1),k=n((()=>E.iframeUrl)),L=d(),F=n((()=>"dark"===L.theme));const B=n((()=>L.theme));async function D(a){const{type:e,data:t}=a.data;"theme"===e&&L.setTheme("dark"===t?"dark":"light"),"chat"===e&&i({prompt:t}).then((a=>{const{code:e,data:t}=a;200===e&&U({type:"chat",data:I(t)})}))}function I(a){return a.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"")}function U(a){document.getElementById("iframe").contentWindow.postMessage(a,"*")}function _(){U({type:"theme",data:B.value});const a=g();a&&U({type:"token",data:a}),b.value=!1}return l(B,(a=>{U({type:"theme",data:a})})),o((()=>{if(!k.value)return f.push("/");b.value=!0,function(){const a=document.getElementById("iframe");(null==a?void 0:a.addEventListener)||null==a||a.attachEvent("onload",_),null==a||a.addEventListener("load",_,!0)}(),window.addEventListener("message",D)})),r((()=>{E.updateIframeUrl("");const a=document.getElementById("iframe");null==a||a.removeEventListener("load",_),window.removeEventListener("message",D)})),(a,e)=>(v(),c("div",h,[b.value?(v(),c("div",{key:0,class:u(["main-container absolute left-0 right-0 bottom-0 top-0 backdrop-blur",[F.value?"dark:bg-black/20":"bg-white/80"]])},[p("div",w,[p("div",{class:u(["loading-text ",F.value?"text-[#fff]":"text-[#000]"]),id:"loading-text"},x,2)])],2)):m("",!0),p("iframe",{id:"iframe",src:k.value,style:{width:"100%",height:"100%",border:"none"}},null,8,y)]))}});export{E as default};
