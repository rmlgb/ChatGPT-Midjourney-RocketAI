'use strict';const _0x413519=_0x5c98;(function(_0x4ed0a7,_0x194387){const _0x25e999=_0x5c98,_0x46a85e=_0x4ed0a7();while(!![]){try{const _0x533081=parseInt(_0x25e999(0x111))/0x1*(parseInt(_0x25e999(0x1c0))/0x2)+-parseInt(_0x25e999(0x150))/0x3*(-parseInt(_0x25e999(0x1bd))/0x4)+-parseInt(_0x25e999(0x13b))/0x5*(-parseInt(_0x25e999(0x1c5))/0x6)+-parseInt(_0x25e999(0x122))/0x7+-parseInt(_0x25e999(0x11b))/0x8+parseInt(_0x25e999(0x1c6))/0x9+parseInt(_0x25e999(0x1ba))/0xa*(parseInt(_0x25e999(0x142))/0xb);if(_0x533081===_0x194387)break;else _0x46a85e['push'](_0x46a85e['shift']());}catch(_0x4922f3){_0x46a85e['push'](_0x46a85e['shift']());}}}(_0x4b62,0x3444d));var __decorate=this&&this[_0x413519(0x19f)]||function(_0x343c1f,_0x214a4c,_0xe33c1a,_0x33b0f2){const _0x109aa8=_0x413519;var _0x34bedc=arguments['length'],_0x39193e=_0x34bedc<0x3?_0x214a4c:_0x33b0f2===null?_0x33b0f2=Object[_0x109aa8(0x1eb)](_0x214a4c,_0xe33c1a):_0x33b0f2,_0x491bbe;if(typeof Reflect==='object'&&typeof Reflect['decorate']==='function')_0x39193e=Reflect[_0x109aa8(0x1e2)](_0x343c1f,_0x214a4c,_0xe33c1a,_0x33b0f2);else{for(var _0x502613=_0x343c1f[_0x109aa8(0x160)]-0x1;_0x502613>=0x0;_0x502613--)if(_0x491bbe=_0x343c1f[_0x502613])_0x39193e=(_0x34bedc<0x3?_0x491bbe(_0x39193e):_0x34bedc>0x3?_0x491bbe(_0x214a4c,_0xe33c1a,_0x39193e):_0x491bbe(_0x214a4c,_0xe33c1a))||_0x39193e;}return _0x34bedc>0x3&&_0x39193e&&Object['defineProperty'](_0x214a4c,_0xe33c1a,_0x39193e),_0x39193e;},__metadata=this&&this[_0x413519(0x16c)]||function(_0xbbfb88,_0x298b8e){const _0xd5d0cf=_0x413519;if(typeof Reflect===_0xd5d0cf(0x1a3)&&typeof Reflect[_0xd5d0cf(0x1e1)]==='function')return Reflect['metadata'](_0xbbfb88,_0x298b8e);},__param=this&&this[_0x413519(0x15a)]||function(_0x4fc1ae,_0x2c609f){return function(_0x31e884,_0x411e46){_0x2c609f(_0x31e884,_0x411e46,_0x4fc1ae);};};Object[_0x413519(0x13d)](exports,_0x413519(0x1f8),{'value':!![]}),exports[_0x413519(0x206)]=void 0x0;function _0x4b62(){const _0x5979e9=['queryNoticeConfig','setGptKeys','robotAvatar','phoneLoginStatus','getConfigs','payWeChatPrivateKey','noticeTitle','isVerifyEmail','version','metadata','decorate','payWeChatPublicKey','rocketaiBuiltInSensitiveStatus','HttpStatus','Injectable','relaxMjLimitCount','siteName','Status','OfficialService','getOwnPropertyDescriptor','emailRegisterStatus','缺失ip信息','appNoticeInfo','siteRobotName','mjUseBaiduFy','tencent','firstRregisterSendDrawMjCount','@nestjs/common','fastMixedGraphMjPrice','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','fetchBaseAccessToken','signInModel4Count','__esModule','noticeEntity','Repository','error_description','relaxReMjPrice','relaxLocalRedrawMjPrice','configVal','Key','chatGptKey','auth','readFileSync','wechatJsapiTicket','./config.entity','wechat\x20refresh\x20access_token\x20\x20==>\x20','GlobalConfigService','scalePrice','MjdrawCount','sunoNoticeInfo','includes','baiduTextStatus','3eSRNfW','&grant_type=client_credentials','configKey','InjectRepository','design:paramtypes','baiduTextSecretKey','application/json','mindDefaultData','qqNumber','queryAllConfig','1950048ywDgAI','payEpayChannel','getSensitiveConfig','getPhoneVerifyConfig','globalConfigs','clientHomePath','signInModel3Count','2716952NgZBRa','\x20current\x20use\x20version\x20in\x20------>:\x20','getWechatAccessToken','rocketAiKey','fastDrawingMjPrice','设置配置信息错误！','registerSendDrawMjCount','rocketAiToken','ISDEV','设置完成！','entries','fastLocalRedrawMjPrice','delete','configEntity','json','initGetAllConfig','chatGptKey:','discoverBg','ConfigEntity','./../chatLog/chatLog.entity','mjNoticeInfo','baiduTextAccessToken','TRUE','queryPayType','queryConfig','1131320nDFVEi','package.json','defineProperty','setNoticeConfig','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','update','fastReMjPrice','583GdvPBF','wechatRegisterStatus','appMenuHeaderBgUrl','clientIntegralIcon','queryFrontConfig','payMpayChannel','./../models/models.service','payMpayStatus','parse','fastMjPriceFree','log','ticket','aliPhoneSignName','payHupiStatus','132jDeKWv','@nestjs/typeorm','findOne','clientIntegralName','dellDrawNoticeInfo','epay','mjChannel','支付功能暂未开放!','appMenuHeaderTips','getNamespace','__param','感谢您使用RocKetAi、祝您使用愉快~','chatLogEntity','wechatAccessToken','debug','salesBaseRatio','length','error:\x20','mjProxy','registerBaseUrl','primaryDarkColor','fastFaceChangeMjPrice','fastSpellParsingMjPrice','relaxMixedGraphMjPrice','cos','payEpayStatus','手机验证码功能暂未开放!','primaryHoverColor','__metadata','clientLogoPath','noticeInfo','colorizationPrice','utf-8','https://api.jiangly.com/api/permission/auth','getAuthInfo','rocketaiBuiltInSensitiveAuthKey','isAutoOpenNotice','payWechatStatus','wechatOfficialAppSecret','relaxDrawingMjPrice','default','请按要求填写正确的授权信息','map','user','relaxSpellParsingMjPrice','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','clientFavoIconPath','hideString','primaryPressedColor','env','buyCramiAddress','companyName','privacyAgreement','searchVals','fastZoomInMjPrice','error','NoticeEntity','Like','darkClientLogoPath','baiduTextApiKey','vxNumber','onModuleInit','relaxMjPriceFree','searchNotice','emailLoginStatus','registerSendModel4Count','initBaiduSensitive','BAD_REQUEST','../../common/utils','payEpayApiPayUrl','globalBoxRadius','post','assign','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','mjHideNotBlock','fastMjLimitCount','relaxZoomInMjPrice','aiFaceNoticeInfo','signInStatus','__decorate','wechatOfficialAppId','invitedGuestSendModel4Count','inviteGiveSendModel3Count','object','firstRegisterSendRank','&secret=','then','隐私内容、非超级管理员无权查看','wechat','phoneRegisterStatus','domain','signInMjDrawToken','scaleNotice','Logger','百度敏感词配置检测失败，您的参数可能配置的不正确!','getRocKetAiToken','relaxVariantsMjPrice','data','baidu','getCopyright','fastZoomMjPrice','mjHideWorkIn','rBackgroundPrice','isUseWxLogin','rocketaiBuiltInSensitiveApiBase','firstRegisterSendStatus','25940BrHUGK','签到功能暂未开放!','ChatLogEntity','14668jMsckP','copyrightUrl','inviteSendStatus','176978RUiMNE','reduce','isShowAppCatIcon','操作完成！','firstRregisterSendModel4Count','6CqYWQO','498816PtOQHN','fastArrowMjPrice','mjProxyImgUrl','HttpException','get','aliPhoneAccessKeyId','getSignatureGiftConfig','typeorm','fetchJsapiTicket','find','aliPhoneAccessKeySecret','response','segmentationNotice','primaryColor','userAgreement','createOrUpdate','super','&client_secret='];_0x4b62=function(){return _0x5979e9;};return _0x4b62();}const models_service_1=require(_0x413519(0x148)),chatLog_entity_1=require(_0x413519(0x135)),common_1=require(_0x413519(0x1f3)),config_entity_1=require(_0x413519(0x204)),typeorm_1=require(_0x413519(0x151)),typeorm_2=require(_0x413519(0x1cd)),utils_1=require(_0x413519(0x194)),axios_1=require('axios'),fs=require('fs'),notice_entity_1=require('./notice.entity'),packageJsonContent=fs[_0x413519(0x202)](_0x413519(0x13c),_0x413519(0x170)),packageJson=JSON[_0x413519(0x14a)](packageJsonContent),version=packageJson[_0x413519(0x1e0)];function _0x5c98(_0x47f069,_0x2ca90f){const _0x4b6276=_0x4b62();return _0x5c98=function(_0x5c9815,_0x288027){_0x5c9815=_0x5c9815-0x110;let _0x123a58=_0x4b6276[_0x5c9815];return _0x123a58;},_0x5c98(_0x47f069,_0x2ca90f);}console['log'](_0x413519(0x123),version);let GlobalConfigService=class GlobalConfigService{constructor(_0x385532,_0x36fef1,_0x37d082,_0x2cbcad){const _0x2f2d0a=_0x413519;this[_0x2f2d0a(0x12f)]=_0x385532,this[_0x2f2d0a(0x15c)]=_0x36fef1,this['noticeEntity']=_0x37d082,this['modelsService']=_0x2cbcad,this['globalConfigs']={},this[_0x2f2d0a(0x129)]=!![];}async[_0x413519(0x18d)](){const _0x3a0d4a=_0x413519;await this[_0x3a0d4a(0x131)]();}async[_0x413519(0x1dc)](_0x5310cf){const _0x5b14e4=_0x413519;if(_0x5310cf[_0x5b14e4(0x160)]===0x0)return;if(_0x5310cf[_0x5b14e4(0x20a)](_0x5b14e4(0x15d))&&_0x5310cf[_0x5b14e4(0x160)]===0x1)return this['wechatAccessToken'];if(_0x5310cf['includes'](_0x5b14e4(0x203))&&_0x5310cf[_0x5b14e4(0x160)]===0x1)return this[_0x5b14e4(0x203)];if(_0x5310cf['length']===0x1)return this[_0x5b14e4(0x11f)][_0x5310cf[0x0]];else{const _0x1ead87={};return _0x5310cf['forEach'](_0x5b93bd=>_0x1ead87[_0x5b93bd]=this[_0x5b14e4(0x11f)][_0x5b93bd]),_0x1ead87;}}async[_0x413519(0x131)](){const _0x279946=_0x413519,_0x1b478d=await this['configEntity'][_0x279946(0x1cf)]();this[_0x279946(0x11f)]=_0x1b478d[_0x279946(0x1c1)]((_0x26c4cb,_0x1088ac)=>{const _0x5623b5=_0x279946;return _0x26c4cb[_0x1088ac[_0x5623b5(0x113)]]=_0x1088ac[_0x5623b5(0x1fe)],_0x26c4cb;},{}),this[_0x279946(0x192)]();}async[_0x413519(0x192)](_0x5b1099=!![]){const _0x29205d=_0x413519,{baiduTextApiKey:_0x4fffab,baiduTextSecretKey:_0x354e42}=await this[_0x29205d(0x1dc)]([_0x29205d(0x18b),_0x29205d(0x116)]);if(!_0x4fffab||!_0x354e42){common_1[_0x29205d(0x1ad)]['error'](_0x29205d(0x199),_0x29205d(0x206));return;}const _0x13b3c3={'Content-Type':_0x29205d(0x117),'Accept':_0x29205d(0x117)},_0x4e8dfd='https://aip.baidubce.com/oauth/2.0/token?client_id='+_0x4fffab+_0x29205d(0x1d7)+_0x354e42+_0x29205d(0x112);try{const _0x3b1f39=await axios_1[_0x29205d(0x178)][_0x29205d(0x197)](_0x4e8dfd,{'headers':_0x13b3c3});this[_0x29205d(0x11f)]['baiduTextAccessToken']=_0x3b1f39[_0x29205d(0x1b1)]['access_token'];}catch(_0x55e54c){if(_0x5b1099)common_1[_0x29205d(0x1ad)][_0x29205d(0x187)](_0x29205d(0x1ae),'GlobalConfigService');else throw new common_1[(_0x29205d(0x1c9))](_0x55e54c[_0x29205d(0x1d1)][_0x29205d(0x1b1)][_0x29205d(0x1fb)],common_1[_0x29205d(0x1e5)][_0x29205d(0x193)]);}}async[_0x413519(0x124)](_0x3ac700=![]){const _0x510d3b=_0x413519,{wechatOfficialAppId:_0x4adf08,wechatOfficialAppSecret:_0x53ea95}=await this[_0x510d3b(0x1dc)]([_0x510d3b(0x1a0),_0x510d3b(0x176)]);if(!_0x4adf08||!_0x53ea95)return common_1['Logger']['error'](_0x510d3b(0x17d),_0x510d3b(0x1ea));this[_0x510d3b(0x15d)]=await this[_0x510d3b(0x1f6)](_0x4adf08,_0x53ea95,_0x3ac700),this[_0x510d3b(0x203)]=await this[_0x510d3b(0x1ce)](this['wechatAccessToken']),common_1[_0x510d3b(0x1ad)][_0x510d3b(0x14c)](_0x510d3b(0x205)+this['wechatAccessToken'],_0x510d3b(0x1ea));}async[_0x413519(0x1f6)](_0x388fc0,_0x1a4972,_0x62843e=![]){const _0x71db3c=_0x413519;if(process[_0x71db3c(0x181)][_0x71db3c(0x12a)]===_0x71db3c(0x138)){this['wechatAccessToken']='';return;}const {data:{errmsg:_0x4b3d0b,access_token:_0x9f8af8}}=await axios_1['default'][_0x71db3c(0x1ca)](_0x71db3c(0x1f5)+_0x388fc0+_0x71db3c(0x1a5)+_0x1a4972);if(_0x4b3d0b){if(_0x62843e)common_1['Logger'][_0x71db3c(0x187)]('获取微信access_token失败、错误信息：'+_0x4b3d0b,_0x71db3c(0x1ea));else throw new common_1['HttpException']('请配置正确的秘钥、当前秘钥检测不通过！',common_1[_0x71db3c(0x1e5)]['BAD_REQUEST']);return'';}return _0x9f8af8;}async[_0x413519(0x1ce)](_0x54d98e){const _0xc97fde=_0x413519;var _0x8a4da;if(process[_0xc97fde(0x181)]['ISDEV']===_0xc97fde(0x138)){this[_0xc97fde(0x203)]='';return;}const _0x555c64=await axios_1['default'][_0xc97fde(0x1ca)](_0xc97fde(0x13f)+_0x54d98e+'&type=jsapi');return(_0x8a4da=_0x555c64===null||_0x555c64===void 0x0?void 0x0:_0x555c64[_0xc97fde(0x1b1)])===null||_0x8a4da===void 0x0?void 0x0:_0x8a4da[_0xc97fde(0x14d)];}async[_0x413519(0x11a)](_0x12815a){const _0x2daa0=_0x413519,{role:_0x455b98}=_0x12815a[_0x2daa0(0x17b)];return this[_0x2daa0(0x11f)];}async[_0x413519(0x146)](_0xf5b532,_0x2e6af0){const _0x19624e=_0x413519;var _0x37bb51,_0x4eaf24;const _0x2cc2e0=[_0x19624e(0x18c),'registerSendStatus','registerSendModel3Count',_0x19624e(0x191),_0x19624e(0x128),_0x19624e(0x1b9),_0x19624e(0x1a4),'firstRregisterSendModel3Count',_0x19624e(0x1c4),_0x19624e(0x1f2),_0x19624e(0x1bf),_0x19624e(0x1a2),'inviteGiveSendModel4Count','inviteGiveSendDrawMjCount','invitedGuestSendModel3Count',_0x19624e(0x1a1),'invitedGuestSendDrawMjCount',_0x19624e(0x120),_0x19624e(0x16d),_0x19624e(0x17e),_0x19624e(0x1b7),_0x19624e(0x1e8),_0x19624e(0x1da),_0x19624e(0x1ef),_0x19624e(0x182),_0x19624e(0x118),'baiduCode',_0x19624e(0x11c),_0x19624e(0x147),_0x19624e(0x195),'payEpayStatus',_0x19624e(0x14f),_0x19624e(0x175),'payMpayStatus',_0x19624e(0x174),_0x19624e(0x1c2),_0x19624e(0x15f),'salesSeniorRatio','salesAllowDrawMoney',_0x19624e(0x183),'filingNumber','phoneRegisterStatus',_0x19624e(0x1ec),_0x19624e(0x190),_0x19624e(0x1db),_0x19624e(0x143),'wechatSilentLoginStatus',_0x19624e(0x19e),_0x19624e(0x121),_0x19624e(0x1f7),_0x19624e(0x1ab),_0x19624e(0x158),_0x19624e(0x144),_0x19624e(0x1f0),_0x19624e(0x19a),_0x19624e(0x1b5),_0x19624e(0x1df),_0x19624e(0x14b),_0x19624e(0x126),_0x19624e(0x1f4),_0x19624e(0x186),_0x19624e(0x141),_0x19624e(0x1c7),_0x19624e(0x165),'fastVariantsMjPrice',_0x19624e(0x1b4),_0x19624e(0x12d),_0x19624e(0x166),_0x19624e(0x18e),_0x19624e(0x177),_0x19624e(0x167),_0x19624e(0x19c),_0x19624e(0x1fc),'relaxArrowMjPrice','relaxFaceChangeMjPrice',_0x19624e(0x1b0),'relaxZoomMjPrice',_0x19624e(0x1fd),_0x19624e(0x17c),_0x19624e(0x19b),_0x19624e(0x1e7),_0x19624e(0x1c8),_0x19624e(0x136),_0x19624e(0x156),'mjProxyImgUrl',_0x19624e(0x145),_0x19624e(0x153),'sunoPrice',_0x19624e(0x125),'galleryNoticeInfo','packageNoticeInfo',_0x19624e(0x1ee),_0x19624e(0x184),_0x19624e(0x1d4),_0x19624e(0x209),'pptNoticeInfo','pptPrice',_0x19624e(0x18a),_0x19624e(0x1d3),_0x19624e(0x164),'primarySecondColor',_0x19624e(0x16b),_0x19624e(0x180),'primarySupplColor',_0x19624e(0x196),'globalCustomCss',_0x19624e(0x133),'segmentationPrice',_0x19624e(0x207),'inpaintPrice',_0x19624e(0x1b6),'idphotoPrice',_0x19624e(0x16f),_0x19624e(0x19d),'blendNoticeInfo',_0x19624e(0x154),_0x19624e(0x1d2),_0x19624e(0x1ac),_0x19624e(0x18f),_0x19624e(0x185)],_0x5cffcc=await this[_0x19624e(0x12f)][_0x19624e(0x1cf)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x2cc2e0)}}),{domain:_0x23338a}=_0xf5b532,_0x5f5b59=this[_0x19624e(0x11f)][_0x19624e(0x1aa)];_0x5f5b59!==_0x23338a&&(this[_0x19624e(0x1d5)]({'configKey':_0x19624e(0x1aa),'configVal':_0x23338a,'status':0x1}),await this[_0x19624e(0x131)]());const _0x1e8f8f=_0x5cffcc[_0x19624e(0x1c1)]((_0x43f4c2,_0x396752)=>{const _0x1f30f7=_0x19624e;return _0x43f4c2[_0x396752[_0x1f30f7(0x113)]]=_0x396752[_0x1f30f7(0x1fe)],_0x43f4c2;},{});_0x1e8f8f[_0x19624e(0x184)]=(_0x37bb51=await this[_0x19624e(0x1f9)]['findOne']({'where':{'configKey':'privacyAgreement'},'select':[_0x19624e(0x1fe)]})[_0x19624e(0x1a6)](_0x3ef2fb=>_0x3ef2fb===null||_0x3ef2fb===void 0x0?void 0x0:_0x3ef2fb['configVal']))!==null&&_0x37bb51!==void 0x0?_0x37bb51:null,_0x1e8f8f[_0x19624e(0x1d4)]=(_0x4eaf24=await this['noticeEntity']['findOne']({'where':{'configKey':'userAgreement'},'select':[_0x19624e(0x1fe)]})[_0x19624e(0x1a6)](_0x381506=>_0x381506===null||_0x381506===void 0x0?void 0x0:_0x381506['configVal']))!==null&&_0x4eaf24!==void 0x0?_0x4eaf24:null;const {wechatOfficialAppId:_0x1fcf1c,wechatOfficialAppSecret:_0x49cd93}=await this[_0x19624e(0x1dc)](['wechatOfficialAppId','wechatOfficialAppSecret']),_0x376040=!!(_0x1fcf1c&&_0x49cd93);return Object['assign'](Object[_0x19624e(0x198)]({},_0x1e8f8f),{'isUseWxLogin':_0x376040});}async['queryGptKeys'](_0x4092ae){const _0x22b46b=_0x413519,{role:_0xfac31f}=_0x4092ae[_0x22b46b(0x17b)],_0x233494=await this['configEntity'][_0x22b46b(0x1cf)]({'where':{'configKey':(0x0,typeorm_2[_0x22b46b(0x189)])('%'+_0x22b46b(0x200)+'%')}});if(_0xfac31f===_0x22b46b(0x1d6))return _0x233494;return _0x233494[_0x22b46b(0x17a)](_0x2b5183=>{const _0x40c363=_0x22b46b;return _0x2b5183[_0x40c363(0x1fe)]=(0x0,utils_1[_0x40c363(0x17f)])(_0x2b5183[_0x40c363(0x1fe)]),_0x2b5183;});}async[_0x413519(0x1d9)](_0x2a9623){const _0x739be1=_0x413519,_0x3e1f56=_0x2a9623['configs']['filter'](_0x552d6d=>_0x552d6d[_0x739be1(0x1fe)]),_0x52322a=_0x3e1f56['map'](_0x168cdd=>_0x168cdd[_0x739be1(0x113)]);for(const [_0x2a66c6,_0x2b023f]of _0x3e1f56[_0x739be1(0x12c)]()){const {configKey:_0x151eda,configVal:_0xfef73b,status:_0x2463f6}=_0x2b023f;await this['createOrUpdate']({'configKey':'chatGptKey:'+(_0x2a66c6+0x1),'configVal':_0xfef73b,'status':_0x2463f6});}const _0x3c48a1=await this[_0x739be1(0x12f)]['find']({'where':{'configKey':(0x0,typeorm_2[_0x739be1(0x189)])('%'+_0x739be1(0x200)+'%')}}),_0x39961c=_0x3c48a1[_0x739be1(0x17a)](_0x2def7f=>_0x2def7f['configKey']);if(_0x39961c[_0x739be1(0x160)]>_0x52322a[_0x739be1(0x160)]){const _0x2a784a=(0x0,utils_1['getDiffArray'])(_0x39961c[_0x739be1(0x160)],_0x52322a['length'],_0x739be1(0x132));for(const _0x5ee427 of _0x2a784a){await this[_0x739be1(0x12f)][_0x739be1(0x12e)]({'configKey':_0x5ee427});}}return await this[_0x739be1(0x131)](),_0x739be1(0x1c3);}async[_0x413519(0x13a)](_0x4dd41e,_0x325056){const _0x52f86b=_0x413519,{role:_0x813ec4}=_0x325056[_0x52f86b(0x17b)],{keys:_0x4d1570}=_0x4dd41e,_0x215a48=await this[_0x52f86b(0x12f)]['find']({'where':{'configKey':(0x0,typeorm_2['In'])(_0x4d1570)}});return _0x813ec4!==_0x52f86b(0x1d6)&&_0x215a48['forEach'](_0x1c4cff=>{const _0xa1521e=_0x52f86b;if(_0x1c4cff['configKey'][_0xa1521e(0x20a)]('mj')||_0x1c4cff['configKey'][_0xa1521e(0x20a)](_0xa1521e(0x1ff))||_0x1c4cff[_0xa1521e(0x113)][_0xa1521e(0x20a)]('gpt')||_0x1c4cff['configKey'][_0xa1521e(0x20a)](_0xa1521e(0x168))||_0x1c4cff[_0xa1521e(0x113)][_0xa1521e(0x20a)](_0xa1521e(0x1b2))||_0x1c4cff[_0xa1521e(0x113)][_0xa1521e(0x20a)]('ali')||_0x1c4cff[_0xa1521e(0x113)]['includes'](_0xa1521e(0x1f1))||_0x1c4cff[_0xa1521e(0x113)]['includes']('pay')||_0x1c4cff['configKey'][_0xa1521e(0x20a)]('wechat')||_0x1c4cff['configKey'][_0xa1521e(0x20a)]('mjProxyImgUrl')||_0x1c4cff[_0xa1521e(0x113)]==='openaiBaseUrl'){const _0x457e77=[_0xa1521e(0x1e3),_0xa1521e(0x1dd)];if(_0x457e77['includes'](_0x1c4cff['configKey']))return _0x1c4cff['configVal']=(0x0,utils_1[_0xa1521e(0x17f)])(_0x1c4cff[_0xa1521e(0x1fe)],_0xa1521e(0x1a7));const _0x5f1f0b=[_0xa1521e(0x169),_0xa1521e(0x14f),_0xa1521e(0x162)];!_0x5f1f0b['includes'](_0x1c4cff[_0xa1521e(0x113)])&&!_0x1c4cff[_0xa1521e(0x113)][_0xa1521e(0x20a)](_0xa1521e(0x1e9))&&(_0x1c4cff[_0xa1521e(0x1fe)]=(0x0,utils_1[_0xa1521e(0x17f)])(_0x1c4cff[_0xa1521e(0x1fe)]));}}),_0x215a48[_0x52f86b(0x1c1)]((_0xb653f1,_0xd04b3a)=>{const _0x4e8c48=_0x52f86b;return _0xb653f1[_0xd04b3a[_0x4e8c48(0x113)]]=_0xd04b3a['configVal'],_0xb653f1;},{});}[_0x413519(0x1af)](){const _0x1fd2b0=_0x413519,_0x4de28d=this['globalConfigs'][_0x1fd2b0(0x208)],_0x3a598d=this[_0x1fd2b0(0x129)];return!_0x3a598d||Number(_0x4de28d)===0x1;}async['setConfig'](_0x135e31){const _0x3bcb65=_0x413519;try{const {settings:_0x3a0b22}=_0x135e31;for(const _0x5e3e89 of _0x3a0b22){await this[_0x3bcb65(0x1d5)](_0x5e3e89);}await this[_0x3bcb65(0x131)]();const _0x42f673=_0x3a0b22['map'](_0x31c54d=>_0x31c54d[_0x3bcb65(0x113)]);return(_0x42f673[_0x3bcb65(0x20a)](_0x3bcb65(0x18b))||_0x42f673[_0x3bcb65(0x20a)](_0x3bcb65(0x116)))&&await this[_0x3bcb65(0x192)](![]),(_0x42f673[_0x3bcb65(0x20a)](_0x3bcb65(0x1a0))||_0x42f673[_0x3bcb65(0x20a)]('wechatOfficialAppSecret'))&&await this[_0x3bcb65(0x124)](),_0x3bcb65(0x12b);}catch(_0x455086){console[_0x3bcb65(0x14c)](_0x3bcb65(0x161),_0x455086);}}async[_0x413519(0x1d5)](_0x45942c){const _0x288892=_0x413519;try{const {configKey:_0x3b7394,configVal:_0xd3e11a,status:status=0x1}=_0x45942c,_0x401e6a=await this[_0x288892(0x12f)][_0x288892(0x152)]({'where':{'configKey':_0x3b7394}});if(_0x401e6a){const _0x1a0cc0=await this['configEntity'][_0x288892(0x140)]({'configKey':_0x3b7394},{'configVal':_0xd3e11a,'status':status});}else{const _0x418542=await this[_0x288892(0x12f)]['save']({'configKey':_0x3b7394,'configVal':_0xd3e11a,'status':status});}}catch(_0x1e6a1c){console['log']('error:\x20',_0x1e6a1c);throw new common_1['HttpException'](_0x288892(0x127),common_1[_0x288892(0x1e5)]['BAD_REQUEST']);}}async['queryNotice'](){const _0x485ba3=_0x413519;return await this[_0x485ba3(0x1dc)]([_0x485ba3(0x16e),_0x485ba3(0x1de)]);}async[_0x413519(0x1b3)](){const _0x1096e0=_0x413519;return await this[_0x1096e0(0x1dc)]([_0x1096e0(0x1be),'copyrightTitle']);}async[_0x413519(0x139)](){const _0x6a7b78=_0x413519,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x6a7b78(0x1dc)]([_0x6a7b78(0x14f),'payEpayStatus',_0x6a7b78(0x149),'payWechatStatus']);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus]['every'](_0xf18f53=>_0xf18f53===0x0))throw new common_1[(_0x6a7b78(0x1c9))](_0x6a7b78(0x157),common_1[_0x6a7b78(0x1e5)][_0x6a7b78(0x193)]);if(Number(payWechatStatus)===0x1)return _0x6a7b78(0x1a8);if(Number(payEpayStatus)===0x1)return _0x6a7b78(0x155);if(Number(payMpayStatus)===0x1)return'mpay';if(Number(payHupiStatus)===0x1)return'hupi';}async[_0x413519(0x172)](){const _0x145553=_0x413519,{siteName:_0x1e2006,qqNumber:_0x4d9811,vxNumber:_0x49bedf,registerBaseUrl:_0xb2d54b,domain:_0x503a25}=await this[_0x145553(0x1dc)]([_0x145553(0x1e8),_0x145553(0x119),'vxNumber',_0x145553(0x163),_0x145553(0x1aa)]);return{'siteName':_0x1e2006,'qqNumber':_0x4d9811,'vxNumber':_0x49bedf,'registerBaseUrl':_0xb2d54b,'domain':_0x503a25};}async[_0x413519(0x11e)](){const _0x43e290=_0x413519,{phoneRegisterStatus:_0x4a2803,aliPhoneAccessKeyId:_0x1d51b9,aliPhoneAccessKeySecret:_0xf29e14,aliPhoneSignName:_0x5e03d2,aliPhoneTemplateCode:_0x56eccb}=await this[_0x43e290(0x1dc)]([_0x43e290(0x1a9),_0x43e290(0x1cb),_0x43e290(0x1d0),_0x43e290(0x14e),'aliPhoneTemplateCode']);if(Number(_0x4a2803)!==0x1)throw new common_1[(_0x43e290(0x1c9))](_0x43e290(0x16a),common_1['HttpStatus'][_0x43e290(0x193)]);return{'accessKeyId':_0x1d51b9,'accessKeySecret':_0xf29e14,'SignName':_0x5e03d2,'TemplateCode':_0x56eccb};}[_0x413519(0x159)](){const _0x27f57f=_0x413519;return process[_0x27f57f(0x181)]['NAMESPACE']||'ROOKETAI';}async[_0x413519(0x1cc)](){const _0x5229a5=_0x413519,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x5229a5(0x1dc)]([_0x5229a5(0x19e),_0x5229a5(0x121),_0x5229a5(0x1f7),_0x5229a5(0x1ab)]);if(Number(signInStatus)!==0x1)throw new common_1[(_0x5229a5(0x1c9))](_0x5229a5(0x1bb),common_1[_0x5229a5(0x1e5)]['BAD_REQUEST']);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x413519(0x201)](){const _0x31e3dd=_0x413519,_0x235ccf=_0x31e3dd(0x171),_0x3cbd23=await fetch(_0x235ccf,{}),_0xf3d596=await _0x3cbd23[_0x31e3dd(0x130)](),{success:success=!![],message:_0x29a993}=_0xf3d596;common_1[_0x31e3dd(0x1ad)][_0x31e3dd(0x187)](_0x31e3dd(0x179)),common_1[_0x31e3dd(0x1ad)]['error']('请填写您的授权码'),common_1['Logger'][_0x31e3dd(0x187)](_0x31e3dd(0x1ed)),common_1[_0x31e3dd(0x1ad)]['error'](_0x31e3dd(0x1ed)),common_1[_0x31e3dd(0x1ad)][_0x31e3dd(0x15e)](_0x31e3dd(0x15b));}async[_0x413519(0x11d)](){const _0x2e5917=_0x413519,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x472b8a,rocketaiBuiltInSensitiveStatus:rocketaiBuiltInSensitiveStatus=0x0,rocketaiBuiltInSensitiveApiBase:_0x3c3f06,rocketaiBuiltInSensitiveAuthKey:_0x4d0721}=await this['getConfigs']([_0x2e5917(0x110),_0x2e5917(0x137),_0x2e5917(0x1e4),_0x2e5917(0x1b8),_0x2e5917(0x173)]);if(Number(baiduTextStatus)===0x1)return{'useType':'baidu','baiduTextAccessToken':_0x472b8a};if(Number(rocketaiBuiltInSensitiveStatus)===0x1)return{'useType':'rocketai','rocketaiBuiltInSensitiveApiBase':_0x3c3f06,'rocketaiBuiltInSensitiveAuthKey':_0x4d0721};return null;}async[_0x413519(0x13e)](_0x66fc15){const _0x5c8305=_0x413519;try{const {settings:_0x3a0760}=_0x66fc15;for(const _0x5b51f9 of _0x3a0760){const {configKey:_0x5e0327,configVal:_0x5475a1}=_0x5b51f9,_0x437062=await this['noticeEntity']['findOne']({'where':{'configKey':_0x5e0327}});_0x437062?await this[_0x5c8305(0x1f9)][_0x5c8305(0x140)]({'configKey':_0x5e0327},{'configVal':_0x5475a1}):await this[_0x5c8305(0x1f9)]['save']({'configKey':_0x5e0327,'configVal':_0x5475a1});}return _0x5c8305(0x12b);}catch(_0xf173f6){console[_0x5c8305(0x14c)](_0x5c8305(0x161),_0xf173f6);throw new common_1['HttpException'](_0x5c8305(0x127),common_1[_0x5c8305(0x1e5)][_0x5c8305(0x193)]);}}async[_0x413519(0x1d8)](_0x2423e9){const _0x1541bf=_0x413519,{keys:_0x2d51f6}=_0x2423e9,_0x57bb58=await this[_0x1541bf(0x1f9)][_0x1541bf(0x1cf)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x2d51f6)}});return _0x57bb58[_0x1541bf(0x1c1)]((_0x465c65,_0x36a481)=>{const _0x18b4e9=_0x1541bf;return _0x465c65[_0x36a481['configKey']]=_0x36a481[_0x18b4e9(0x1fe)],_0x465c65;},{});}};GlobalConfigService=__decorate([(0x0,common_1[_0x413519(0x1e6)])(),__param(0x0,(0x0,typeorm_1[_0x413519(0x114)])(config_entity_1[_0x413519(0x134)])),__param(0x1,(0x0,typeorm_1[_0x413519(0x114)])(chatLog_entity_1[_0x413519(0x1bc)])),__param(0x2,(0x0,typeorm_1[_0x413519(0x114)])(notice_entity_1[_0x413519(0x188)])),__metadata(_0x413519(0x115),[typeorm_2[_0x413519(0x1fa)],typeorm_2[_0x413519(0x1fa)],typeorm_2[_0x413519(0x1fa)],models_service_1['ModelsService']])],GlobalConfigService),exports[_0x413519(0x206)]=GlobalConfigService;