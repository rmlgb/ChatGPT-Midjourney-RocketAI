'use strict';const _0x3a0bd9=_0x25ce;(function(_0x130fa4,_0x40ac00){const _0x4c0d9f=_0x25ce,_0x383955=_0x130fa4();while(!![]){try{const _0x33a87b=-parseInt(_0x4c0d9f(0x1a9))/0x1*(-parseInt(_0x4c0d9f(0x1ad))/0x2)+parseInt(_0x4c0d9f(0x1a8))/0x3*(-parseInt(_0x4c0d9f(0x1d0))/0x4)+-parseInt(_0x4c0d9f(0x1d2))/0x5+-parseInt(_0x4c0d9f(0x1bc))/0x6*(-parseInt(_0x4c0d9f(0x1a4))/0x7)+-parseInt(_0x4c0d9f(0x1bb))/0x8*(-parseInt(_0x4c0d9f(0x1b1))/0x9)+-parseInt(_0x4c0d9f(0x1af))/0xa+-parseInt(_0x4c0d9f(0x1cf))/0xb;if(_0x33a87b===_0x40ac00)break;else _0x383955['push'](_0x383955['shift']());}catch(_0x5f440e){_0x383955['push'](_0x383955['shift']());}}}(_0x21ba,0xabfa8));var __decorate=this&&this[_0x3a0bd9(0x1ca)]||function(_0x1558e1,_0x4ce5f4,_0x17254e,_0xd7e540){const _0x499a8e=_0x3a0bd9;var _0x3ad5e4=arguments[_0x499a8e(0x1b7)],_0x2fc6de=_0x3ad5e4<0x3?_0x4ce5f4:_0xd7e540===null?_0xd7e540=Object['getOwnPropertyDescriptor'](_0x4ce5f4,_0x17254e):_0xd7e540,_0x3bf8ec;if(typeof Reflect==='object'&&typeof Reflect[_0x499a8e(0x1b3)]===_0x499a8e(0x1ae))_0x2fc6de=Reflect['decorate'](_0x1558e1,_0x4ce5f4,_0x17254e,_0xd7e540);else{for(var _0x131d99=_0x1558e1[_0x499a8e(0x1b7)]-0x1;_0x131d99>=0x0;_0x131d99--)if(_0x3bf8ec=_0x1558e1[_0x131d99])_0x2fc6de=(_0x3ad5e4<0x3?_0x3bf8ec(_0x2fc6de):_0x3ad5e4>0x3?_0x3bf8ec(_0x4ce5f4,_0x17254e,_0x2fc6de):_0x3bf8ec(_0x4ce5f4,_0x17254e))||_0x2fc6de;}return _0x3ad5e4>0x3&&_0x2fc6de&&Object['defineProperty'](_0x4ce5f4,_0x17254e,_0x2fc6de),_0x2fc6de;},__metadata=this&&this[_0x3a0bd9(0x1bd)]||function(_0x38d53a,_0x267386){const _0x507272=_0x3a0bd9;if(typeof Reflect===_0x507272(0x1b4)&&typeof Reflect[_0x507272(0x1b9)]===_0x507272(0x1ae))return Reflect[_0x507272(0x1b9)](_0x38d53a,_0x267386);},__param=this&&this['__param']||function(_0x3a925f,_0x47c096){return function(_0x22be96,_0x13d087){_0x47c096(_0x22be96,_0x13d087,_0x3a925f);};};function _0x21ba(){const _0x14aeda=['zRange','您已在其他设备覆盖登录、请您重新登录！','2OCldis','function','4981250FmagfD','super','1023849trwuXu','redisClient','decorate','object','set','saveToken','length','tokens:','metadata','Injectable','64zdtjVF','6529794zaQENG','__metadata','expire','design:paramtypes','REDIS_CLIENT','HttpException','HttpStatus','includes','defineProperty','user','del','__esModule','aaa','Inject','__decorate','UNAUTHORIZED','invalidateTokens','@nestjs/common','onModuleInit','53130ZATLCe','164536sOghSG','get','6458755FgzeSR','token:','ttl','7fvkKmB','RedisCacheService','test','visitor','51oDvNlB','1200021lCPQwC','forEach'];_0x21ba=function(){return _0x14aeda;};return _0x21ba();}Object[_0x3a0bd9(0x1c4)](exports,_0x3a0bd9(0x1c7),{'value':!![]}),exports['RedisCacheService']=void 0x0;const common_1=require(_0x3a0bd9(0x1cd));function _0x25ce(_0x2ea8b1,_0x47bdc3){const _0x21bad9=_0x21ba();return _0x25ce=function(_0x25ce5a,_0x2533c2){_0x25ce5a=_0x25ce5a-0x1a2;let _0x2c3217=_0x21bad9[_0x25ce5a];return _0x2c3217;},_0x25ce(_0x2ea8b1,_0x47bdc3);}let RedisCacheService=class RedisCacheService{constructor(_0x1fa13c){const _0x44d1b2=_0x3a0bd9;this[_0x44d1b2(0x1b2)]=_0x1fa13c;}async[_0x3a0bd9(0x1ce)](){}[_0x3a0bd9(0x1a6)](){const _0x553084=_0x3a0bd9;return this[_0x553084(0x1b2)][_0x553084(0x1b5)](_0x553084(0x1c8),0x6f),0x1;}async[_0x3a0bd9(0x1d1)](_0x22b4bd){const _0x3de603=_0x3a0bd9,{key:_0x2f4adc}=_0x22b4bd,_0x22137d=await this[_0x3de603(0x1b2)]['get'](_0x2f4adc);return await this[_0x3de603(0x1b2)][_0x3de603(0x1d1)](_0x2f4adc);}async[_0x3a0bd9(0x1b5)](_0x579c23,_0x24e7ae){const _0xa7b558=_0x3a0bd9;try{const {key:_0x1bd6ba,val:_0x285e65}=_0x579c23;await this[_0xa7b558(0x1b2)]['set'](_0x1bd6ba,_0x285e65),_0x24e7ae&&await this[_0xa7b558(0x1b2)][_0xa7b558(0x1be)](_0x1bd6ba,_0x24e7ae);return;}catch(_0xf4b800){throw new common_1[(_0xa7b558(0x1c1))](_0xf4b800,common_1[_0xa7b558(0x1c2)]['BAD_REQUEST']);}}async['ttl'](_0x149dd8){const _0x1ec2cd=_0x3a0bd9;return await this[_0x1ec2cd(0x1b2)][_0x1ec2cd(0x1a3)](_0x149dd8);}async[_0x3a0bd9(0x1c6)](_0x309235){const _0xf7041a=_0x3a0bd9,{key:_0x15d8fc}=_0x309235;await this[_0xf7041a(0x1b2)][_0xf7041a(0x1c6)](_0x15d8fc);return;}async[_0x3a0bd9(0x1b6)](_0x5850fe,_0x542805){const _0x57571a=_0x3a0bd9,_0xde43db=await this[_0x57571a(0x1b2)][_0x57571a(0x1ab)](_0x57571a(0x1b8)+_0x5850fe,0x0,-0x1);await this[_0x57571a(0x1cc)](_0x5850fe,_0xde43db),this['redisClient'][_0x57571a(0x1b5)](_0x57571a(0x1a2)+_0x5850fe,_0x542805);}async[_0x3a0bd9(0x1cc)](_0x57c963,_0x32ee72){const _0x385c4d=_0x3a0bd9;_0x32ee72[_0x385c4d(0x1aa)](_0x5628d3=>{const _0x3ebd6b=_0x385c4d;this[_0x3ebd6b(0x1b2)][_0x3ebd6b(0x1c6)](_0x3ebd6b(0x1a2)+_0x57c963+':'+_0x5628d3);});}async['checkTokenAuth'](_0xeafc3b,_0x4a007c){const _0x583573=_0x3a0bd9,{id:_0x851edb,role:_0x228d2c}=_0x4a007c[_0x583573(0x1c5)];if(_0x228d2c===_0x583573(0x1a7))return!![];const _0x2fab5a=await this['redisClient'][_0x583573(0x1d1)](_0x583573(0x1a2)+_0x851edb);if(_0x2fab5a===null)return await this[_0x583573(0x1b2)][_0x583573(0x1b5)](_0x583573(0x1a2)+_0x851edb,_0xeafc3b),!![];if(_0x2fab5a!==_0xeafc3b){if([_0x583573(0x1b0),'admin'][_0x583573(0x1c3)](_0x228d2c))return!![];throw new common_1[(_0x583573(0x1c1))](_0x583573(0x1ac),common_1[_0x583573(0x1c2)][_0x583573(0x1cb)]);}}};RedisCacheService=__decorate([(0x0,common_1[_0x3a0bd9(0x1ba)])(),__param(0x0,(0x0,common_1[_0x3a0bd9(0x1c9)])(_0x3a0bd9(0x1c0))),__metadata(_0x3a0bd9(0x1bf),[Object])],RedisCacheService),exports[_0x3a0bd9(0x1a5)]=RedisCacheService;