'use strict';var _0x32df60=_0x3787;(function(_0x413d12,_0x1de504){var _0x2fcb49=_0x3787,_0x3634a6=_0x413d12();while(!![]){try{var _0x478448=parseInt(_0x2fcb49(0x11c))/0x1*(-parseInt(_0x2fcb49(0x13c))/0x2)+parseInt(_0x2fcb49(0x134))/0x3*(-parseInt(_0x2fcb49(0x119))/0x4)+-parseInt(_0x2fcb49(0x11b))/0x5+parseInt(_0x2fcb49(0x124))/0x6*(-parseInt(_0x2fcb49(0x144))/0x7)+parseInt(_0x2fcb49(0x150))/0x8*(-parseInt(_0x2fcb49(0x145))/0x9)+-parseInt(_0x2fcb49(0x13e))/0xa+-parseInt(_0x2fcb49(0x152))/0xb*(-parseInt(_0x2fcb49(0x121))/0xc);if(_0x478448===_0x1de504)break;else _0x3634a6['push'](_0x3634a6['shift']());}catch(_0x47881c){_0x3634a6['push'](_0x3634a6['shift']());}}}(_0x14ec,0x45f9b));var __decorate=this&&this['__decorate']||function(_0x3ba1bd,_0x593ba0,_0x4f8ba0,_0x3584d0){var _0x3fb7e3=_0x3787,_0x5d79a1=arguments['length'],_0x2c3eab=_0x5d79a1<0x3?_0x593ba0:_0x3584d0===null?_0x3584d0=Object[_0x3fb7e3(0x12b)](_0x593ba0,_0x4f8ba0):_0x3584d0,_0x55741d;if(typeof Reflect===_0x3fb7e3(0x140)&&typeof Reflect[_0x3fb7e3(0x148)]===_0x3fb7e3(0x11f))_0x2c3eab=Reflect[_0x3fb7e3(0x148)](_0x3ba1bd,_0x593ba0,_0x4f8ba0,_0x3584d0);else{for(var _0x517218=_0x3ba1bd[_0x3fb7e3(0x143)]-0x1;_0x517218>=0x0;_0x517218--)if(_0x55741d=_0x3ba1bd[_0x517218])_0x2c3eab=(_0x5d79a1<0x3?_0x55741d(_0x2c3eab):_0x5d79a1>0x3?_0x55741d(_0x593ba0,_0x4f8ba0,_0x2c3eab):_0x55741d(_0x593ba0,_0x4f8ba0))||_0x2c3eab;}return _0x5d79a1>0x3&&_0x2c3eab&&Object[_0x3fb7e3(0x127)](_0x593ba0,_0x4f8ba0,_0x2c3eab),_0x2c3eab;},__metadata=this&&this[_0x32df60(0x112)]||function(_0x1b73aa,_0x5c7ec0){var _0x2cf42d=_0x32df60;if(typeof Reflect===_0x2cf42d(0x140)&&typeof Reflect[_0x2cf42d(0x11a)]===_0x2cf42d(0x11f))return Reflect[_0x2cf42d(0x11a)](_0x1b73aa,_0x5c7ec0);},QueueProcessor_1;Object[_0x32df60(0x127)](exports,_0x32df60(0x12c),{'value':!![]}),exports[_0x32df60(0x11e)]=void 0x0;function _0x14ec(){var _0x78ca9f=['data','name','\x20were\x20cleaned.','prototype','OnQueueDrained','Queue\x20failed:\x20','12wTPesI','metadata','62795ClvYiL','307uBajbT','@nestjs/bull','QueueProcessor','function','design:type','12XqZPKr','../midjourney/midjourney.service','design:returntype','6qXedUW',':\x20绘图失败\x20','drawFailed','defineProperty','MJDRAW','OnQueueResumed','onQueueProgress','getOwnPropertyDescriptor','__esModule','OnQueueCleaned','onQueueError','OnQueueCompleted','队列暂停的时候调用','CONCURRENCY','handleJob','onQueueFailed','412611LcVEIV','@nestjs/common','midjourneyService','MidjourneyService','Process','env','onQueueCleaned','log','268dDvEEz','OnQueueProgress','7820dRWVdo','Queue\x20cleaned:\x20','object','onQueueCompleted','logger','length','1143471OdUnsF','1605807bIBoZP','design:paramtypes','OnQueueActive','decorate','\x20jobs\x20of\x20type\x20','onQueueDrained','onQueuePaused','队列任务的一个回调用于通知当前进度','OnQueueFailed','mjDraw','Logger','8UyvofK','onQueueActive','12050335HTfsak','draw','onQueueResumed','__metadata'];_0x14ec=function(){return _0x78ca9f;};return _0x14ec();}const bull_1=require(_0x32df60(0x11d)),common_1=require(_0x32df60(0x135)),midjourney_service_1=require(_0x32df60(0x122));function _0x3787(_0x3b92d7,_0x11003a){var _0x14ec70=_0x14ec();return _0x3787=function(_0x378776,_0x6cdb11){_0x378776=_0x378776-0x110;var _0x38d135=_0x14ec70[_0x378776];return _0x38d135;},_0x3787(_0x3b92d7,_0x11003a);}let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0x30da93){var _0x258225=_0x32df60;this['midjourneyService']=_0x30da93,this[_0x258225(0x142)]=new common_1[(_0x258225(0x14f))](QueueProcessor_1[_0x258225(0x114)]);}async[_0x32df60(0x132)](_0x47d1d7){var _0x52afe1=_0x32df60;const _0x579576=await this[_0x52afe1(0x136)][_0x52afe1(0x110)](_0x47d1d7[_0x52afe1(0x113)],_0x47d1d7['id'],_0x47d1d7);return _0x579576;}[_0x32df60(0x151)](_0x5d13bd){}[_0x32df60(0x12e)](_0x5616b7){var _0x2aec8a=_0x32df60;console[_0x2aec8a(0x13b)]('队列发生错误',_0x5616b7);}['onQueueProgress'](_0x4f671a,_0x4395ce){var _0x559cdb=_0x32df60;console[_0x559cdb(0x13b)](_0x559cdb(0x14c),_0x4f671a['id'],_0x4395ce);}[_0x32df60(0x141)](_0x35aac8,_0x3fcf09){}[_0x32df60(0x133)](_0x42d544,_0x285d0f){var _0x5b9679=_0x32df60;common_1[_0x5b9679(0x14f)]['error'](_0x5b9679(0x118)+_0x285d0f['message']+_0x5b9679(0x125)+_0x42d544['id'],_0x5b9679(0x11e)),this['midjourneyService'][_0x5b9679(0x126)](_0x42d544[_0x5b9679(0x113)]);}[_0x32df60(0x14b)](){var _0x1f2ee2=_0x32df60;console[_0x1f2ee2(0x13b)](_0x1f2ee2(0x130));}[_0x32df60(0x111)](){var _0x4d421c=_0x32df60;console[_0x4d421c(0x13b)]('队列恢复的时候调用');}['onQueueCleaned'](_0xe4c410,_0x2a3267){var _0xb24a65=_0x32df60;common_1[_0xb24a65(0x14f)][_0xb24a65(0x13b)](_0xb24a65(0x13f)+_0xe4c410['length']+_0xb24a65(0x149)+_0x2a3267+_0xb24a65(0x115),_0xb24a65(0x11e));}[_0x32df60(0x14a)](){}};__decorate([(0x0,bull_1[_0x32df60(0x138)])({'name':_0x32df60(0x14e),'concurrency':process[_0x32df60(0x139)][_0x32df60(0x131)]?+process[_0x32df60(0x139)]['CONCURRENCY']:0x3}),__metadata(_0x32df60(0x120),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],QueueProcessor[_0x32df60(0x116)],_0x32df60(0x132),null),__decorate([(0x0,bull_1[_0x32df60(0x147)])(),__metadata(_0x32df60(0x120),Function),__metadata(_0x32df60(0x146),[Object]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x32df60(0x116)],_0x32df60(0x151),null),__decorate([(0x0,bull_1['OnQueueError'])(),__metadata(_0x32df60(0x120),Function),__metadata('design:paramtypes',[Error]),__metadata(_0x32df60(0x123),void 0x0)],QueueProcessor[_0x32df60(0x116)],'onQueueError',null),__decorate([(0x0,bull_1[_0x32df60(0x13d)])(),__metadata('design:type',Function),__metadata(_0x32df60(0x146),[Object,Number]),__metadata(_0x32df60(0x123),void 0x0)],QueueProcessor[_0x32df60(0x116)],_0x32df60(0x12a),null),__decorate([(0x0,bull_1[_0x32df60(0x12f)])(),__metadata(_0x32df60(0x120),Function),__metadata(_0x32df60(0x146),[Object,Object]),__metadata(_0x32df60(0x123),void 0x0)],QueueProcessor[_0x32df60(0x116)],_0x32df60(0x141),null),__decorate([(0x0,bull_1[_0x32df60(0x14d)])(),__metadata(_0x32df60(0x120),Function),__metadata(_0x32df60(0x146),[Object,Error]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x32df60(0x116)],_0x32df60(0x133),null),__decorate([(0x0,bull_1['OnQueuePaused'])(),__metadata('design:type',Function),__metadata(_0x32df60(0x146),[]),__metadata(_0x32df60(0x123),void 0x0)],QueueProcessor[_0x32df60(0x116)],'onQueuePaused',null),__decorate([(0x0,bull_1[_0x32df60(0x129)])(),__metadata(_0x32df60(0x120),Function),__metadata(_0x32df60(0x146),[]),__metadata(_0x32df60(0x123),void 0x0)],QueueProcessor[_0x32df60(0x116)],_0x32df60(0x111),null),__decorate([(0x0,bull_1[_0x32df60(0x12d)])(),__metadata(_0x32df60(0x120),Function),__metadata('design:paramtypes',[Array,String]),__metadata(_0x32df60(0x123),void 0x0)],QueueProcessor['prototype'],_0x32df60(0x13a),null),__decorate([(0x0,bull_1[_0x32df60(0x117)])(),__metadata(_0x32df60(0x120),Function),__metadata(_0x32df60(0x146),[]),__metadata(_0x32df60(0x123),void 0x0)],QueueProcessor[_0x32df60(0x116)],_0x32df60(0x14a),null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1['Processor'])(_0x32df60(0x128)),__metadata(_0x32df60(0x146),[midjourney_service_1[_0x32df60(0x137)]])],QueueProcessor),exports['QueueProcessor']=QueueProcessor;