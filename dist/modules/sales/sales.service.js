'use strict';const _0x461c70=_0x3ccb;(function(_0x2dc004,_0x383650){const _0x58eb11=_0x3ccb,_0x48dcc5=_0x2dc004();while(!![]){try{const _0x381f95=-parseInt(_0x58eb11(0x127))/0x1*(-parseInt(_0x58eb11(0x110))/0x2)+parseInt(_0x58eb11(0x138))/0x3+-parseInt(_0x58eb11(0x12c))/0x4+parseInt(_0x58eb11(0xf3))/0x5+-parseInt(_0x58eb11(0xf0))/0x6+parseInt(_0x58eb11(0xe4))/0x7+-parseInt(_0x58eb11(0xf2))/0x8*(parseInt(_0x58eb11(0x133))/0x9);if(_0x381f95===_0x383650)break;else _0x48dcc5['push'](_0x48dcc5['shift']());}catch(_0x4d84a9){_0x48dcc5['push'](_0x48dcc5['shift']());}}}(_0x5b58,0xd1c37));function _0x5b58(){const _0xceeed8=['xxxxxxx','提现金额必须为数字且大于0','error:\x20','affected','SalesRecordsEntity','user','提现金额最低必须为','82yoqbHG','inviterEmail','./salesUsers.entity','function','hideString','userId','./../globalConfig/globalConfig.service','用户不存在','includes','salesOrderEntity','decorate','avatar','creaetUserBaseSalesInfo','find','inviterUserId','inviteeEmail','salesRecordsEntity','design:paramtypes','plus','创建提现工单失败','修改成功','map','toNumber','26259KydBDU','decimal.js','object','super','changeUserBaseSalesInfo','2161712YJLHQO','forEach','salesUserList','createOrder','InjectRepository','userInfo','Injectable','171oAnUnq','findOne','getConfigs','Like','inviteeUsername','18138YvLdWf','auditUserName','@nestjs/common','performanceRatio','salesBaseTitle','inviteeAvatar','GlobalConfigService','该工单已审核过','totalAmount,\x20distributionBalance:\x20','updateUserSales','minus','userEntity','count','@nestjs/typeorm','withdrawalAmount','salesBaseRatio','salesUsersEntity','length','HttpStatus','findAndCount','default','withdrawalChannels','审核完成','email','UserEntity','SalesOrderEntity','typeorm','7258517DtAOws','defineProperty','Repository','saveCommissionAmount','新秀分销商','update','orderStatus','salesOutletName','HttpException','drawMoneyOrder','getMineRecords','username','5644272eYrPTD','formatCreateOrUpdateDate','323392oTtcLK','4943955zRhVxc','role','__param','salesAllowDrawMoney','getMineAccount','save','../../common/utils','metadata','DESC','SalesService','assign','log','BAD_REQUEST','__esModule','__metadata','修改失败','inviteeUserId','auditUserId','inviterUsername','getOwnPropertyDescriptor','./salesRecords.entity','globalConfigService'];_0x5b58=function(){return _0xceeed8;};return _0x5b58();}var __decorate=this&&this['__decorate']||function(_0x26e020,_0x36b1c4,_0x1026fd,_0x33106a){const _0x10b95e=_0x3ccb;var _0x10f0fe=arguments['length'],_0x1dbb7f=_0x10f0fe<0x3?_0x36b1c4:_0x33106a===null?_0x33106a=Object[_0x10b95e(0x106)](_0x36b1c4,_0x1026fd):_0x33106a,_0x334cd2;if(typeof Reflect==='object'&&typeof Reflect[_0x10b95e(0x11a)]==='function')_0x1dbb7f=Reflect[_0x10b95e(0x11a)](_0x26e020,_0x36b1c4,_0x1026fd,_0x33106a);else{for(var _0x5bc04d=_0x26e020[_0x10b95e(0x149)]-0x1;_0x5bc04d>=0x0;_0x5bc04d--)if(_0x334cd2=_0x26e020[_0x5bc04d])_0x1dbb7f=(_0x10f0fe<0x3?_0x334cd2(_0x1dbb7f):_0x10f0fe>0x3?_0x334cd2(_0x36b1c4,_0x1026fd,_0x1dbb7f):_0x334cd2(_0x36b1c4,_0x1026fd))||_0x1dbb7f;}return _0x10f0fe>0x3&&_0x1dbb7f&&Object[_0x10b95e(0xe5)](_0x36b1c4,_0x1026fd,_0x1dbb7f),_0x1dbb7f;},__metadata=this&&this[_0x461c70(0x101)]||function(_0x5e9926,_0xed6631){const _0x3300e2=_0x461c70;if(typeof Reflect===_0x3300e2(0x129)&&typeof Reflect[_0x3300e2(0xfa)]===_0x3300e2(0x113))return Reflect[_0x3300e2(0xfa)](_0x5e9926,_0xed6631);},__param=this&&this[_0x461c70(0xf5)]||function(_0x338591,_0x45b61b){return function(_0x2dff94,_0x3eba65){_0x45b61b(_0x2dff94,_0x3eba65,_0x338591);};};Object['defineProperty'](exports,_0x461c70(0x100),{'value':!![]}),exports[_0x461c70(0xfc)]=void 0x0;function _0x3ccb(_0x77d641,_0x4020ef){const _0x5b5808=_0x5b58();return _0x3ccb=function(_0x3ccb25,_0x3e8c6b){_0x3ccb25=_0x3ccb25-0xe4;let _0x319b07=_0x5b5808[_0x3ccb25];return _0x319b07;},_0x3ccb(_0x77d641,_0x4020ef);}const globalConfig_service_1=require(_0x461c70(0x116)),common_1=require(_0x461c70(0x13a)),salesUsers_entity_1=require(_0x461c70(0x112)),typeorm_1=require(_0x461c70(0x145)),typeorm_2=require(_0x461c70(0x152)),salesRecords_entity_1=require(_0x461c70(0x107)),utils_1=require(_0x461c70(0xf9)),user_entity_1=require('../user/user.entity'),decimal_js_1=require(_0x461c70(0x128)),salesOrder_entity_1=require('./salesOrder.entity');let SalesService=class SalesService{constructor(_0x336f18,_0x10a376,_0x5e5eeb,_0x2a5fdd,_0x17360c){const _0x375b28=_0x461c70;this[_0x375b28(0x148)]=_0x336f18,this[_0x375b28(0x120)]=_0x10a376,this[_0x375b28(0x143)]=_0x5e5eeb,this['salesOrderEntity']=_0x2a5fdd,this['globalConfigService']=_0x17360c;}async[_0x461c70(0xf7)](_0xa371aa){const _0x232c18=_0x461c70;try{const {id:_0x47ad14}=_0xa371aa[_0x232c18(0x10e)];let _0x4fe9c6=await this[_0x232c18(0x148)][_0x232c18(0x134)]({'where':{'userId':_0x47ad14}});if(!_0x4fe9c6){const {salesBaseRatio:salesBaseRatio=0xa,salesBaseTitle:salesBaseTitle=_0x232c18(0xe8)}=await this['globalConfigService'][_0x232c18(0x135)]([_0x232c18(0x147),_0x232c18(0x13c)]);_0x4fe9c6=await this[_0x232c18(0x11c)]({'userId':_0x47ad14,'performanceRatio':Number(salesBaseRatio),'salesOutletName':salesBaseTitle});}const _0x27f611=(0x0,utils_1['formatCreateOrUpdateDate'])(_0x4fe9c6),_0x4a35d6=await this['salesRecordsEntity'][_0x232c18(0x144)]({'where':{'inviterUserId':_0x47ad14}}),_0x2f57f3=await this[_0x232c18(0x143)][_0x232c18(0x134)]({'where':{'id':_0x47ad14}})||{'inviteLinkCount':0x0,'inviteCode':_0x232c18(0x109)},{inviteLinkCount:_0x2088b0,inviteCode:_0x5bb98e}=_0x2f57f3,_0xa22aa7=await this[_0x232c18(0x143)][_0x232c18(0x144)]({'where':{'invitedBy':_0x5bb98e}});return Object['assign'](Object[_0x232c18(0xfd)]({},_0x27f611),{'orderCount':_0x4a35d6,'inviteCount':_0xa22aa7,'inviteLinkCount':_0x2088b0});}catch(_0x565cb6){console['log'](_0x232c18(0x10b),_0x565cb6);}}async[_0x461c70(0xee)](_0xb1ffff,_0x2ec779){const _0x209dd4=_0x461c70;try{const {id:_0x15622d}=_0xb1ffff[_0x209dd4(0x10e)],{page:_0x4d25c4,size:_0x5a17f3}=_0x2ec779,[_0x3755da,_0x5a9fbf]=await this[_0x209dd4(0x120)][_0x209dd4(0x14b)]({'where':{'inviterUserId':_0x15622d},'order':{'createdAt':_0x209dd4(0xfb)},'skip':(_0x4d25c4-0x1)*_0x5a17f3,'take':_0x5a17f3});return{'rows':(0x0,utils_1[_0x209dd4(0xf1)])(_0x3755da),'count':_0x5a9fbf};}catch(_0x5080e4){console[_0x209dd4(0xfe)](_0x209dd4(0x10b),_0x5080e4);}}async['inviteRecords'](_0x37f0a9,_0x2972f3){const _0x45775d=_0x461c70;try{const {page:_0x3596fd,size:_0x4c27e0,orderId:_0x5ecee1,orderPrice:_0x12a230}=_0x2972f3;let _0x2ba49b={};_0x5ecee1&&(_0x2ba49b={'orderId':_0x5ecee1}),_0x12a230&&(_0x2ba49b={'orderPrice':_0x12a230});const [_0x147152,_0x36702a]=await this['salesRecordsEntity'][_0x45775d(0x14b)]({'where':_0x2ba49b,'order':{'createdAt':'DESC'},'skip':(_0x3596fd-0x1)*_0x4c27e0,'take':_0x4c27e0}),_0x2133ba=[];_0x147152[_0x45775d(0x125)](_0x14f225=>{const _0x3712db=_0x45775d;_0x2133ba['push'](_0x14f225[_0x3712db(0x11e)]),_0x2133ba['push'](_0x14f225[_0x3712db(0x103)]);});const _0x2504b5=await this[_0x45775d(0x143)][_0x45775d(0x11d)]({'where':{'id':(0x0,typeorm_2['In'])(_0x2133ba)}});return _0x147152[_0x45775d(0x12d)](_0x87d3f3=>{const _0x40e34d=_0x45775d,_0x53fc9b=_0x2504b5[_0x40e34d(0x11d)](_0x202718=>_0x202718['id']===_0x87d3f3['inviterUserId']),_0x376903=_0x2504b5[_0x40e34d(0x11d)](_0x120418=>_0x120418['id']===_0x87d3f3[_0x40e34d(0x103)]),{username:_0xc68404,email:_0x3e6b0a,avatar:_0xd2de98}=_0x2504b5[_0x40e34d(0x11d)](_0x203bb1=>_0x203bb1['id']===_0x87d3f3[_0x40e34d(0x11e)]);_0x87d3f3[_0x40e34d(0x105)]=_0x53fc9b===null||_0x53fc9b===void 0x0?void 0x0:_0x53fc9b[_0x40e34d(0xef)],_0x87d3f3['inviterEmail']=_0x53fc9b===null||_0x53fc9b===void 0x0?void 0x0:_0x53fc9b[_0x40e34d(0x14f)],_0x87d3f3['inviterAvatar']=_0x53fc9b===null||_0x53fc9b===void 0x0?void 0x0:_0x53fc9b['avatar'],_0x87d3f3[_0x40e34d(0x137)]=_0x376903===null||_0x376903===void 0x0?void 0x0:_0x376903[_0x40e34d(0xef)],_0x87d3f3[_0x40e34d(0x11f)]=_0x376903===null||_0x376903===void 0x0?void 0x0:_0x376903[_0x40e34d(0x14f)],_0x87d3f3[_0x40e34d(0x13d)]=_0x376903===null||_0x376903===void 0x0?void 0x0:_0x376903[_0x40e34d(0x11b)];}),_0x37f0a9[_0x45775d(0x10e)][_0x45775d(0xf4)]!==_0x45775d(0x12a)&&_0x147152[_0x45775d(0x12d)](_0x5d4b6c=>{const _0xbf4f97=_0x45775d;_0x5d4b6c[_0xbf4f97(0x111)]=_0x5d4b6c[_0xbf4f97(0x111)]?(0x0,utils_1[_0xbf4f97(0x114)])(_0x5d4b6c[_0xbf4f97(0x111)]):'',_0x5d4b6c['inviteeEmail']=_0x5d4b6c['inviteeEmail']?(0x0,utils_1[_0xbf4f97(0x114)])(_0x5d4b6c[_0xbf4f97(0x11f)]):'';}),{'rows':(0x0,utils_1[_0x45775d(0xf1)])(_0x147152),'count':_0x36702a};}catch(_0x573ed7){console[_0x45775d(0xfe)](_0x45775d(0x10b),_0x573ed7);}}async[_0x461c70(0x11c)](_0x4c274c){const _0x3fcf7e=_0x461c70,{userId:_0x3055eb,performanceRatio:_0x4feace,salesOutletName:_0xaa727b}=_0x4c274c;return await this[_0x3fcf7e(0x148)][_0x3fcf7e(0xf8)]({'userId':_0x3055eb,'performanceRatio':_0x4feace,'salesOutletName':_0xaa727b});}async[_0x461c70(0x12b)](_0xb269fc){const _0x472a01=_0x461c70;return await this['salesUsersEntity'][_0x472a01(0xf8)](_0xb269fc);}async['createSalesRecords'](_0x4184c8){return await this['salesRecordsEntity']['save'](_0x4184c8);}async[_0x461c70(0xe7)](_0x9daa9a,_0x5a498e){const _0x24457e=_0x461c70,_0x2f63c1=await this[_0x24457e(0x148)]['findOne']({'where':{'userId':_0x9daa9a}});if(!_0x2f63c1)return;const {totalAmount:_0x279650,distributionBalance:_0x44731a}=_0x2f63c1;return console[_0x24457e(0xfe)](_0x24457e(0x140),_0x279650,_0x44731a),await this[_0x24457e(0x148)][_0x24457e(0xe9)]({'userId':_0x9daa9a},{'totalAmount':new decimal_js_1[(_0x24457e(0x14c))](_0x279650)[_0x24457e(0x122)](_0x5a498e)['toNumber'](),'distributionBalance':new decimal_js_1[(_0x24457e(0x14c))](_0x44731a)[_0x24457e(0x122)](_0x5a498e)['toNumber']()});}async['appForMoney'](_0x97c2a1,_0x44c60e){const _0x2498c7=_0x461c70,{id:_0x2f05e4}=_0x97c2a1[_0x2498c7(0x10e)],{withdrawalAmount:_0x32676d,withdrawalChannels:_0x4cd14e,contactInformation:_0x3c5e75,remark:_0x2bf303}=_0x44c60e,_0x1e2276=await this[_0x2498c7(0x108)][_0x2498c7(0x135)]([_0x2498c7(0xf6)])||0xa;if(typeof _0x32676d!=='number'||_0x32676d<=0x0)throw new common_1['HttpException'](_0x2498c7(0x10a),common_1[_0x2498c7(0x14a)]['BAD_REQUEST']);if(Number(_0x32676d)<Number(_0x1e2276))throw new common_1['HttpException'](_0x2498c7(0x10f)+_0x1e2276+'元',common_1['HttpStatus'][_0x2498c7(0xff)]);const _0x1617bb=await this[_0x2498c7(0x148)]['findOne']({'where':{'userId':_0x2f05e4}}),{distributionBalance:_0xa52cb8,drawMoneyIn:_0x3def86}=_0x1617bb;if(Number(_0xa52cb8)<Number(_0x32676d))throw new common_1[(_0x2498c7(0xec))]('提现金额不足',common_1[_0x2498c7(0x14a)]['BAD_REQUEST']);const _0x49c31b=new decimal_js_1[(_0x2498c7(0x14c))](_0xa52cb8)[_0x2498c7(0x142)](_0x32676d)[_0x2498c7(0x126)](),_0x5860cb={'userId':_0x2f05e4,'withdrawalAmount':_0x32676d,'orderStatus':0x0,'auditStatus':0x0,'withdrawalChannels':_0x4cd14e,'contactInformation':_0x3c5e75,'remark':_0x2bf303};await this['createOrder'](_0x5860cb);const _0x516b07=await this[_0x2498c7(0x148)][_0x2498c7(0xe9)]({'userId':_0x2f05e4},{'distributionBalance':_0x49c31b,'drawMoneyIn':new decimal_js_1[(_0x2498c7(0x14c))](_0x3def86)['plus'](_0x32676d)[_0x2498c7(0x126)]()});}async[_0x461c70(0xed)](_0x4bf909,_0x59717f){const _0x3d1904=_0x461c70,{id:_0x38e72f}=_0x4bf909[_0x3d1904(0x10e)],{page:_0x2939b2,size:_0x1a14e0}=_0x59717f,[_0x2cd2b4,_0x2ea73b]=await this[_0x3d1904(0x119)][_0x3d1904(0x14b)]({'where':{'userId':_0x38e72f},'order':{'createdAt':_0x3d1904(0xfb)},'skip':(_0x2939b2-0x1)*_0x1a14e0,'take':_0x1a14e0}),_0x3f1413=_0x2cd2b4['map'](_0x319a35=>_0x319a35['auditUserId']),_0x92626=await this['userEntity'][_0x3d1904(0x11d)]({'where':{'id':(0x0,typeorm_2['In'])(_0x3f1413)}});return _0x2cd2b4[_0x3d1904(0x12d)](_0x206645=>{const _0x4692ed=_0x3d1904,_0x3db9d5=_0x92626[_0x4692ed(0x11d)](_0x3a31b2=>_0x3a31b2['id']===_0x206645[_0x4692ed(0x104)]);_0x206645[_0x4692ed(0x139)]=_0x3db9d5?_0x3db9d5[_0x4692ed(0xef)]:'';}),{'rows':(0x0,utils_1[_0x3d1904(0xf1)])(_0x2cd2b4),'count':_0x2ea73b};}async['salesOrder'](_0x5aed1f,_0x56031e){const _0x39bb62=_0x461c70,{page:_0x39a36a,size:_0x2c8c01}=_0x56031e,_0x58f425={};_0x56031e[_0x39bb62(0xea)]!==undefined&&_0x56031e['orderStatus']!==''&&(_0x58f425[_0x39bb62(0xea)]=_0x56031e[_0x39bb62(0xea)]),_0x56031e[_0x39bb62(0x14d)]&&(_0x58f425[_0x39bb62(0x14d)]=_0x56031e[_0x39bb62(0x14d)]);const [_0x19196b,_0x340e61]=await this[_0x39bb62(0x119)][_0x39bb62(0x14b)]({'where':_0x58f425,'order':{'createdAt':'DESC'},'skip':(_0x39a36a-0x1)*_0x2c8c01,'take':_0x2c8c01}),_0x741565=_0x19196b['map'](_0x2c09bd=>_0x2c09bd['userId']),_0x4b8dd4=await this['userEntity'][_0x39bb62(0x11d)]({'where':{'id':(0x0,typeorm_2['In'])(_0x741565)}});return _0x19196b[_0x39bb62(0x12d)](_0xaed8df=>{const _0x399415=_0x39bb62,_0x1ac679=_0x4b8dd4['find'](_0x209918=>_0x209918['id']===_0xaed8df['userId']);if(_0x1ac679){const {username:_0x2e9b63,email:_0x55bc3d,avatar:_0x50b327}=_0x1ac679;_0xaed8df[_0x399415(0x131)]={'username':_0x2e9b63,'avatar':_0x50b327,'email':(0x0,utils_1[_0x399415(0x114)])(_0x55bc3d)};}}),{'rows':(0x0,utils_1[_0x39bb62(0xf1)])(_0x19196b),'count':_0x340e61};}async[_0x461c70(0x12f)](_0x486442){const _0x149848=_0x461c70;try{return await this['salesOrderEntity'][_0x149848(0xf8)](_0x486442);}catch(_0x2901d4){console[_0x149848(0xfe)](_0x149848(0x10b),_0x2901d4);throw new common_1[(_0x149848(0xec))](_0x149848(0x123),common_1[_0x149848(0x14a)][_0x149848(0xff)]);}}async['auditOrder'](_0x1a9b9c,_0x21c933){const _0xb3abd=_0x461c70;try{const {id:_0x624eec}=_0x1a9b9c[_0xb3abd(0x10e)],{id:_0x4fda2b,status:_0x1d2c60}=_0x21c933;if(![0x1,-0x1][_0xb3abd(0x118)](_0x1d2c60))throw new common_1['HttpException']('审核状态错误',common_1[_0xb3abd(0x14a)][_0xb3abd(0xff)]);const _0x106e41=await this[_0xb3abd(0x119)][_0xb3abd(0x134)]({'where':{'id':_0x4fda2b}});if(_0x106e41[_0xb3abd(0xea)]!==0x0)throw new common_1[(_0xb3abd(0xec))](_0xb3abd(0x13f),common_1[_0xb3abd(0x14a)]['BAD_REQUEST']);const _0x1d7250=await this[_0xb3abd(0x148)]['findOne']({'where':{'userId':_0x106e41[_0xb3abd(0x115)]}}),{withdrawalAmount:_0x4aab71,drawMoneyIn:_0x4ee08d}=_0x1d7250,_0xb63ef0=new decimal_js_1['default'](_0x4aab71)[_0xb3abd(0x122)](_0x106e41[_0xb3abd(0x146)])[_0xb3abd(0x126)](),_0x1a7861=new decimal_js_1['default'](_0x4ee08d)[_0xb3abd(0x142)](_0x106e41['withdrawalAmount'])[_0xb3abd(0x126)]();return await this[_0xb3abd(0x148)][_0xb3abd(0xe9)]({'userId':_0x106e41['userId']},{'withdrawalAmount':_0xb63ef0,'drawMoneyIn':_0x1a7861}),await this[_0xb3abd(0x119)]['update']({'id':_0x4fda2b},{'orderStatus':_0x1d2c60,'auditStatus':_0x1d2c60,'auditUserId':_0x624eec,'paymentStatus':_0x1d2c60}),_0xb3abd(0x14e);}catch(_0x3b6369){console[_0xb3abd(0xfe)]('error:\x20',_0x3b6369);throw new common_1['HttpException']('审核失败',common_1[_0xb3abd(0x14a)][_0xb3abd(0xff)]);}}async[_0x461c70(0x12e)](_0x2612c9,_0x201036){const _0x2ada98=_0x461c70,{page:_0x3f4835,size:_0x3ed024,salesOutletName:_0x20f29d,performanceRatio:_0xd743fe}=_0x201036,_0x50584b={};_0x20f29d&&(_0x50584b[_0x2ada98(0xeb)]=(0x0,typeorm_2[_0x2ada98(0x136)])('%'+_0x20f29d+'%')),_0xd743fe&&(_0x50584b[_0x2ada98(0x13b)]=_0xd743fe);const [_0x22bfa5,_0x606770]=await this[_0x2ada98(0x148)][_0x2ada98(0x14b)]({'where':_0x50584b,'order':{'id':'DESC'},'skip':(_0x3f4835-0x1)*_0x3ed024,'take':_0x3ed024}),_0x268785=_0x22bfa5[_0x2ada98(0x125)](_0x5bbb62=>_0x5bbb62[_0x2ada98(0x115)]),_0x5705b7=await this[_0x2ada98(0x143)]['find']({'where':{'id':(0x0,typeorm_2['In'])(_0x268785)}});return _0x22bfa5[_0x2ada98(0x12d)](_0x5336ff=>{const _0x19a6f5=_0x2ada98,_0x52efde=_0x5705b7[_0x19a6f5(0x11d)](_0x5c44bd=>_0x5c44bd['id']===_0x5336ff[_0x19a6f5(0x115)]);_0x5336ff['userInfo']=_0x52efde?_0x52efde:{};}),_0x2612c9[_0x2ada98(0x10e)][_0x2ada98(0xf4)]!=='super'&&_0x22bfa5[_0x2ada98(0x12d)](_0x1f2ec7=>{const _0x197d7d=_0x2ada98;var _0x1267eb,_0x44a6de;_0x1f2ec7[_0x197d7d(0x131)]['email']=((_0x1267eb=_0x1f2ec7[_0x197d7d(0x131)])===null||_0x1267eb===void 0x0?void 0x0:_0x1267eb[_0x197d7d(0x14f)])?(0x0,utils_1[_0x197d7d(0x114)])((_0x44a6de=_0x1f2ec7[_0x197d7d(0x131)])===null||_0x44a6de===void 0x0?void 0x0:_0x44a6de[_0x197d7d(0x14f)]):'';}),{'rows':_0x22bfa5,'count':_0x606770};}async[_0x461c70(0x141)](_0xba8939,_0x51a2da){const _0x15967e=_0x461c70,{performanceRatio:_0x200693,salesOutletName:_0x4cbeb5,userId:_0x4ba7bb}=_0x51a2da,_0x1ac63e=await this[_0x15967e(0x148)][_0x15967e(0x134)]({'where':{'userId':_0x4ba7bb}});if(!_0x1ac63e)throw new common_1[(_0x15967e(0xec))](_0x15967e(0x117),common_1[_0x15967e(0x14a)]['BAD_REQUEST']);const _0x54fab1=await this[_0x15967e(0x148)][_0x15967e(0xe9)]({'userId':_0x4ba7bb},{'performanceRatio':_0x200693,'salesOutletName':_0x4cbeb5});if(_0x54fab1[_0x15967e(0x10c)]>0x0)return _0x15967e(0x124);else throw new common_1['HttpException'](_0x15967e(0x102),common_1[_0x15967e(0x14a)][_0x15967e(0xff)]);}};SalesService=__decorate([(0x0,common_1[_0x461c70(0x132)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(salesUsers_entity_1['SalesUsersEntity'])),__param(0x1,(0x0,typeorm_1[_0x461c70(0x130)])(salesRecords_entity_1[_0x461c70(0x10d)])),__param(0x2,(0x0,typeorm_1[_0x461c70(0x130)])(user_entity_1[_0x461c70(0x150)])),__param(0x3,(0x0,typeorm_1[_0x461c70(0x130)])(salesOrder_entity_1[_0x461c70(0x151)])),__metadata(_0x461c70(0x121),[typeorm_2[_0x461c70(0xe6)],typeorm_2[_0x461c70(0xe6)],typeorm_2[_0x461c70(0xe6)],typeorm_2[_0x461c70(0xe6)],globalConfig_service_1[_0x461c70(0x13e)]])],SalesService),exports[_0x461c70(0xfc)]=SalesService;