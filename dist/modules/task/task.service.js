'use strict';const _0x45f99c=_0x2f4e;(function(_0x1f3c74,_0x153fa2){const _0x2ff29e=_0x2f4e,_0x5ce4d7=_0x1f3c74();while(!![]){try{const _0xb416db=-parseInt(_0x2ff29e(0x136))/0x1*(parseInt(_0x2ff29e(0x12e))/0x2)+parseInt(_0x2ff29e(0x133))/0x3*(parseInt(_0x2ff29e(0x14a))/0x4)+-parseInt(_0x2ff29e(0x14c))/0x5*(-parseInt(_0x2ff29e(0x151))/0x6)+-parseInt(_0x2ff29e(0x139))/0x7+parseInt(_0x2ff29e(0x12d))/0x8+parseInt(_0x2ff29e(0x11f))/0x9*(-parseInt(_0x2ff29e(0x13a))/0xa)+parseInt(_0x2ff29e(0x12c))/0xb;if(_0xb416db===_0x153fa2)break;else _0x5ce4d7['push'](_0x5ce4d7['shift']());}catch(_0x5e3689){_0x5ce4d7['push'](_0x5ce4d7['shift']());}}}(_0x378b,0xabdf1));function _0x378b(){const _0x3044b6=['8250jYrkbp','10141623OWptCX','function','EVERY_5_MINUTES','userBalanceEntity','refreshBaiduAccesstoken','EVERY_HOUR','Logger','TaskService','@nestjs/typeorm','./../globalConfig/globalConfig.service','checkUserMemerExpire','handleCron','CronExpression','11847396EgNoym','9215928LXSDyW','282EFAUUM','Repository','object','InjectRepository','defineProperty','9327jpEqzw','__param','debug','6843vmTFwP','length','metadata','245574VqMncO','10gyLKdW','design:paramtypes','typeorm','design:type','decorate','__esModule','../models/models.service','design:returntype','getWechatAccessToken','LessThanOrEqual','modelsService','ModelsService','@nestjs/schedule','find','@nestjs/common','globalConfigService','500nMNGVx','Cron','775grPaaz','then','prototype','会员已到期、清空所有余额并移除会员身份！','Injectable'];_0x378b=function(){return _0x3044b6;};return _0x378b();}var __decorate=this&&this['__decorate']||function(_0x3cbd24,_0x46d47c,_0x220ee7,_0x589511){const _0x351990=_0x2f4e;var _0x3c3f80=arguments[_0x351990(0x137)],_0x3e4c73=_0x3c3f80<0x3?_0x46d47c:_0x589511===null?_0x589511=Object['getOwnPropertyDescriptor'](_0x46d47c,_0x220ee7):_0x589511,_0x24198c;if(typeof Reflect===_0x351990(0x130)&&typeof Reflect[_0x351990(0x13e)]===_0x351990(0x120))_0x3e4c73=Reflect[_0x351990(0x13e)](_0x3cbd24,_0x46d47c,_0x220ee7,_0x589511);else{for(var _0x2467ef=_0x3cbd24[_0x351990(0x137)]-0x1;_0x2467ef>=0x0;_0x2467ef--)if(_0x24198c=_0x3cbd24[_0x2467ef])_0x3e4c73=(_0x3c3f80<0x3?_0x24198c(_0x3e4c73):_0x3c3f80>0x3?_0x24198c(_0x46d47c,_0x220ee7,_0x3e4c73):_0x24198c(_0x46d47c,_0x220ee7))||_0x3e4c73;}return _0x3c3f80>0x3&&_0x3e4c73&&Object[_0x351990(0x132)](_0x46d47c,_0x220ee7,_0x3e4c73),_0x3e4c73;},__metadata=this&&this['__metadata']||function(_0x484d5b,_0x4f54cf){const _0x413343=_0x2f4e;if(typeof Reflect==='object'&&typeof Reflect[_0x413343(0x138)]===_0x413343(0x120))return Reflect['metadata'](_0x484d5b,_0x4f54cf);},__param=this&&this[_0x45f99c(0x134)]||function(_0x47994f,_0x176806){return function(_0x38c12,_0x362c2c){_0x176806(_0x38c12,_0x362c2c,_0x47994f);};};Object[_0x45f99c(0x132)](exports,_0x45f99c(0x13f),{'value':!![]}),exports[_0x45f99c(0x126)]=void 0x0;const globalConfig_service_1=require(_0x45f99c(0x128)),common_1=require(_0x45f99c(0x148)),schedule_1=require(_0x45f99c(0x146)),userBalance_entity_1=require('../userBalance/userBalance.entity'),typeorm_1=require(_0x45f99c(0x127)),typeorm_2=require(_0x45f99c(0x13c)),models_service_1=require(_0x45f99c(0x140));function _0x2f4e(_0x1ca555,_0x20fdd0){const _0x378b8c=_0x378b();return _0x2f4e=function(_0x2f4e48,_0xf344ad){_0x2f4e48=_0x2f4e48-0x11f;let _0x116d1a=_0x378b8c[_0x2f4e48];return _0x116d1a;},_0x2f4e(_0x1ca555,_0x20fdd0);}let TaskService=class TaskService{constructor(_0x45ac3f,_0x4aed1f,_0x16af79){const _0x3361a9=_0x45f99c;this['userBalanceEntity']=_0x45ac3f,this[_0x3361a9(0x149)]=_0x4aed1f,this[_0x3361a9(0x144)]=_0x16af79;}[_0x45f99c(0x12a)](){const _0x3140d6=_0x45f99c;common_1[_0x3140d6(0x125)]['debug']('Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token',_0x3140d6(0x126)),this[_0x3140d6(0x149)][_0x3140d6(0x142)]();}async['checkUserMemerExpire'](){const _0x591267=_0x45f99c,_0x17d345=await this[_0x591267(0x122)][_0x591267(0x147)]({'where':{'expirationTime':(0x0,typeorm_2[_0x591267(0x143)])(new Date())}});if(!_0x17d345||!_0x17d345[_0x591267(0x137)])return;_0x17d345['forEach'](_0x4f19d8=>{const _0x4ae59e=_0x591267;this[_0x4ae59e(0x122)]['update']({'id':_0x4f19d8['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0x4ae59e(0x14d)](_0x48d76d=>{const _0x5cea34=_0x4ae59e;common_1[_0x5cea34(0x125)][_0x5cea34(0x135)](_0x4f19d8['id']+_0x5cea34(0x14f),'TaskService');});});}[_0x45f99c(0x123)](){const _0x35a69f=_0x45f99c;this[_0x35a69f(0x144)][_0x35a69f(0x123)]();}};__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x45f99c(0x12b)][_0x45f99c(0x124)]),__metadata(_0x45f99c(0x13d),Function),__metadata(_0x45f99c(0x13b),[]),__metadata(_0x45f99c(0x141),void 0x0)],TaskService[_0x45f99c(0x14e)],_0x45f99c(0x12a),null),__decorate([(0x0,schedule_1[_0x45f99c(0x14b)])(schedule_1[_0x45f99c(0x12b)][_0x45f99c(0x121)]),__metadata(_0x45f99c(0x13d),Function),__metadata('design:paramtypes',[]),__metadata(_0x45f99c(0x141),Promise)],TaskService[_0x45f99c(0x14e)],_0x45f99c(0x129),null),__decorate([(0x0,schedule_1[_0x45f99c(0x14b)])('0\x200\x20*/5\x20*\x20*'),__metadata(_0x45f99c(0x13d),Function),__metadata(_0x45f99c(0x13b),[]),__metadata(_0x45f99c(0x141),void 0x0)],TaskService[_0x45f99c(0x14e)],_0x45f99c(0x123),null),TaskService=__decorate([(0x0,common_1[_0x45f99c(0x150)])(),__param(0x0,(0x0,typeorm_1[_0x45f99c(0x131)])(userBalance_entity_1['UserBalanceEntity'])),__metadata(_0x45f99c(0x13b),[typeorm_2[_0x45f99c(0x12f)],globalConfig_service_1['GlobalConfigService'],models_service_1[_0x45f99c(0x145)]])],TaskService),exports[_0x45f99c(0x126)]=TaskService;